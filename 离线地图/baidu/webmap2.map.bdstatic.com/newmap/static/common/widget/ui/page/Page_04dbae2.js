define("common:widget/ui/page/Page.js",function(a,e,t){function i(a,e,t){if(T.lang.Class.call(this),a){this.container="object"==typeof a?a:T.g(a),this.page=1,this.pageCount=100,this.argName="pg",this.pagecap=4,this.callback=e,this.update=!0;var i={page:1,totalCount:100,pageCount:100,pagecap:4,argName:"pg",update:!0};t||(t=i);for(var s in t)"undefined"!=typeof t[s]&&(this[s]=t[s]);this.render()}}T.extend(i.prototype,{render:function(){try{var e='.page{font-family:"宋体";text-align:center;line-height:12px;font-size:13px}.page a{display:inline-block;border:#e7ecf0 solid 1px;padding:5px 6px 3px;text-decoration:none}.page a:hover{background:#e8f1f6}.page span{display:inline-block;margin:0 2px}.page span.curPage{padding:4px 5px;font-weight:700}.page a.next-none{cursor:default;color:#949494}.page a.next-none:hover{background:#fff}';a.loadCss({content:e,name:"page"}),this.initialize()}catch(t){"undefined"!=typeof alog&&alog("http://webmap2.map.bdstatic.com/newmap/static/common/widget/ui/page/exception.fire","catch",{msg:t.message||t.description,path:"common:widget/ui/page/Page.js",ln:49})}},initialize:function(){try{this.checkPages(),this.container.innerHTML=this.createHtml()}catch(a){"undefined"!=typeof alog&&alog("http://webmap2.map.bdstatic.com/newmap/static/common/widget/ui/page/exception.fire","catch",{msg:a.message||a.description,path:"common:widget/ui/page/Page.js",ln:57})}},checkPages:function(){isNaN(parseInt(this.page))&&(this.page=1),isNaN(parseInt(this.pageCount))&&(this.pageCount=1),this.page<1&&(this.page=1),this.pageCount<1&&(this.pageCount=1),this.page>this.pageCount&&(this.page=this.pageCount),this.page=parseInt(this.page),this.pageCount=parseInt(this.pageCount)},getPage:function(){{var a=location.search,e=new RegExp("[?&]?"+this.argName+"=([^&]*)[&$]?","gi");a.match(e)}this.page=RegExp.$1},createHtml:function(){var a=[],e=this.page-1,t=this.page+1;if(a.push('<p class="page">'),1>e||(this.page>=this.pagecap&&a.push('<span><a href="javascript:void(0)" tid="toFirstPage" onclick="Instance(\''+this.guid+"').toPage(1);return false;\">首页</a></span>"),a.push('<span><a href="javascript:void(0)" tid="toPrevPage" onclick="Instance(\''+this.guid+"').toPage("+e+');return false;"><上一页</a></span>')),this.page<this.pagecap){if(this.page%this.pagecap==0)var i=this.page-this.pagecap-1;else var i=this.page-this.page%this.pagecap+1;var s=i+this.pagecap-1}else{var p=Math.floor(this.pagecap/2),n=this.pagecap%2-1;if(this.pageCount>this.page+p)var s=this.page+p,i=this.page-p-n;else var s=this.pageCount,i=this.page-p-n}if(this.page>this.pageCount-this.pagecap&&this.page>=this.pagecap)var i=this.pageCount-this.pagecap+1,s=this.pageCount;for(var g=i;s>=g;g++)if(g>0)if(g==this.page)a.push('<span class="curPage">'+g+"</span>");else if(g>=1&&g<=this.pageCount){var h="";2==g&&(h="tid=secPageNum"),a.push('<span><a href="javascript:void(0)" '+h+" onclick=\"Instance('"+this.guid+"').toPage("+g+');return false;">'+g+"</a></span>")}return a.push(t>this.pageCount?'<span><a href="javascript:void(0)" tid="toNextPage" class="next next-none">下一页&gt;</a></span>':'<span><a href="javascript:void(0)" tid="toNextPage" onclick="Instance(\''+this.guid+"').toPage("+t+');return false;">下一页></a></span>'),a.push("</p>"),a.join("")},toPage:function(a){var e=a?a:1;"function"==typeof this.callback&&(this.callback(e),this.page=e),this.update&&this.render()}}),t.exports=i});