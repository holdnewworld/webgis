define("common:widget/ui/Storage/Storage.js",function(e,t,a){baidu.storage={},baidu.storage._isValidKey=function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},baidu.storage.userData=function(){var e="_BAIDU.ALL.KEY_",t=function(){var e=null;return e=document.createElement("input"),e.type="hidden",e.addBehavior("#default#userData"),document.body.appendChild(e),e},a=function(e,a){try{var r=t(),o=a||{};if(o.expires){var u;"number"==typeof o.expires&&(u=new Date,u.setTime(u.getTime()+o.expires)),r.expires=u.toUTCString()}o.expires=null,r.setAttribute(o.key,o.value),r.save(o.key)}catch(i){}},r=function(t,r){a(t,r),result=o({key:e}),result=result?{value:result}:{key:e,value:""},new RegExp("(^||)"+t+"(||$)").test(result.value)||(result.value+="|"+t,a(e,result))},o=function(e){try{var a=t();return a.load(e.key),a.getAttribute(e.key)||null}catch(r){return null}},u=function(e){try{var a=t();a.load(e.key),a.removeAttribute(e.key);var r=new Date;r.setTime(r.getTime()-1),a.expires=r.toUTCString(),a.save(e.key)}catch(o){}},i=function(){if(result=o({key:e})){result={value:result};for(var t=(result.value||"").split("|"),a=t.length,r=0;a>r;r++)u({key:t[r]})}};return{getItem:o,setItem:r,removeItem:u,clearAll:i}}(),baidu.storage._isSupportLocalStorage=function(){return"localStorage"in window&&null!==window.localStorage},baidu.storage.isSupportStorage=function(){return"localStorage"in window&&null!==window.localStorage||document.all},baidu.storage.set=function(e){if(baidu.storage._isValidKey(e.key)){var t=e||{};baidu.storage._isSupportLocalStorage()?(window.localStorage.setItem(t.key,t.value),e.expires&&window.localStorage.setItem(t.key+".expires",t.expires)):baidu.storage.userData.setItem(e.key,t)}},baidu.storage.get=function(e){var t=null;if(!baidu.storage._isValidKey(e.key))return t;if(baidu.storage._isSupportLocalStorage()){if(t=window.localStorage.getItem(e.key)){var a=window.localStorage.getItem(e.key+".expires");t={value:t,expires:a?new Date(a):null},t&&t.expires&&t.expires<new Date&&(t=null,window.localStorage.removeItem(e.key))}}else t=baidu.storage.userData.getItem(e),t&&(t={value:t});return t?t.value:null},baidu.storage.remove=function(e){baidu.storage._isSupportLocalStorage()?(window.localStorage.removeItem(e.key),window.localStorage.removeItem(e.key+".expires")):baidu.storage.userData.removeItem(e)},baidu.storage.clearAll=function(){baidu.storage._isSupportLocalStorage()?window.localStorage.clear():baidu.storage.userData.clearAll()},a.exports=baidu.storage});