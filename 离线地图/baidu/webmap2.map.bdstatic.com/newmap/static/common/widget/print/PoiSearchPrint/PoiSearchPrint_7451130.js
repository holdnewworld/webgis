define("common:widget/print/PoiSearchPrint/PoiSearchPrint.js",function(e,t,n){function a(){map.clearOverlays=function(){},this.txtPanel=i.JS("txtPanel"),this.tableBox=this.txtPanel.getElementsByTagName("table")[0],this.html=[],this.oFragment=document.createDocumentFragment(),this.ulE=document.getElementById("ulE"),this.searchValue=i.JS("searchValue"),this.PoiSearchV=i.JS("PoiSearch").value,this.ulEAllA=this.ulE.getElementsByTagName("a"),T.lang.Class.call(this)}var l=(e("common:widget/ui/mapUtil/mapUtil.js"),e("common:widget/ui/config/config.js")),i=(l.mapConfig,e("common:widget/ui/constant/Constant.js"),e("common:widget/print/printUtil/printUtil.js"));T.extend(a.prototype,{initialize:function(){try{var e=this;if(tableBox=this.txtPanel.getElementsByTagName("table")[0],tableBox?this.newDom():setTimeout(function(){map.zoomOut()},500),i.JS("aChangeRange")){map.disableDragging(),map.disableScrollWheelZoom(),map.disableDoubleClickZoom(),map.removeControl(window.stdMapCtrl);var t=i.JS("aChangeRange").parentNode.innerHTML;if(this.searchValue.innerHTML="<li>"+t+"</li>",i.JS("aChangeRange").parentNode.removeChild(i.JS("aChangeRange")),document.getElementsByTagName("svg").length){var n=document.getElementsByTagName("svg");n[0].style.display="none"}if(document.getElementsByTagName("shape").length){var a=document.getElementsByTagName("shape");a[0].style.display="none"}for(var l=document.getElementsByTagName("label"),o=0,s=l.length;s>o;o++)(l[o].className="BMapLabel")&&(l[o].style.display="none");for(var m=0,r=e.ulEAllA.length;r>m;m++)e.ulEAllA[m].onclick=null;for(var c=i.JS.getElementByClassName("icon","ulE"),h=0,g=c.length;g>h;h++)c[h].onclick=null}else this.searchValue.innerHTML="<li><strong>"+this.PoiSearchV+"</strong></li>";if(window.GRControll&&window.GRControll.isGRequest){map.disableDragging(),map.disableScrollWheelZoom(),map.disableDoubleClickZoom(),map.removeControl(window.stdMapCtrl);for(var m=0,r=e.ulEAllA.length;r>m;m++)e.ulEAllA[m].onclick=null;for(var c=i.JS.getElementByClassName("icon","ulE"),h=0,g=c.length;g>h;h++)c[h].onclick=null}i.JS("txtPanel").parentNode.removeChild(i.JS("txtPanel")),i.JS("busList").style.display="none",map.removeContextMenu(window.contextMenu),map.disableScrollWheelZoom(),this.appendImg()}catch(p){"undefined"!=typeof alog&&alog("http://webmap2.map.bdstatic.com/newmap/static/common/widget/print/PoiSearchPrint/exception.fire","catch",{msg:p.message||p.description,path:"common:widget/print/PoiSearchPrint/PoiSearchPrint.js",ln:82})}},newDom:function(){for(var e,t=0,n=this.tableBox.rows;e=n[t];t++)if("none"!=e.style.display){for(var a,l=[],o=0,s=e.cells;a=s[o];o++)a.innerHTML&&(a.innerHTML=a.innerHTML.replace(/focus/,"")),l.push(a.innerHTML);this.html.push(l)}for(var m=0,r=this.html.length;r>m;m++){var c=document.createElement("li");if(0!=this.html[m].join("").length){if(/查看全部/.test(this.html[m].join("")))continue;c.innerHTML=this.html[m].join(""),this.oFragment.appendChild(c)}}this.ulE.appendChild(this.oFragment);for(var h=i.JS.getElementByClassName("icon",this.ulE),g=0,p=h.length;p>g;g++)/bl_icon|sl_icon|icon-label/.test(h[g].className)||(h[g].innerHTML='<img src="../../../../../../../webmap0.map.bdstatic.com/newmap/static/common/images/markers_new_ie6_843ae9b.png"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/images/markers_new_ie6_843ae9b.png*/ width="236" height="93"  />')},appendImg:function(){var e=i.findAlphaImageLoader("div",i.JS("MapHolder"),"markers.png"/*tpa=http://webmap2.map.bdstatic.com/newmap/static/common/widget/print/PoiSearchPrint/markers.png*/),t=document.createElement("img");if(t.className="ie6_print",t.src="../../../images/ie6_markers_a3e074d.png"/*tpa=http://webmap2.map.bdstatic.com/newmap/static/common/images/ie6_markers_a3e074d.png*/,e.length)for(var n=0,a=e.length;a>n;n++){var l=e[n],o=t.cloneNode(!0);l.className="noprint",o.style.top=l.style.top,o.style.left=l.style.left,l.parentNode.appendChild(o)}}}),n.exports=a});