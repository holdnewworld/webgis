define("common:widget/pano/component/TableView/TableView.js",function(e,t,i){var l=e("common:widget/ui/Animation/Animation.js"),a=e("common:widget/pano/base/util.js");e.loadCss({content:".tableview-container{float:left;position:relative}.tableview-wapper{position:absolute;left:10px;overflow:hidden}.tableview-ul{list-style:none;padding:0;margin:0;position:relative}.tableview-li{cursor:pointer;position:relative}.tableview-li-hover{}.tableview-selected-border{background:0 0;position:absolute;width:100%;height:100%;top:0;left:0;filter:alpha(opacity=100)}.tableview-li-selected .tableview-selected-border{display:block}.tableview-horizontal-ul .tableview-li{float:left}.tableview-bg{background-repeat:no-repeat;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pano_whole/pano-icons_249d710.png);_background-image:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/pano_whole/pano-icons-8_0ec7deb.png)}.tableview-la,.tableview-ra{position:absolute;width:22px;height:108px;text-align:center}.tableview-la{left:0}.tableview-ra{right:0}.tableview-la .tableview-bg,.tableview-ra .tableview-bg{width:18px;height:18px;margin:45px auto 0;display:block}.tableview-la .tableview-bg{background-position:0 -36px}.tableview-ra .tableview-bg{background-position:-54px -36px}.tableview-la:hover{_zoom:1}.tableview-la:hover .tableview-bg{background-position:-18px -36px}.tableview-ra:hover{_zoom:1}.tableview-ra:hover .tableview-bg{background-position:-72px -36px}.tableview-container .tableview-la-disabled .tableview-bg{background-position:-36px -36px}.tableview-container .tableview-la-disabled:hover{_zoom:1}.tableview-container .tableview-la-disabled:hover .tableview-bg{background-position:-36px -36px}.tableview-container .tableview-ra-disabled .tableview-bg{background-position:-90px -36px}.tableview-container .tableview-ra-disabled:hover{_zoom:1}.tableview-container .tableview-ra-disabled:hover .tableview-bg{background-position:-90px -36px}"});var s,o=function(){},n=function(e,t,i,a,n){var r=i-t;0!=r&&(s=new l.Animation,s.build({fps:60,transition:l.Transitions.linear,duration:n||300,render:function(i){try{e.style.left=t+r*i+"px"}catch(l){"undefined"!=typeof alog&&alog("http://webmap2.map.bdstatic.com/newmap/static/common/widget/pano/component/TableView/exception.fire","catch",{msg:l.message||l.description,path:"common:widget/pano/component/TableView/TableView.js",ln:23})}},finish:a||o}))},r=function(e,t,i,l,a){if(t>=0)return baidu.dom.addClass(l,"tableview-la-disabled"),void baidu.dom.addClass(a,"tableview-ra-disabled");this.scrollLeft;i>e?baidu.dom.removeClass(l,"tableview-la-disabled"):baidu.dom.addClass(l,"tableview-la-disabled"),e>t?baidu.dom.removeClass(a,"tableview-ra-disabled"):baidu.dom.addClass(a,"tableview-ra-disabled")},h={viewWidth:200,viewHeight:300,margin:2,isHorizontal:!1,isFullSize:!1},d=function(e,t){this.options=a.merge(h,t),this.velocity=300,this.itemLength=0,this.contentSize={width:0,height:0},this.scrollAttr=this.options.isHorizontal?"left":"top",this.scrollValue=0,this.minScrollValue=0,this.maxScrollValue=0,this.viewWidth=this.options.viewWidth-60,this.viewHeight=this.options.viewHeight,this.scrollDistance=0,this.maxAnimationDistance=0,this.selectedIndex=void 0;var i=this.tableContainer=document.createElement("div");i.className="tableview-container",i.style.width=this.options.viewWidth+"px",i.style.height=this.options.viewHeight+"px";var l=this.viewHeight/2-9,s=this.leftArrow=document.createElement("a");s.href="javascript:void(0)",s.className="tableview-la",s.innerHTML='<span style="margin-top:'+l+'px;" class="tableview-bg"></span>',s.style.height=this.viewHeight+"px";var o=this.rightArrow=document.createElement("a");o.href="javascript:void(0)",o.className="tableview-ra",o.innerHTML='<span style="margin-top:'+l+'px;" class="tableview-bg"></span>',o.style.height=this.viewHeight+"px";var n=this.tableWapper=document.createElement("div");n.className="tableview-wapper",n.style.width=this.viewWidth+"px",n.style.height=this.viewHeight+"px";var r=this.ul=document.createElement("ul");r.className="tableview-ul"+(this.options.isHorizontal?" tableview-horizontal-ul":"");var d=this.selectBorder=document.createElement("div");d.className="tableview-selected-border",n.appendChild(r),i.appendChild(s),i.appendChild(n),i.appendChild(o),e.appendChild(i);var c=this,v=baidu(i);v.delegate("li","click",function(e){if(!c.ignoreUserEvent){var t=this.getAttribute("index");void 0!==t&&c.dispatchEvent("click",{index:1*t,elem:this,event:e})}}),v.delegate("li","mouseenter",function(e){if(!c.ignoreUserEvent){var t=this.getAttribute("index");T.dom.addClass(this,"tableview-li-hover"),void 0!==t&&c.dispatchEvent("mouseenter",{index:1*t,elem:this,event:e})}}),v.delegate("li","mouseleave",function(e){if(!c.ignoreUserEvent){var t=this.getAttribute("index");T.dom.removeClass(this,"tableview-li-hover"),void 0!==t&&c.dispatchEvent("mouseleave",{index:1*t,elem:this,event:e})}}),baidu(s).on("click",function(){if(!c.ignoreUserEvent){c.stopScroll();var e=1e3*Math.abs(c.maxScrollValue-c.minScrollValue)/(30*c.velocity);c.scrollTo(c.scrollValue+c.viewWidth,!1,!0,e,function(){c.scroll(-1)})}}),baidu(o).on("click",function(){if(!c.ignoreUserEvent){c.stopScroll();var e=1e3*Math.abs(c.maxScrollValue-c.minScrollValue)/(30*c.velocity);c.scrollTo(c.scrollValue+-c.viewWidth,!1,!0,e,function(){c.scroll(1)})}}),baidu(s).on("mouseenter",function(e){c.ignoreUserEvent||(c.scroll(-1),baidu.event.preventDefault(e))}),baidu(s).on("mouseleave",function(){c.stopScroll()}),baidu(o).on("mouseenter",function(e){c.ignoreUserEvent||(c.scroll(1),baidu.event.preventDefault(e))}),baidu(o).on("mouseleave",function(){c.stopScroll()})};baidu.lang.inherits(d,baidu.lang.Class),T.object.extend(d.prototype,{addItemContent:function(e,t){var i=document.createElement("li");if(i.className="tableview-li","string"==typeof e?i.innerHTML=e:i.appendChild(e),i.setAttribute("index",this.itemLength),this.itemLength++,void 0!==t?this.ul.insertBefore(i,t):this.ul.appendChild(i),this.options.isHorizontal===!0){var l=this.options.margin;i.style.margin="0 "+l+"px";var s=a.getDomSize(i.firstChild);this.contentSize.width+=s.width+2*l}return i},insertItemBefore:function(e,t){return this.addItemContent(t,e)},addComponent:function(e){this.tableWapper.appendChild(e)},resize:function(){if(this.options.isFullSize===!0)return this.viewWidth=this.contentSize.width,this.ul.style.width=this.contentSize.width+"px",this.tableWapper.style.width=this.viewWidth+"px",this.tableWapper.style.left="18px",this.tableContainer.style.width=this.viewWidth+36+"px",this.leftArrow.style.display="none",void(this.rightArrow.style.display="none");if(this.options.isHorizontal===!0){this.ul.style.width=this.contentSize.width+"px",this.minScrollValue=this.viewWidth-this.contentSize.width;var e=this.itemWidth=this.contentSize.width/this.itemLength;this.scrollDistance=Math.floor(this.viewWidth/e)*e,this.maxAnimationDistance=this.scrollDistance+30,r(this.scrollValue,this.minScrollValue,this.maxScrollValue,this.leftArrow,this.rightArrow),this.scrollValue<this.minScrollValue?this.scrollTo(this.minScrollValue):this.scrollValue>this.maxScrollValue&&this.scrollTo(this.maxScrollValue)}},setViewSize:function(e){this.viewWidth=e-60,this.tableContainer.style.width=e+"px",this.tableWapper.style.width=this.viewWidth+"px",this.resize()},clear:function(){for(var e=this.ul;e.lastChild;)e.removeChild(e.lastChild);this.contentSize={width:0,height:0}},scrollTo:function(e,t,i,l,a){var s=this.ul,o=this.scrollValue;e=Math.min(this.maxScrollValue,Math.max(this.minScrollValue,e)),!i&&(t||Math.abs(o-e)>this.maxAnimationDistance)?s.style.left=e+"px":n(s,o,e,a,l),this.scrollValue=e},scrollBy:function(e,t){var i=this.scrollValue+e;this.scrollTo(i,t)},scroll:function(e){if(e>0){var t=1e3*Math.abs(this.scrollValue-this.minScrollValue)/this.velocity;this.scrollTo(this.minScrollValue,!1,!0,t)}else{var t=1e3*Math.abs(this.scrollValue)/this.velocity;this.scrollTo(this.maxScrollValue,!1,!0,t)}},stopScroll:function(){if(s){s.stop(),s=null;var e=baidu.g(this.ul),t=e.style.left||"0px";this.scrollValue=parseInt(t.replace("px","")),r(this.scrollValue,this.minScrollValue,this.maxScrollValue,this.leftArrow,this.rightArrow)}},setSelectIndex:function(e,t){var i=baidu(this.tableWapper).find("li");if(null===e&&this.selectBorder.parentNode)return T(i[this.selectedIndex]).removeClass("selected-item"),this.selectedIndex=null,void this.selectBorder.parentNode.removeChild(this.selectBorder);var l=i[e];l&&(T(i[this.selectedIndex]).removeClass("selected-item"),T(l).addClass("selected-item"),this.selectedIndex=e,l.appendChild(this.selectBorder),t||this.fitImage(e))},getSelectIndex:function(){return this.selectedIndex},getSelectItem:function(){var e=baidu(this.tableWapper).find("li"),t=e[this.selectedIndex];return t},fitImage:function(e,t){if(!(this.minScrollValue>=0)){var i=this,l=baidu(this.tableWapper).find("li"),a=l[e];if(a){var s=this.itemWidth*e,o=s+this.itemWidth,n=-this.scrollValue;if(!(s>=n&&o<=n+this.viewWidth))if(n>s){var r=1e3*Math.abs(s+i.scrollValue)/i.velocity;this.scrollTo(-s,t,!1,r)}else if(o>n+this.viewWidth){var h=s-(this.viewWidth-this.itemWidth),r=1e3*Math.abs(h+i.scrollValue)/i.velocity;this.scrollTo(-h,t,!1,r)}}}},destroy:function(){T(this.tableContainer).off().remove()}}),i.exports=d});