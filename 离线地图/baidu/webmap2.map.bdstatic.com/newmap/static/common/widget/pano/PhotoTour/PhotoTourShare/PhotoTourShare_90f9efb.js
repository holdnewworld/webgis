define("common:widget/pano/PhotoTour/PhotoTourShare/PhotoTourShare.js",function(require,exports,module){var ModuleClass=require("common:widget/pano/base/ModuleClass.js"),PanoShareUtil=require("common:widget/pano/PhotoTour/PhotoTourShare/PanoShareUtil.js"),PotoTourShare=ModuleClass.extend("PotoTourShare",{initialize:function(container,opts){try{this._opts=opts;var style='#photo-share-panel{position:absolute;right:38px;width:295px;height:95px;z-index:100010;padding:0 15px;color:#fff;font-size:12px;background-color:#000;opacity:.9;filter:alpha(opacity=90);_filter:alpha(opacity=90);border-radius:4px;font-size:12px}#photo-share-panel .head{height:20px;line-height:20px;margin-top:10px;margin-bottom:6px;width:100%}#photo-share-panel .close{float:right;width:18px;height:18px;background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pano_whole/pano-icons_249d710.png) no-repeat -108px -16px;_background:url(/static/images/pano_whole/photo-icons-8.png) no-repeat -108px -16px}#photo-share-panel .close:hover{background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pano_whole/pano-icons_249d710.png) no-repeat -126px -18px;cursor:pointer;_background:url(/static/images/pano_whole/photo-icons-8.png) no-repeat -126px -18px;cursor:pointer}#photo-share-panel .inputContainer{position:relative;float:left;vertical-align:middle}#photo-share-panel .inputContainer .input{width:240px;height:20px;text-indent:5px;background-color:#313335;border:1px #000 solid;vertical-align:middle;color:#fff}#photo-share-panel #photo-share-msg{position:absolute;right:0;top:0;width:60px;height:22px;line-height:22px;text-align:center;color:#3af;font-size:12px;border:1px solid #3af;display:none}#photo-share-panel .copyContainer{position:relative;float:left;vertical-align:middle;width:45px;height:23px;margin-left:2px}#photo-share-panel .copyContainer .copyBack{position:absolute;left:0;top:0;width:45px;height:22px;line-height:22px;margin-left:2px;background-color:#313335;border:1px #000 solid;color:#fff;text-align:center;text-decoration:none;z-index:1}#photo-share-panel .btn{position:absolute;left:0;top:0;z-index:2;width:45px;height:22px}#photo-share-panel .btn:hover{cursor:pointer}#photo-baiduShare{margin-top:2px}#pano_bdshare{width:140px;height:30px;overflow:hidden;float:left}span.bds_more,.bds_tools a{font-family:Arial,"Microsoft Yahei","微软雅黑",sans-serif;height:16px;float:left;display:block;padding-top:6px;padding-bottom:3px;padding-left:22px}#pano_bdshare .bds_more{float:left;padding-top:13px;padding-left:0}span.bds_btn_arr{float:left;height:10px;width:10px;margin-top:10px;padding-bottom:3px;margin-left:4px;cursor:pointer;background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pano_whole/pano-icons_249d710.png) 0 -54px no-repeat;_background:url(/static/images/pano_whole/photo-icons-8.png) 0 -54px no-repeat}.bds_tools a{background:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/bg_bdshare_d642b88.png) no-repeat;cursor:pointer}.bds_qzone{background-position:0 -85px!important}.bds_tsina{background-position:0 -125px!important}.bds_baidu{background-position:0 -165px!important}.bds_renren{background-position:0 -205px!important}.bds_tqq{background-position:0 -245px!important}.bds_kaixin001{background-position:0 -285px!important}.bds_hi{background-position:0 -365px!important}.bds_douban{background-position:0 -405px!important}.bds_tsohu{background-position:0 -445px!important}.bds_msn{background-position:0 -485px!important}.bds_fx{background-position:0 -525px!important}#bdshare_iwshare{margin-left:3px}#bdshare_iwshare.bds_tools{height:24px;_margin-top:-3px}#bdshare_iwshare.bds_tools a{padding-bottom:2px;+padding-bottom:4px}#bds_btn_arr_iwshare{_margin-top:-3px}';require.loadCss({content:style});var template=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div id="photo-share-panel"><div class="head"><a id="photo-share-close" href="javascript:void(0)" title="关闭" class="close"></a>您可将当前地图上的内容分享给好友</div><ul><li class="inputContainer"><input id="photo-shareLink" class="input" type="text"/><span id="photo-share-msg"></span></li><li class="copyContainer"><span class="copyBack">复制</span><a id="copeLinkBtn" class="btn" title="复制"></a></li></ul><div id="photo-baiduShare"></div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],html=template(),sharePanel=T(html)[0];sharePanel.style.top=opts.positionTop,container.appendChild(sharePanel);var copeBtn=T.g("copeLinkBtn"),flashBtn=baidu.swf.createHTML({id:"linkBtnFlh",url:"../../../../swf/fClipboard.swf"/*tpa=http://webmap2.map.bdstatic.com/newmap/static/common/swf/fClipboard.swf*/,width:"48",height:"26",wmode:"transparent",ver:"9.0.0"});copeBtn.innerHTML=flashBtn,this.bindCloseEvent(),this.bindCopyEvent(),this.addBaiduShare(),this.getShortLink(),this.bindGlobalClickEvent()}catch(e){"undefined"!=typeof alog&&alog("http://webmap2.map.bdstatic.com/newmap/static/common/widget/pano/PhotoTour/PhotoTourShare/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/pano/PhotoTour/PhotoTourShare/PhotoTourShare.js",ln:49})}},getSupportEvents:function(){return["dispose"]},showMessage:function(o){var t=baidu.g("photo-share-msg");t.style.display="block",t.innerHTML=o,setTimeout(function(){t.style.display="none"},1300)},bindCopyEvent:function(){function o(){var o=baidu.swf.getMovie("linkBtnFlh");o&&o.flashInit&&o.flashInit()&&(clearInterval(a),o.setHandCursor(!0),o.setContentFuncName("pano_share_copy_getPasteData"))}var t=this,a=(T.G("photo-shareLink"),setInterval(o,500));window.pano_share_copy_getPasteData=function(){var o=T.G("photo-shareLink");return o?(t.showMessage("复制成功"),o.value):void 0}},bindCloseEvent:function(){var o=this;baidu.event.on("photo-share-close","click",function(){o.dispose()})},bindGlobalClickEvent:function(){var o=this,t=T.g("photo-share-panel");window.pano_share_global_click_handler=function(a){for(var e=a.srcElement||a.target;e;){if(e==t)return;if(e==document.body)return o.dispose(),void T.un(document.body,"mousedown",window.pano_share_global_click_handler);e=e.parentNode}},T.on(document.body,"mousedown",window.pano_share_global_click_handler)},getShortLink:function(){PanoShareUtil.getLink(this._opts.shareParam,function(o){baidu.g("photo-shareLink").value=o})},addBaiduShare:function(){var o=this,t=baidu.g("photo-baiduShare"),a=T.G("photo-shareLink");PanoShareUtil.creatShare(t,function(){return{roadName:o._opts.address,link:a.value}})},dispose:function(){T.g("photo-share-panel")&&baidu.dom.remove("photo-share-panel")}});module.exports=PotoTourShare});