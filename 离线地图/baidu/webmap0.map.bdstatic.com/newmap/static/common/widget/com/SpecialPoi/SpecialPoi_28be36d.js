define("common:widget/com/SpecialPoi/SpecialPoi.js",function(require,exports,module){function SpecialPoi(e){MapComponent.call(this,e)}var MapComponent=require("common:widget/com/MapComponent.js"),searchBox=require("common:widget/ui/searchBox/searchBox.js"),indexUtil=require("common:widget/ui/indexUtil/IndexUtil.js"),AID=require("common:widget/ui/areaCfg/areaCfg.js");T.lang.inherits(SpecialPoi,MapComponent,"SpecialPoi"),T.object.extend(SpecialPoi.prototype,{loadRes:function(){var template=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<strong id="title_',"undefined"==typeof guid?"":guid,'" style="font-size:14px;padding:10px;display:block"></strong><div id="spe_event" class="spe-event">    <div id="spe_baike" class="spe-baike"></div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],style=".spe-event{margin:0 10px}";return require.loadCss({content:style,name:"SpecialPoi"}),template},render:function(){try{var e=this.loadRes(),t={};return t.guid=this.guid,e(t)}catch(i){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/com/SpecialPoi/exception.fire","catch",{msg:i.message||i.description,path:"common:widget/com/SpecialPoi/SpecialPoi.js",ln:34})}},initialize:function(){try{var e=this.json;1===e.result.pattern_sign&&(map.setMapType(BMAP_SATELLITE_MAP),maptypeCtrl&&maptypeCtrl.streetMapMgr(!0));var t=(T.G("title_"+this.guid).innerHTML=e.result.wd,e.content);if(2!=t.length)return;var i=t[0].split(","),a=new BMap.Point(parseFloat(i[0]),parseFloat(i[1])),n=parseInt(t[1]);map.centerAndZoom(a,n),indexUtil.setCurCity("全国",AID["全国"],0),searchBox.setValue("PoiSearch",e.result.wd),"钓鱼岛"==e.result.wd&&(this.specialEvent(a),T.G("title_"+this.guid).style.display="none")}catch(o){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/com/SpecialPoi/exception.fire","catch",{msg:o.message||o.description,path:"common:widget/com/SpecialPoi/SpecialPoi.js",ln:63})}},specialEvent:function(){var e="%B5%F6%D3%E3%B5%BA",t=T.g("spe_baike");baidu.ajax("/?qt=baike&name="+e,{dataType:"json",success:function(e){if(e&&e.content&&e.content.key){var i=e.content,a=i["abstract"].replace(/<[^>].*?(>|$)/g,"")+"...",n=['<div style="height:28px;line-height:28px;font-size:14px;font-weight:bold;border-bottom:1px solid #cfcfcf;margin:5px 0">'];n.push('<strong style="font-size:14px">'+i.key+"</strong></div>"),n.push('<font style="color:#666">'+a+"</font><div>"),n.push('<div style="text-align:right;">来自 <a href="'+i.url+'" target="_blank">百度百科</a><div>'),t.innerHTML=n.join("")}},error:function(){}})}}),module.exports=SpecialPoi});