define("common:widget/pano/PhotoTour/PhotoTourModule/PhotoTourModule.js",function(o,t,e){var i=o("common:widget/pano/base/ModuleClass.js"),a=(o("common:widget/pano/base/util.js"),o("common:widget/pano/PhotoTour/PhotoTourModule/PhotoViewer.js"));o.loadCss({content:".photo-vertical:hover{cursor:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/pano_whole/vertical-hover_a509ed5.cur) 16 16,ew-resize}.photo-horizontal:hover{cursor:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/pano_whole/horizontal-hover_bf90a86.cur) 16 16,ew-resize}.photo-vertical:active{cursor:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/pano_whole/vertical-active_4112acd.cur) 16 16,ew-resize}.photo-horizontal:active{cursor:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/pano_whole/horizontal-active_827b698.cur) 16 16,ew-resize}.photo-return-btn{position:absolute;top:13px;left:13px}.photo-btn{width:auto;text-decoration:none;background-color:#000;cursor:pointer;overflow:hidden;height:34px;display:inline-block;border-radius:4px;opacity:.8;width:70px}.photo-btn-icon{width:18px;height:18px;background-position:0 -18px;margin:8px;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pano_whole/pano-icons_249d710.png);background-repeat:no-repeat;display:inline-block}.photo-btn-text{line-height:34px;height:34px;color:gray;vertical-align:top;font-style:normal;display:inline-block;margin-right:12px}.photo-poiinfo{position:absolute}.photo-poiinfo-circle{cursor:pointer;height:100%;border-radius:100%;box-shadow:0 0 0 1px rgba(0,0,0,.5),0 0 0 4px rgba(255,255,255,.35),0 0 0 5px rgba(0,0,0,.5)}.photo-poiinfo-circle:hover{box-shadow:0 0 0 1px rgba(0,0,0,.5),0 0 0 4px rgba(255,255,255,1),0 0 0 5px rgba(0,0,0,.5)}.photo-poiinfo-text{text-align:center;color:#fff;font-weight:bolder;display:block;font-size:3em}#panoGuideAlbum .panoAlbum-item:hover{border:1px #3af solid}#panoGuideAlbum .panoAlbum-item .selected-item{position:absolute;top:0;left:0;border:3px solid #3af;z-index:5}body{padding:0;margin:0}#webgl{width:90%;height:80%;position:relative;border:1px solid red}.control{display:table;border-spacing:15px;float:right;width:300px;height:150px;position:absolute;background-color:rgba(0,0,0,.4);color:#fff;border:1px solid #fff;border-radius:4px;top:15px;left:15px;z-index:1}.control>div{margin:8px 0;display:table-row}.control>div>input,.control>div>label{display:table-cell}.PSAnnotations{position:absolute}.PSAnnotationViewer{position:absolute;top:0;left:0;z-index:6}.PSAnnotationViewer *{font:16px wf_segoe-ui_light,'Segoe UI Light','Segoe WP Light','Segoe UI','Segoe WP',Tahoma,Arial,sans-serif}.PSAnnotation{position:absolute;width:26px;height:26px;z-index:2;border-radius:50%;box-shadow:0 0 0 1px rgba(0,0,0,.5),0 0 0 4px rgba(255,255,255,.35),0 0 0 5px rgba(0,0,0,.5);cursor:pointer;opacity:0}.PSAnnotation:hover,.PSAnnotationHovered{box-shadow:0 0 0 1px rgba(0,0,0,.5),0 0 0 4px rgba(255,255,255,1),0 0 0 5px rgba(0,0,0,.5)}.photo-poiinfo-circle{display:none;position:absolute;z-index:100;cursor:pointer;height:100%;border-radius:100%;box-shadow:0 0 0 1px rgba(0,0,0,.5),0 0 0 4px rgba(255,255,255,.35),0 0 0 5px rgba(0,0,0,.5)}.photo-poiinfo-circle:hover{box-shadow:0 0 0 1px rgba(0,0,0,.5),0 0 0 4px rgba(255,255,255,1),0 0 0 5px rgba(0,0,0,.5)}.photo-poiinfo-text{text-align:center;display:block;color:#fff;font-weight:700}.photo-poiinfo-detail{display:none;position:absolute;z-index:101;top:0;left:0;width:210px;padding:10px;border-radius:6px;color:#fff;background:rgba(0,0,0,.6)}"});var n=i.extend("PhotoTourModule",{initialize:function(o,t){try{if(!a.isSupported())return;this.container=o,this.viewer=this._create(t)}catch(e){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/PhotoTour/PhotoTourModule/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/pano/PhotoTour/PhotoTourModule/PhotoTourModule.js",ln:21})}},_create:function(o){var t="/panofeedback/panoPhotoTour/",e={id:o,domain:t,data_dir:"{id}/",json_file:"http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/PhotoTour/PhotoTourModule/0.json",path_file:"http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/PhotoTour/PhotoTourModule/path.bcpt",high_image_dir:"texture_2048/img{index}.jpg"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/PhotoTour/PhotoTourModule/texture_2048/img{index}.jpg*/,normal_image_dir:"texture/img{index}.jpg"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/PhotoTour/PhotoTourModule/texture/img{index}.jpg*/,low_image_dir:"atlas/atlas_{index}.jpg"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/PhotoTour/PhotoTourModule/atlas/atlas_{index}.jpg*/,geometry_dir:"http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/PhotoTour/PhotoTourModule/mesh/mesh_{index}.bmpt"},i=this;if(this.tourid=o,"#no"==window.location.hash)return setTimeout(function(){i.dispatchEvent("photoview_complete")},300),{};var n=new a(this.container,e);return n.load(o,function(){i.container.className=n.isCircle()?"photo-horizontal":"photo-vertical",n.enableDrag(!0)}),n.on("ready",function(){i.dispatchEvent("photoview_complete")}),n.on("id_changed",function(){i.dispatchEvent("id_changed",{data:{id:o}})}),n},setTourid:function(o){this.viewer&&this.viewer.dispose(),this.viewer=this._create(o)},getSupportEvents:function(){return["photo_tour_exit"]},dispose:function(){this.viewer.dispose(),this.viewer=null,this.container=null}});e.exports=n});