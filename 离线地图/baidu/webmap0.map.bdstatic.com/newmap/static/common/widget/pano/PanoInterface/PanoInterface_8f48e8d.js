define("common:widget/pano/PanoInterface/PanoInterface.js",function(n,o,t){var e,r,a=n("common:widget/pano/Transition/Transition.js"),i=!1,u=function(){var n=!1,o=0,t=null;if(window.ActiveXObject){if(t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){n=!0;var e=t.GetVariable("$version");o=e.match(/[\d\.]+/)}}else navigator.plugins&&navigator.plugins.length>0&&(t=navigator.plugins["Shockwave Flash"],t&&(n=!0,o=t.description.match(/[\d\.]+/)));return o=1*o[0],u=n?function(){return o}:function(){return!1},n?o:!1},c=function(){var n,o=document.createElement("canvas"),t=!0;try{n=o.getContext("experimental-webgl")||o.getContext("webgl")}catch(e){}return n||(t=!1),o=null,n=null,t};c()?addStat(STAT_CODE.STAT_PANORAMA,{item:"pano_render_webgl"}):addStat(STAT_CODE.STAT_PANORAMA,{item:"pano_render_flash"}),t.exports={showPano:function(){var o=u();if(!o||10>=o)return void alert("您的电脑尚未安装 Flash 或版本过低，请升级！");var t={},c=arguments,s=c[0];i!==!0&&(i=!0,a.checkSupport(s.from),function(){var o=new T.Deferred;return e?o.resolve():n.async(["common:widget/pano/base/service.js","common:widget/pano/Root.js"],function(n,t){e=t,r=n,o.resolve()}),o}().then(function(){return s.research===!0?r.getPanoInfoByUid(s.searchParam.uid):s.panoIId?r.getIndoorData(s.panoIId):s.panoId?r.getSdataByPid(s.panoId):t}).then(function(n){return n!==t&&n?n.content?(n=n.content[0].poiinfo,{x:n.X,y:n.Y,dir:n.Dir}):n.x&&n.y?{x:n.x/100,y:n.y/100,dir:n.heading}:n.iid?{x:n.ipoint.x/100,y:n.ipoint.y/100,dir:0}:t:t}).then(function(n){var o=n.x,r=n.y,u=n.dir;if(i=!1,n===t||!o||!r)return void e.showPano.apply(e,c);var s=new BMap.Point(o,r),p=u||0;a.enter(null,null,s,p,function(){e.showPano.apply(e,c)})}))},showPhotoTour:function(o,t){window.isPhotoTourSupported&&n.async("common:widget/pano/PhotoTour/PhotoTourMain.js",function(n){new n(o,t)})},closePano:function(){e&&e.closePano.apply(e,arguments)}},window.isPhotoTourSupported=function(n){var o=[];window.Worker||o.push("not support WebWorker"),window.Float32Array||o.push("not support FLoat32Array"),!window.URL&&window.webkitURL&&o.push("not support URL"),window.Blob||o.push("not support Blob"),window.Promise||o.push("not support Promise");try{var t=c();if(!t)throw"Error creating WebGL context."}catch(e){o.push("not support webgl")}return n&&console.log(o),o.length>0?!1:!0}()});