define("common:widget/ui/mapUtil/mapUtil.js",function(e,t,o){function a(e){for(var t=n(e.charAt(0)),o=e.substr(1),a=0,s=o.length,p=[],d=[],_=[];s>a;)if(o.charAt(a)==f[0]){if(13>s-a)return 0;if(_=i(o.substr(a,13),p),0>_)return 0;a+=13}else if(";"==o.charAt(a))d.push(p.slice(0)),p.length=0,++a;else{if(8>s-a)return 0;if(_=r(o.substr(a,8),p),0>_)return 0;a+=8}for(var l=0,c=d.length;c>l;l++)for(var u=0,E=d[l].length;E>u;u++)d[l][u]/=100;return{geoType:t,geo:d}}function n(e){var t=-1;return e==f[1]?t=d.GEO_TYPE_POINT:e==f[2]?t=d.GEO_TYPE_LINE:e==f[3]&&(t=d.GEO_TYPE_AREA),t}function i(e,t){for(var o=0,a=0,n=0,i=0;6>i;i++){if(n=s(e.substr(1+i,1)),0>n)return-1-i;if(o+=n<<6*i,n=s(e.substr(7+i,1)),0>n)return-7-i;a+=n<<6*i}return t.push(o),t.push(a),0}function r(e,t){var o=t.length;if(2>o)return-1;for(var a=0,n=0,i=0,r=0;4>r;r++){if(i=s(e.substr(r,1)),0>i)return-1-r;if(a+=i<<6*r,i=s(e.substr(4+r,1)),0>i)return-5-r;n+=i<<6*r}return a>l&&(a=l-a),n>l&&(n=l-n),t.push(t[o-2]+a),t.push(t[o-1]+n),0}function s(e){var t=e.charCodeAt(0);return e>="A"&&"Z">=e?t-"A".charCodeAt(0):e>="a"&&"z">=e?26+t-"a".charCodeAt(0):e>="0"&&"9">=e?52+t-"0".charCodeAt(0):"+"==e?62:"/"==e?63:-1}{var p=e("common:widget/ui/util/util.js"),d=e("common:widget/ui/constant/Constant.js"),_=e("common:widget/ui/config/config.js");_.mapConfig}BMap.Overlay.getZIndex=function(e,t,o){return(e=1*e)?(t&&t==BMAP_COORD_MERCATOR&&(e=BMap.Project.convertMC2LL(new BMap.Point(0,e)).lat),(-1e5*e<<5)+(o||0)):0};var f=["=",".","-","*"],l=1<<23,c={decode_geo_diff:a};o.exports={addArrow:function(e,t){for(var o=0;o<e.length;o++){var a=e[o].split(",");e[o]=new BMap.Point(a[0],a[1])}for(var n=-1e3,i=[],r=t.getBounds(),o=1;o<e.length-1;o++)if(!(e[o].lng<r.minX||e[o].lng>r.maxX||e[o].lat<r.minY||e[o].lat>r.maxY)){var s=t.pointToPixel(e[o]),p=t.pointToPixel(e[o+1]),d=(s.x-p.x)*(s.x-p.x)+(s.y-p.y)*(s.y-p.y);if(!(400>d)){var _=Math.atan2(e[o].lat-e[o+1].lat,e[o+1].lng-e[o].lng),f=Math.floor(8*_/Math.PI+16.5)%16*-16;if(f!=n){var l=new BMap.Icon("../../../images/dest_markers_14848ce.png"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/images/dest_markers_14848ce.png*/,new BMap.Size(16,16),{imageOffset:new BMap.Size(f,-120),infoWindowOffset:new BMap.Size(9,0)}),c=new BMap.Marker(e[o],{icon:l});t.addOverlay(c),i.push(c),n=f}}}return i},addSearchPoi:function(e,t,o,a){var n=p.getPoiPoint(e),i=o.substring(0,6);if(a=a||{},a.type=a.type||"normal",a.garnd=a.grand||!1,a.isgrandtype=a.isgrandtype,!(!n||"undefined"==typeof t||0>t||t>9&&"child"!==a.type||t>39&&"child"===a.type)){var r,s=d.A_J_MARKER_IMG;"RouteAddrMarker"==a.type&&(s=d.A_J_MARKER_IMG);var _;if("child"==a.type){s=d.CHILD_MARKER_IMG;var f=new BMap.Icon(s,d.CHILD_MARKER_ORANGE_SIZE,{imageOffset:new BMap.Size(-d.CHILD_MARKER_WID*t,-d.CHILD_MARKER_ORANGE_Y),offset:d.CHILD_MARKER_OFFSET,infoWindowOffset:d.CHILD_MARKER_INFOWND_OFFSET});r=t+1}else if("pchild"==a.type){var l=i.replace(/[\u0100-\uffff]/g,"##").length/2,_=Math.ceil(l);s=d.PCHILD_MARKER_IMG;var f=new BMap.Icon(s,new BMap.Size(d["PCHILD_MARKER_WIDTH_"+_],28),{imageOffset:new BMap.Size(0,-d.PCHILD_MARKER_HEIGHT*(6-_)),offset:new BMap.Size(d["PCHILD_MARKER_WIDTH_"+_]/2,d.PCHILD_MARKER_HEIGHT),infoWindowOffset:new BMap.Size(d["PCHILD_MARKER_WIDTH_"+_]/2,1)});r=t+1}else{var c=0;("RouteAddrMarker"==a.type||"groupon"==a.type)&&(c=-d.A_J_MARKER_ORANGE_ICON_Y);var u=new BMap.Size(-d.A_J_MARKER_RED_ICON_WID*t,c),f=new BMap.Icon(s,d.A_J_MARKER_RED_SIZE,{offset:d.A_J_MARKER_RED_OFFSET,imageOffset:u,infoWindowOffset:d.A_J_MARKER_INFOWND_OFFSET});r=t+1}var E=100;"child"===a.type&&(E=1e3);var m=new BMap.Marker(n,{icon:f,zIndexFixed:!0,baseZIndex:25e5-E*t});if("busline"===a.markerType?m.addEventListener("click",function(){addStat("basemap.basemap.buslinemarker")}):"subline"===a.markerType&&m.addEventListener("click",function(){addStat("basemap.basemap.sublinemarker")}),m.customProperty={type:a.type},a.uid&&"undefined"!=typeof a.ext_type&&1&a.ext_type){var g="<span class='inr-tip' id='inr_tip_"+t+"' data-uid=\""+a.uid+'" data-wd="'+o+'" >室内地图</span>',R=this.createNormalTip(g,{point:n,offset:new BMap.Size(11,20)});R.setStyle({background:"url(http://webmap2.map.bdstatic.com/newmap/static/common/images/inr_bg_3fefafb.gif) 0 -29px no-repeat",height:"20px",border:"0"}),R.setTitle("查看室内地图"),R._indoor=!0,m.setLabel(R)}map.addOverlay(m),"pchild"http://webmap0.map.bdstatic.com/newmap/static/common/widget/ui/mapUtil/==a.type?(m.isgrand=1,m.textlen=_,p.beforeEndHTML(m.siblingElement,'<div style="width:'+d["PCHILD_MARKER_WIDTH_"+_]+'px;z-index:10;font-weight:bold;position: absolute;color:#f21101;text-align:center;margin-top:3px;">'+i+"</div>")):(m.isgrand=0,m.textlen=2),m._stCode=r,o&&m.setTitle(o),m.isgchild=a.garnd,m.isgrandtype=a.isgrandtype||0;var M=this;return baidu("#tipBtn_"+t).on("mouseover",function(){var e=baidu(this).data("index");M.showInrTip(e)}),m}},addSearchInViewTitle:function(e,t,o){var a=this.createSearchInViewTitle(e,t);return a._stCode=d.OVERLAY_STYLE.VIW_LBL,o&&"Marker"==o.toString()?(o.setLabel(a),a):(map.addOverlay(a),a)},addDetailPoi:function(e,t){var o=p.getPoiPoint(e);if(o){var a=new BMap.Icon(d.A_J_MARKER_IMG,d.A_J_MARKER_RED_SIZE,{offset:d.A_J_MARKER_OFFSET,imageOffset:new BMap.Size(0,-116),infoWindowOffset:d.A_J_MARKER_INFOWND_OFFSET}),n=new BMap.Marker(o,{icon:a});return map.addOverlay(n),n._stCode=d.OVERLAY_STYLE.MKR,t&&n.setTitle(t),n}},addRoute:function(e,t,o,a){var n,i,r,s,p,_;if(1===t&&("yes"===map.showTerminal||"yes2"===map.showTerminal)){n=e.split(";");var f=new BMap.Icon("../../../images/start_2c8cf26.png"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/images/start_2c8cf26.png*/,new BMap.Size(30,33),{offset:new BMap.Size(14,32),imageOffset:new BMap.Size(0,0)}),l=new BMap.Icon("../../../../../../../webmap2.map.bdstatic.com/newmap/static/common/images/end_90f6ae1.png"/*tpa=http://webmap2.map.bdstatic.com/newmap/static/common/images/end_90f6ae1.png*/,new BMap.Size(30,33),{offset:new BMap.Size(14,32),imageOffset:new BMap.Size(0,0)});_=n.length-1,i=new BMap.Point(parseFloat(n[0].split(",")[0]),parseFloat(n[0].split(",")[1])),r=new BMap.Point(parseFloat(n[_].split(",")[0]),parseFloat(n[_].split(",")[1])),p=new BMap.Marker(i,{isTop:!0,icon:f}),s=new BMap.Marker(r,{isTop:!0,icon:l}),map.addOverlay(p),map.addOverlay(s),map.showTerminal="no"}var c=[{stroke:6,color:"#3a6bdb",opacity:.6,stCode:d.OVERLAY_STYLE.ROUTE},{stroke:6,color:"#3a6bdb",opacity:.6,stCode:d.OVERLAY_STYLE.BUS_ROUTE},{stroke:6,color:"#78bc5f",opacity:.6,stCode:d.OVERLAY_STYLE.WALK_ROUTE},{stroke:5,color:"#3a6bdb",opacity:.6,stCode:d.OVERLAY_STYLE.DRV_ROUTE},{stroke:6,color:"#3a6bdb",opacity:.6,stCode:d.OVERLAY_STYLE.BUS_ROUTE},{stroke:4,color:"#78bc5f",opacity:.6,stCode:d.OVERLAY_STYLE.WALK_ROUTE},{stroke:6,color:"#688DE1",opacity:.6,strokeStyle:"dashed",stCode:d.OVERLAY_STYLE.RAIL_DASHED_ROUTE},{stroke:6,color:"#575757",opacity:.6,strokeStyle:"dotted",stCode:d.OVERLAY_STYLE.WALK_ROUTE}];if("undefined"==typeof t&&(t=0),c[t]){var u=c[t],E={strokeWeight:u.stroke,strokeColor:u.color,strokeOpacity:u.opacity,strokeStyle:u.strokeStyle};if("string"==typeof e||"Point"==e[0].toString())var m=new BMap.Polyline(e,E);else if("[object Array]"==Object.prototype.toString.call(e))var m=new BMap.PolylineMultipart(e,E);var g=a||map;if(g.addOverlay(m),m._stCode=c[t].stCode,m._routeType=t,m._sMarker=p,m._eMarker=s,t==d.ROUTE_TYPE_BUS){var R=new BMap.Polyline(e,{strokeWeight:u.stroke-2,strokeColor:"#fff",strokeOpacity:.3});m._p=R,g.addOverlay(R)}return m}},createSearchInViewTitle:function(e,t){var o=p.getPoiPoint(e);if(o){var a=new BMap.Size(14,-21),n=t;t.replace(/[\u0100-\uffff]/g,"##").length>20&&(t=t.substring(0,10)+"...");var i=new BMap.Label(t,{point:o,offset:a});return i.setTitle(n),i.setStyle({lineHeight:"15px",padding:"1px 3px",borderColor:"#a7a7a7",color:"#666",cursor:"pointer"}),i}},createNormalTip:function(e,t){var o={display:!0,style:{background:"url(http://webmap0.map.bdstatic.com/newmap/static/common/images/tip_5ffa1fb.gif) 0 0 no-repeat",color:"#000",height:"30px",border:"0",padding:"0 0 0 4px"}};t&&"object"==typeof t&&(t=T.extend(o,t));var a=new BMap.Label(e,{point:t.point,offset:t.offset});return a},cutPoints:function(e,t){if(t?.25>t?t=0:t>.25&&1>t?t=1:t>32&&(t=32):t=0,e&&"string"==typeof e){var o=e;if(t>0){var a=new RegExp("(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);)(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);){"+t+"}","ig");o=e.replace(a,"$1")}return o}},selectRoute:function(e){if(e&&"Polyline"==e.toString()){var t=["#ff0103","#ff0103","#ff0103","#ff0103","","","#ff0103"];t[e._routeType]&&(e.setStrokeColor(t[e._routeType]),e._stCode=e._stCode==d.OVERLAY_STYLE.BUS_ROUTE?d.OVERLAY_STYLE.HO_LINE:e._stCode==d.OVERLAY_STYLE.WALK_ROUTE?d.OVERLAY_STYLE.HW_LINE:d.OVERLAY_STYLE.H_LINE)}},unSelectRoute:function(e){if(e&&"Polyline"==e.toString()){var t=["#3a6bdb","#3a6bdb","#30a208","#3a6bdb","","","#688DE1"],o=[d.OVERLAY_STYLE.ROUTE,d.OVERLAY_STYLE.BUS_ROUTE,d.OVERLAY_STYLE.WALK_ROUTE,d.OVERLAY_STYLE.DRV_ROUTE,,,d.OVERLAY_STYLE.RAIL_DASHED_ROUTE];t[e._routeType]&&(e.setStrokeColor(t[e._routeType]),e._stCode=o[e._routeType])}},removeRoute:function(e){e._p&&"Polyline"==e._p.toString()&&(e._p.remove(),e._p=null),e.remove(),e=null},addArea:function(e,t){if(e){var o=[{strokeColor:"#0064fc",strokeWeight:2,fillColor:!1,strokeOpacity:.8,strokeStyle:"dashed",stCode:d.OVERLAY_STYLE.AREA},{strokeColor:"#0064fc",strokeWeight:2,fillColor:!1,strokeOpacity:.8,strokeStyle:"dashed",stCode:d.OVERLAY_STYLE.AREA},{strokeColor:"#0064fc",strokeWeight:2,fillColor:!1,strokeOpacity:.8,strokeStyle:"dashed",stCode:d.OVERLAY_STYLE.AREA},{strokeColor:"#6791e5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",fillColor:"#4673cc",fillOpacity:.2,stCode:d.OVERLAY_STYLE.AREA}],a=t||0;if(o[a]){var n=new BMap.Polygon(e,o[a]);return map.addOverlay(n),!o[a].strokeColor&&n.setFillColor(!1),n._stCode=o[a].stCode,n}}},removeArea:function(e){"Polygon"==e.toString()&&(e.remove(),e=null)},addTransPoi:function(e,t,o,a){var n=p.getPoiPoint(e);if(n){var i=d.OVERLAY_STYLE.BUS_TRANS,r=-55;switch(t){case d.TRANS_TYPE_BUS:r=-55;break;case d.TRANS_TYPE_SUB:i=d.OVERLAY_STYLE.SUB_TRANS,r=-76;break;case d.TRANS_TYPE_RAIL:r=-118;break;case d.TRANS_TYPE_AIR:r=-139;break;case d.TRANS_TYPE_DRIVING:r=-97;break;case d.TRANS_TYPE_WALKING:r=-160}var s=new BMap.Icon("../../../../../../../webmap1.map.bdstatic.com/newmap/static/common/images/trans_icons_45ed3d3.png"/*tpa=http://webmap1.map.bdstatic.com/newmap/static/common/images/trans_icons_45ed3d3.png*/,new BMap.Size(21,21),{imageOffset:new BMap.Size(0,r),infoWindowOffset:new BMap.Size(10,0)}),_=new BMap.Marker(n,{icon:s}),f=a||map;return _._stCode=i,o&&_.setTitle(o),f.addOverlay(_),_}},addBusStopPoi:function(e,t){var o=p.getPoiPoint(e);if(o){var a=new BMap.Icon("../../../images/stop_icon_b14a324.png"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/images/stop_icon_b14a324.png*/,d.MARKER_11_11_SIZE,{offset:d.MARKER_11_11_OFFSET,infoWindowOffset:d.MARKER_11_11_INFOWND_OFFSET}),n=new BMap.Marker(o,{icon:a,baseZIndex:15e5});return map.addOverlay(n),n._stCode=d.OVERLAY_STYLE.BUS_STOP,t&&n.setTitle(t),n}},addDestPoi:function(e,t,o,a,n){n=n||map;var i=p.getPoiPoint(e);if(i){if(o==d.DEST_MIDDLE){var r=new BMap.Icon("../../../../../../../webmap2.map.bdstatic.com/newmap/static/common/images/drv_m_234b1a3.png"/*tpa=http://webmap2.map.bdstatic.com/newmap/static/common/images/drv_m_234b1a3.png*/,d.MARKER_11_11_SIZE,{offset:d.MARKER_11_11_OFFSET,infoWindowOffset:d.MARKER_11_11_INFOWND_OFFSET}),s=new BMap.Marker(i,{icon:r});return n.addOverlay(s),s.enableDragging(!0),s._stCode=d.OVERLAY_STYLE.DRV_M_MKR,s}if(o==d.DEST_SEC){var r=new BMap.Icon("../../../../../../../webmap2.map.bdstatic.com/newmap/static/common/images/drv_m_234b1a3.png"/*tpa=http://webmap2.map.bdstatic.com/newmap/static/common/images/drv_m_234b1a3.png*/,d.MARKER_11_11_SIZE,{offset:d.MARKER_11_11_OFFSET,imageOffset:new BMap.Size(0,-11),infoWindowOffset:d.MARKER_11_11_INFOWND_OFFSET}),s=new BMap.Marker(i,{icon:r});return n.addOverlay(s),s._stCode=d.OVERLAY_STYLE.DRV_E_MKR,s}if(!a){var r=new BMap.Icon("../../../images/dest_markers_14848ce.png"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/images/dest_markers_14848ce.png*/,d.DEST_MARKER_SIZE,{offset:d.DEST_MARKER_OFFSET,imageOffset:new BMap.Size(0,-34*o),infoWindowOffset:d.DEST_MARKER_INFOWND_OFFSET}),s=new BMap.Marker(i,{icon:r,baseZIndex:35e5});return t&&s.setTitle(t),s._stCode=d.OVERLAY_STYLE.DS_MKR+o,n.addOverlay(s),s}var _=t;_.length>10&&(_=_.substring(0,10)+"...");var f=new BMap.Label(t,{point:i});return f.setStyles({cursor:"pointer"}),f.setOffset(new BMap.Size(-12,-28)),f._stCode=d.OVERLAY_STYLE.DS_LBL+o,f.addEventListener("domready",function(){var e=f.getDom();e.style.border="none",e.style.background="transparent",e.style.overflow="visible",e.style.zIndex=25e5+2*map.pointToPixel(i).y,e.style.cursor="url("+map.config.defaultCursor+"), default",T.browser.ie||(T.on(e,"mousedown",function(){e.style.cursor="url("+map.config.draggingCursor+"), default"}),T.on(e,"mouseup",function(){e.style.cursor="url("+map.config.defaultCursor+"), default"})),f.zIndex=e.style.zIndex;var t="";t=6==T.browser.ie?'<div class="dest_icon_left_ie6 dest'+o+'"><div></div></div><div class="dest_icon_right_ie6"><div></div><span class="dest_text_ie6">'+_+"</span></div>":'<div class="dest_icon dest'+o+'"><div class="dest_icon_right"><span class="dest_text">'+_+"</span></div></div>",e.innerHTML=t}),n.addOverlay(f),f}},createDrvMidLabel:function(e,t){var o=new BMap.Label(e,{point:t,offset:new BMap.Size(15,-5)});return o.setStyles({border:"1px solid #999",color:"#666",padding:"2px",background:"#fff"}),o},addDrvDirIcon:function(e,t,o){o=o||map;var a=p.getPoiPoint(e);if(a){(0>t||t>12)&&(t=0);var n=-18*t,i=new BMap.Icon("../../../images/dest_markers_14848ce.png"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/images/dest_markers_14848ce.png*/,new BMap.Size(18,18),{imageOffset:new BMap.Size(n,-100),infoWindowOffset:new BMap.Size(9,0)}),r=new BMap.Marker(a,{icon:i});return o.addOverlay(r),r._stCode=d.OVERLAY_STYLE.DIR_MKR+t,r}},addDrRoute:function(e,t,o,a){var n=this,i=a||map;window.dropRoutes||(window.dropRoutes=[]);var r=[];t.onRemoveTips();var s=t.routePoints;if(t.mapZoomLevel=i.zoomLevel,t.driveBounds.length>0){var _=p.getBPoints(t.driveBounds);if(0==t.drag&&!e||o)if(i.mapType==BMAP_TYPE_DIMENSIONAL){var f=BMap.MapType[BMAP_TYPE_DIMENSIONAL].citys,l=f[i.currentCity][1],c=p.getPointsBounds(_),u=n.getBitLevel(c);l.intersects(c)?(15>=u&&(u=15),t.dragPois&&i.centerAndZoom(t.dragPois[0].getPoint(),u)):(i.setMapType(BMAP_NORMAL_MAP),this.setViewport(_,40))}else this.setViewport(_,40);t.drag=0}for(var E=Math.pow(2,BMap.MapType[i.mapType].zoomLevelMax-i.zoomLevel),m=i.pixelToPoint({x:3*-i.width,y:3*i.height}),g=i.pixelToPoint({x:3*i.width,y:3*-i.height}),R=(new BMap.Bounds(m.lng,m.lat,g.lng,g.lat),0);R<s.length;R++){for(var M=s[R],v=[],T=0;T<M.length;T++)if(i.mapType===BMAP_TYPE_DIMENSIONAL)for(var w=M[T].p,S=this.cutPoints(w,E),y=S.split(";"),A=0;A<y.length;A++){var O=y[A].split(","),L=new BMap.Point(O[0],O[1]);v.push(L)}else for(var w=M[T].p,S=this.cutPoints(w,0),y=S.split(";"),A=0;A<y.length;A++){var O=y[A].split(","),L=new BMap.Point(O[0],O[1]);v.push(L)}if(!t.draging&&0==t.sended){var n=t;if(0==e){var h=this.addRoute(v,d.ROUTE_TYPE_DRIVE,void 0,i);r.push(h),h.index=R,h.addEventListener("mouseover",function(e){n.onRouteOver(e)}),h.addEventListener("mousemove",function(e){n.onRouteMove(e)}),h.addEventListener("mouseout",function(e){n.onRouteOut(e)}),window.dropRoutes.push(h)}else{var b=window.dropRoutes[R];b&&b.setPoints(v)}}}return r},createTip:function(e,t,o,a){if(e||"string"==typeof e){var n={display:!0,offset:new BMap.Size(3,-34),style:{background:"url(http://webmap0.map.bdstatic.com/newmap/static/common/images/tip_5ffa1fb.gif) 0 0 no-repeat",color:"#000",height:"30px",border:"0",padding:"0 0 0 4px"}},i=a||map;n.point=i.getCenter(),o&&"object"==typeof o&&(o=T.extend(n,o)),e="<span class="+t+">"+e+"</span>";var r=new BMap.Label(e,{point:o.point,offset:o.offset}),s=new BMap.Marker(o.point,{icon:new BMap.Icon("../../../images/transparent.gif"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/images/transparent.gif*/,new BMap.Size(1,1))});return r.setStyle(o.style),s.setLabel(r),0==o.display&&r.hide(),i.addOverlay(s),r.addEventListener("mouseover",function(){s.setTop(!0,35e5-BMap.Overlay.getZIndex(o.point.lat,BMAP_COORD_MERCATOR))}),r.addEventListener("mouseout",function(){s.setTop(!1)}),s}},getBitLevel:function(e){for(var t=BMap.MapType[map.mapType],o=t.zoomLevelMax,a=1,n=o;n>=a;n--){var i=Math.pow(2,t.zoomLevelMax-n)*t.baseUnits/t.tileSize;if((e.getMaxX()-e.getMinX())/i<map.width-60&&(e.getMaxY()-e.getMinY())/i<map.height-60)break}return n},setViewport:function(e,t){if(0!=e.length){var o=null;t&&(o={margins:[t,t,t,t]});var a=map.getViewport(e,o);map.setViewport(a)}},_getPicType:function(){var e=map.getMapType(),t=[];return e==BMAP_SATELLITE_MAP?(t.push(7),map._isHybirdShow&&t.push(1)):t.push(0),window.GRControll&&window.GRControll.getDataForSnap()&&t.push(6),t.join(",")},parse2Geo:function(e,t){t?.25>t?t=0:t>.25&&1>t?t=1:t>32&&(t=32):t=0;var o=e.split("|");if(1==o.length){var a=c.decode_geo_diff(o[0]);return{type:a.type,bound:"",points:a.geo.join(",")}}if(o.length>1){for(var n=e.split(";.="),i=[],r=[],s=0,p=n.length,d=0;p>d;d++){var _=n[d];p>1&&(0==d&&(_+=";"),d>0&&p-1>d&&(_=".="+_+";"),d==p-1&&(_=".="+_));var f=_.split("|"),l=c.decode_geo_diff(f[0]),u=c.decode_geo_diff(f[1]);i.push(l.geo.join(",")),i.push(u.geo.join(","));var a=c.decode_geo_diff(f[2]);s=a.type;var E=a.geo.join(",");if(E=E.replace(/([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*)(,)/g,"$1,$2;"),t>0){var m=new RegExp("(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);)(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);){"+t+"}","ig");E=E.replace(m,"$1")}r.push(E)}return 1>=p&&(r=r.join(";")),{type:s,bound:i.join(";"),points:r}}},getGEORevertAddress:function(e,t){var o="http://api.map.baidu.com/?qt=rgc&x="+e.lng+"&y="+e.lat+"&dis_poi=100&poi_num=10&ie=utf-8&oue=1&res=webmap";baidu.jsonp(o,function(e){"function"==typeof t&&e&&e.content&&t(e)})},add3DTip:function(){},remove3DTip:function(){},showInrTip:function(e){T.g("inrTipNew_"+e).style.display="block",T.g("tipBtn_"+e).style.display="none",setTimeout(function(){T.g("inrTipNew_"+e)&&(T.g("inrTipNew_"+e).style.display="none"),T.g("tipBtn_"+e)&&(T.g("tipBtn_"+e).style.display="block")},3e3)}}});