!function(){function D(t,e){if(t=m.G(t)){if(F.call(this),this.container=t,this._setStyle(t),t.unselectable="on",t.innerHTML="",t.appendChild(this.render()),this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.platform=t.children[0],this.maskLayer=this.platform.children[0],this._panes={},this._viewTiles={},this._bind(),this.centerPoint=null,this.zoomLevel=0,this.lastLevel=0,this.defaultZoomLevel=null,this.defaultCenter=null,this.currentCity="",this.cityCode="",this.currentOperation=0,this.config={clickInterval:200,enableDragging:!0,enableKeyboard:!1,enableClickPan:!1,enableDblclickZoom:!0,enableContinuousZoom:!1,enableWheelZoom:!1,enableMouseDown:!0,fps:25,zoomerDuration:240,actionDuration:450,defaultCursor:aU.defaultCursor,draggingCursor:aU.draggingCursor,isOverviewMap:!1,zoomLevelMin:3,zoomLevelMax:19,coordType:BMAP_COORD_LNGLAT,mapType:BMAP_NORMAL_MAP,restrictBounds:!1,drawer:BMAP_SYS_DRAWER,enableInertialDragging:!1,drawMargin:500,enableFulltimeSpotClick:!1,enableResizeOnCenter:!1,enableDeepZoom:this.detectModernBrowser(),enableCanvas2dMap:ax()},this.setConfig(e),aM[this.config.mapType]||(this.config.mapType=BMAP_NORMAL_MAP),e=e||{},this.config.zoomLevelMin=e.zoomLevelMin||aM[this.config.mapType].zoomLevelMin,this.config.zoomLevelMax=e.zoomLevelMax||aM[this.config.mapType].zoomLevelMax,this.mapType=this.config.mapType,this.temp={operating:!1,arrow:0,lastDomMoveTime:0,lastLoadTileTime:0,lastMovingTime:0,canKeyboard:!1,I:function(t){return m.I(t)},curSpots:[],curSpotsArray:[],spotsGuid:1,registerIndex:-1,hoverOnSpot:null},window.InstanceCore=this.temp.I,this.platform.style.cursor=this.config.defaultCursor,m.Browser.ie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(i){}for(var n=0;n<aW._register.length;n++)aW._register[n](this);this.temp.registerIndex=n;var o=this;(m.Platform.windows||m.Platform.macintosh||m.Platform.x11)&&au.load("oppc",function(){o._asyncRegister()}),(m.Platform.iphone||m.Platform.ipad||m.Platform.android)&&au.load("opmb",function(){o._asyncRegister()}),t=null,o.enableLoadTiles=!0}}function n(){}function z(t){t=t||{},this.charset=t.charset||"utf-8",this.objName=t.objName||"mapData",this.callback=t.callback,this.errorUrl=t.errorUrl||""}function aK(t){var e={duration:1e3,fps:30,delay:0,transition:l.linear,onStop:function(){}};if(this._anis=[],t)for(var i in t)e[i]=t[i];if(this._opts=e,N(e.delay)){var n=this;setTimeout(function(){n.start()},e.delay)}else e.delay!=aK.INFINITE&&this.start()}function au(){}function Q(){this._map=null,this._container,this._type="control",this.blockInfoWindow=!0,this._visible=!0}function K(t){Q.call(this),t=t||{},this._opts={printable:!1},m.extend(this._opts,t),this._copyrightCollection=[],this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT,this.defaultOffset=new Z(5,2),this.setAnchor(t.anchor),this._canShow=!0,this.blockInfoWindow=!1,this._asyncLoadCode()}function al(t){Q.call(this),t=t||{},this._opts={printable:!1},this._opts=m.extend(m.extend(this._opts,{size:new Z(150,150),padding:5,isOpen:!1,zoomInterval:4}),t),this.defaultAnchor=BMAP_ANCHOR_BOTTOM_RIGHT,this.defaultOffset=new Z(0,0),this.setAnchor(t.anchor),this.setSize(this._opts.size),this._omCanvas,this._omMapContainer,this._omView,this._omViewMv,this._omBtn,this._borderWidth=1,this._btnWidth=13,this._btnHeight=13,this._quad=4,this._overviewMap=null,this._minZoomLevel=-1,this._maxZoomLevel=-1,this._curOMZoomLevel=-1,this._wRatio=1,this._hRatio=1,this._temp={},this._currentOp="",this._overviewInitialized=!1,this._asyncLoadCode()}function V(t){Q.call(this),t=t||{},this._opts={printable:!1},this._opts=m.extend(m.extend(this._opts,{color:"black",unit:"metric"}),t),this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT,this.defaultOffset=new Z(81,18),this.setAnchor(t.anchor),this._units={metric:{name:"metric",conv:1,incon:1e3,u1:"米",u2:"公里"},us:{name:"us",conv:3.2808,incon:5280,u1:"英尺",u2:"英里"}},this._units[this._opts.unit]||(this._opts.unit="metric"),this._scaleText=null,this._numberArray={},this._asyncLoadCode()}function I(t){Q.call(this),t=t||{},this._opts={printable:!1},m.extend(this._opts,t),this.controlHeight=[{width:62,height:226,zoomHeight:159,zoomWidth:37,sliderHeight:120,sliderCHeight:120},{width:37,height:97,zoomHeight:38,zoomWidth:37,sliderHeight:0,sliderCHeight:0},{width:37,height:57,zoomHeight:0,zoomWidth:0,sliderHeight:0,sliderCHeight:0},{width:21,height:43,zoomHeight:43,zoomWidth:18,sliderHeight:0,sliderCHeight:0}],this.defaultAnchor=BMAP_ANCHOR_TOP_LEFT,this.defaultOffset=new Z(10,10),this.setAnchor(t.anchor),this.setType(t.type),this._maxTotalZoomLv=19,this._minZoomLevel=-1,this._maxZoomLevel=-1,this._totalZoomLv=-1,this._sliderInterval=6,this._minBarY=1,this._maxBarY=-1,this._curBarY=-1,this._zoomDom=null,this._zoomBtnDom=null,this._sliderDom=null,this._sliderBaseDom=null,this._cZIndex="1100",this._asyncLoadCode()}function ag(t){Q.call(this),t=t||{},this._opts={printable:!1},this.defaultAnchor=BMAP_ANCHOR_TOP_RIGHT,this.defaultOffset=new Z(10,10),this.setAnchor(t.anchor),this._is3DControlShow=!0,this._opts=m.extend(m.extend(this._opts,{offset:this.defaultOffset,enableSwitch:!0}),t),this._asyncLoadCode()}function j(t){F.call(this),this._opts={container:null,cursor:"default"},this._opts=m.extend(this._opts,t),this._type="contextmenu",this._map=null,this._container,this._shadow,this._left=0,this._top=0,this._items=[],this._rItems=[],this._dividers=[],this._enable=!0,this.curPixel=null,this.curPoint=null,this._isOpen=!1;var e=this;au.load("menu",function(){e._draw()})}function L(t,e,i){if(t&&e&&"function"==typeof e){F.call(this),this._opts={width:100,id:""},i=i||{},this._opts.width=1*i.width?i.width:100,this._opts.id=i.id?i.id:"",this._text=t+"",this._callback=e,this._map=null,this._type="menuitem",this._contextmenu=null,this._container=null,this._enabled=!0;var n=this;au.load("menu",function(){n._draw()})}}function y(t,e,i,n){this.minX=t,this.minY=e,this.maxX=i,this.maxY=n}function g(t,e){isNaN(t)&&(t=ac(t),t=isNaN(t)?0:t),"string"==typeof t&&(t=parseFloat(t)),isNaN(e)&&(e=ac(e),e=isNaN(e)?0:e),"string"==typeof e&&(e=parseFloat(e)),this.lng=t,this.lat=e}function x(t){"[object Array]"==Object.prototype.toString.call(t)&&(this.points=t)}function P(){this._type="overlay"}function aJ(){m.BaseClass.call(this),P.call(this),this._visible=!0,this.infoWindow=null,this._dblclickTime=0}function aw(){this.map=null,this._overlays={},this._customOverlays=[]}function ay(t){aJ.call(this),this._config={strokeColor:"#3a6bdb",strokeWeight:5,strokeOpacity:.65,strokeStyle:"solid",strokeLineCap:"round",strokeLineJoin:"round",enableMassClear:!0,getParseTolerance:null,getParseCacheIndex:null,enableParse:!0,enableEditing:!1,mouseOverTolerance:15,use3DCoords:!1},this.setConfig(t),this._config.strokeWeight<=0&&(this._config.strokeWeight=5),(this._config.strokeOpacity<0||this._config.strokeOpacity>1)&&(this._config.strokeOpacity=.65),(this._config.fillOpacity<0||this._config.fillOpacity>1)&&(this._config.fillOpacity=.65),"solid"!=this._config.strokeStyle&&"dashed"!=this._config.strokeStyle&&"dotted"!=this._config.strokeStyle&&(this._config.strokeStyle="solid"),this.domElement=null,this._bounds=new aW.Bounds(0,0,0,0),this._parseCache=[],this.vertexMarkers=[],this._temp={}}function an(t){aJ.call(this),this.map=null,this.domElement=null,this._config={width:0,height:0,offset:new Z(0,0),opacity:1,background:"transparent",lineStroke:1,lineColor:"#000",lineStyle:"solid",point:null},this.setConfig(t),this.point=this._config.point}function w(t,e,i){if(t&&e){this.imageUrl=t,this.size=e;var n=new Z(Math.floor(e.width/2),Math.floor(e.height/2)),o={offset:n,imageOffset:new Z(0,0)};i=i||{};for(var s in i)typeof o[s]==typeof i[s]&&(o[s]=i[s]);this.offset=o.offset,this.imageOffset=o.imageOffset,this.infoWindowOffset=i.infoWindowOffset||this.offset,this.printImageUrl=i.printImageUrl||""}}function aD(t,e){m.BaseClass.call(this),this.content=t,this.map=null,this._config={width:0,height:0,maxWidth:600,offset:new Z(0,0),title:"",maxContent:"",enableMaximize:!1,enableAutoPan:!0,enableCloseOnClick:!0,margin:[10,10,40,10],collisions:[[10,10],[10,10],[10,10],[10,10]],ifMaxScene:!1,onClosing:function(){return!0}},this.setConfig(e),0!=this._config.width&&(this._config.width<220&&(this._config.width=220),this._config.width>730&&(this._config.width=730)),0!=this._config.height&&(this._config.height<60&&(this._config.height=60),this._config.height>650&&(this._config.height=650)),0!=this._config.maxWidth&&(this._config.maxWidth<220&&(this._config.maxWidth=220),this._config.maxWidth>730&&(this._config.maxWidth=730)),this.isWinMax=!1,this.IMG_PATH=aU.imgPath,this.overlay=null;var i=this;au.load("infowindow",function(){i._draw()})}function q(t,e){aJ.call(this),this.content=t,this.map=null,this.domElement=null,this._config={width:0,offset:new Z(0,0),styles:{backgroundColor:"#fff",border:"1px solid #f00",padding:"1px",whiteSpace:"nowrap",font:"12px arial,simsun",zIndex:"80",MozUserSelect:"none"},point:null,enableMassClear:!0},e=e||{},this.setConfig(e),this._config.width<0&&(this._config.width=0),this.point=this._config.point;var i=this;au.load("marker",function(){i._draw()})}function J(t,e){aJ.call(this),e=e||{},this.point=t,this.map=null,this._animation=null,this.domElement=null,this.iconDom=null,this.infoWindowDom=null,this.siblingElement=null,this.iconClassName="",this._config={offset:new Z(0,0),opacity:1,icon:null,title:"",infoWindow:null,label:null,baseZIndex:0,clickable:!0,zIndexFixed:!1,isTop:!1,enableMassClear:!0,enableDragging:!1,raiseOnDrag:!1,restrictDraggingArea:!1},this.setConfig(e),e.icon||(this._config.icon=new aW.Icon(aU.imgPath+"marker_red.png",new Z(23,25),{offset:new Z(10,25),infoWindowOffset:new Z(10,0)})),this._isDragging=!1;var i=this;au.load("marker",function(){i._draw()})}function am(t,e){ay.call(this,e),this.setPoints(t);var i=this;au.load("poly",function(){i._draw()})}function aR(t,e){ay.call(this,e),this.setPoints(t);var i=this;au.load("poly",function(){i._draw()})}function c(t,e){ay.call(this,e),e=e||{},this._config.fillOpacity=e.fillOpacity?e.fillOpacity:.65,this._config.fillColor=""==e.fillColor?"":e.fillColor?e.fillColor:"#fff",this.setPoints(t);var i=this;au.load("poly",function(){i._draw()})}function aa(t,e,i){this.point=t,this.radius=Math.abs(e),c.call(this,[],i)}function H(t,e){c.call(this,t,e);var i=this;au.load("poly",function(){i._draw()})}function aN(t,e){t=isNaN(t)?0:t,e=isNaN(e)?0:e,this.x=t,this.y=e}function X(){}function Z(t,e){this.width=parseFloat(t)||0,this.height=parseFloat(e)||0}function aB(e,i,n,a,r){this.mgr=e,this.position=n,this._cbks=[],this.name=e.getTileName(a,r),this.info=a,this._transparentPng=r.isTransparentPng();var h=s("img");p(h),h.galleryImg=!1;var l=h.style;l.position="absolute",l.width=e.tileSize+"px",l.height=e.tileSize+"px",l.left=n[0]+"px",l.top=n[1]+"px",this.img=h,this.src=i,ah&&(l.opacity=0);var c=this;this.img.onload=function(e){if(c.mgr){var i=c.mgr,n=i.bufferTiles;i.bufferNumber>0&&(n[c.name]=c,n.push(c.name));for(var s=n.length-i.bufferNumber,a=0;s>0&&a<n.length;a++){var h=n[a];if(!i.mapTiles[h]){if(n[h]){n[h].mgr=null;var l=n[h].img;l.parentNode&&(o(l),l.parentNode.removeChild(l)),l=null,n[h].img=null,n[h]=null,delete n[h]}n.splice(a,1),a--,s--}}if(c.loaded=!0,i.imgNumber++,!t(c.img)&&r.tilesDiv&&(r.tilesDiv.appendChild(c.img),FeBrowser.ie<=6&&FeBrowser.ie>0&&1==r.isTransparentPng())){var u=c.img.style,p=u.width,f=u.height,d='position:absolute;FILTER: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+c.src+'",sizingMethod=scale);';u.cssText=d,u.width=p,u.height=f,u.left=c.position[0]+"px",u.top=c.position[1]+"px"}var e=new aA("onimagechange");e.action="show",e.tile=c.name,i.map.dispatchEvent(e),ah&&new aK({fps:20,duration:200,render:function(t){c.img&&c.img.style&&(c.img.style.opacity=1*t)},finish:function(){c.img&&c.img.style&&delete c.img.style.opacity}}),c._callCbks()}},this.img.onerror=function(){if(c.error=!0,c._callCbks(),c.mgr){var e=(c.mgr,aM[r.mapType]);e.errorUrl&&(c.img.src=e.errorUrl),t(c.img)||r.tilesDiv&&r.tilesDiv.appendChild(c.img)}},h=null;var u=new aA("onimagebefore");u.tile=c.name,e.map.dispatchEvent(u)}function aI(t){this.tileLayers=[],this.cacheDiv=null,this.map=t,this.bufferNumber=300,this.mapTiles=[],this.bufferTiles=[],this.slideMaxZoom=4,this.config=aM[this.map.mapType],this.errorUrl=this.config.errorUrl,this.tileSize=this.config.tileSize,this.baseUnits=this.config.baseUnits,this.baseZoomLevel=this.config.zoomLevelBase,this.tileURLs=this.config.tileUrls,this.imgNumber=0,this.numLoading=0,this.temp={}}function G(t){this.opts=t||{},this.copyright=this.opts.copyright||{},this.transparentPng=this.opts.transparentPng||!1,this.baseLayer=this.opts.baseLayer||!1,this.offset=[0,0],this._type="tilelayer",this.scaler=window.devicePixelRatio&&window.devicePixelRatio>=2?2:1}function aj(t,e,i){this.bounds=t,this.content=e,this.mapType=i}function ar(t){F.call(this),t&&(this._opts={},this._map=t)}function U(t,e){ar.call(this,t),e=e||{},this._opts=m.extend(m.extend(this._opts||{},{autoClear:!1,tips:"测距",followText:"单击确定起点，双击结束绘制",unit:"metric",showResult:!0,lineColor:"blue",lineStroke:2,opacity:1,lineStyle:"solid",cursor:aU.imgPath+"ruler.cur",styleCodes:{lnCode:0,spCode:0,slCode:0,tlCode:0},enableMassClear:!0}),e),0==this._opts.showResult&&("undefined"==typeof e.tips&&(this._opts.tips="绘制折线"),e.cursor||(this._opts.cursor="crosshair")),this._opts.lineStroke<=0&&(lineStroke=2),this._opts.opacity>1?this._opts.opacity=1:this._opts.opacity<0&&(this._opts.opacity=0),"solid"!=this._opts.lineStyle&&"dashed"!=this._opts.lineStyle&&(this._opts.lineStyle="solid"),this._checked=!1,this._drawing=null,this.followTitle=null,this._totalDis={},this._points=[],this._paths=[],this._dots=[],this._segDistance=[],this._overlays=[],this._units={metric:{name:"metric",conv:1,incon:1e3,u1:"米",u2:"公里"},us:{name:"us",conv:3.2808,incon:5279.856,u1:"英尺",u2:"英里"}},this._units[this._opts.unit]||(this._opts.unit="metric"),this._dLineColor="#ff6319",this._dLineStroke=3,this._dOpacity=.8,this._dLineStyle="solid",this._dCursor=aU.imgPath+"ruler.cur",this._opts.showResult&&(this._opts.followText="单击确定起点"),this._followTextM="单击确定地点，双击结束",this._movingTimerId=null,this.text=this._opts.showResult?"测距":"绘线",this._isOpen=!1;var i=this;au.load("tools",function(){i._draw()})}function ao(t){return t.style}function aV(t,e){var i=ao(t);i.left=k(e[0]),i.top=k(e[1])}function C(t,e){var i=ao(t);i.opacity=e,i.MozOpacity=e,i.KhtmlOpacity=e,i.filter="alpha(opacity="+100*e+")",i=null}function k(t){if("number"==typeof t)return t+"px";if("string"==typeof t){var e=/"\\s","g"/,i=/"^\\d+(px|%)+$","i"/,n=t.replace(e,"");if(i.exec(n))return n;var o=new RegExp("^\\d+$");return o.exec(n)?n+"px":"0px"}}function p(t){m.Browser.ie>0?(t.unselectable="on",t.selectstart=function(){return!1}):ao(t).MozUserSelect="none"}function aT(t,e){var i=ao(t);i.width=k(e[0]),i.height=k(e[1])}function t(t){return t&&t.parentNode&&11!=t.parentNode.nodeType}function ab(t,e){return t.insertAdjacentHTML("beforeEnd",e),t.lastChild}function A(t){for(var e={left:0,top:0};t&&t.offsetParent;)e.left+=t.offsetLeft,e.top+=t.offsetTop,t=t.offsetParent;return e}function ak(t){var t=window.event||t;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function E(t){var t=window.event||t;return t.preventDefault?t.preventDefault():t.returnValue=!1,!1}function aG(t){return ak(t),E(t)}function M(){var t=document.documentElement,e=document.body;return t&&(t.scrollTop||t.scrollLeft)?[t.scrollTop,t.scrollLeft]:e?[e.scrollTop,e.scrollLeft]:[0,0]}function o(t){if(t){t.onload=t.onerror=null;var e,i,n,s=t.attributes;if(s)for(i=s.length,e=0;i>e;e+=1)n=s[e].name,"function"==typeof t[n]&&(t[n]=null);if(s=t.children)for(i=s.length,e=0;i>e;e+=1)o(t.children[e])}}function aS(t,e,i){var n=e.lng-i.lng,o=e.lat-i.lat;if(0==n)return Math.abs(t.lng-e.lng);if(0==o)return Math.abs(t.lat-e.lat);var s=o/n,a=e.lat-s*e.lng;return Math.abs(s*t.lng-t.lat+a)/Math.sqrt(s*s+1)}function u(t,e){return t&&e?Math.round(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))):void 0}function aF(t,e){var i=[];e=e||function(t){return t};for(var n in t)i.push(n+"="+e(t[n]));return i.join("&")}function s(t,e,i){var n=document.createElement(t);i&&(n=document.createElementNS(i,t)),e=e||{};for(var o in e){var s={"for":"htmlFor","class":"cssClass"}[o]||o;if("style"!=o)if("class"!=o)if(n.setAttribute)n.setAttribute(s,e[o]);else try{n[s]=e[o]}catch(n){}else m.ac(n,e[o]);else n.style.cssText=e[o]}return n}function aq(t){return t.currentStyle?t.currentStyle:t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):void 0}function B(){return(new Date).getTime()}function az(t){return"function"==typeof t}function N(t){return"number"==typeof t}function ac(t){var e,i,n,o,s,a="",r="",h="",l=0,c=/[^A-Za-z0-9\+\/\=]/g;if(!t||c.exec(t))return t;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do n=aX.indexOf(t.charAt(l++)),o=aX.indexOf(t.charAt(l++)),s=aX.indexOf(t.charAt(l++)),h=aX.indexOf(t.charAt(l++)),e=n<<2|o>>4,i=(15&o)<<4|s>>2,r=(3&s)<<6|h,a+=String.fromCharCode(e),64!=s&&(a+=String.fromCharCode(i)),64!=h&&(a+=String.fromCharCode(r)),e=i=r="",n=o=s=h="";while(l<t.length);return a}function aC(t,e){var i=document.createElement("div"),n="Webkit Moz O ms".split(" "),o=n.length,s="",a=i.style;t in a&&(s=t),t=t.replace(/^[a-z]/,function(t){return t.toUpperCase()});for(;o--;){var r=n[o]+t;if(r in a){s=r;break}}return e?s:s.length>0?!0:!1}function ax(){if("boolean"==typeof ax.supportCanvas2d)return ax.supportCanvas2d;var t=document.createElement("canvas"),e=null;try{e=t.getContext("2d")}catch(i){ax.supportCanvas2d=!1}return ax.supportCanvas2d=null===e?!1:!0,ax.supportCanvas2d}function af(){this._container=null}var m=m||{version:"20080809",emptyFn:function(){}};!function(){m._log=[];var t=0,e={};m.BaseClass=function(t){e[this.hashCode=t||m.BaseClass.guid()]=this},m.BaseClass.guid=function(){return"mz_"+(t++).toString(36)},m.BaseClass.create=function(){var t=new m.BaseClass;return t.decontrol(),t};m.instance=m.I=function(t){return e[t]};m.BaseClass.prototype.dispose=function(){this.hashCode&&delete e[this.hashCode];for(var t in this)"function"!=typeof this[t]&&delete this[t]},m.BaseClass.prototype.getHashCode=function(){return this.hashCode||(e[this.hashCode=m.BaseClass.guid()]=this),this.hashCode},m.BaseClass.prototype.decontrol=function(){delete e[this.hashCode]},m.BaseClass.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"},m.BaseClass.prototype._wlog=function(t,e){var i=m._log;i.length>100&&(i.reverse().length=50,i.reverse()),i[i.length]="["+t+"]["+(this._className||"Object")+" "+this.hashCode+"] "+e}}(),Function.prototype.inherits=function(t,e){var i,n,o=this.prototype,s=function(){};s.prototype=t.prototype,n=this.prototype=new s,"string"==typeof e&&(n._className=e);for(i in o)n[i]=o[i];return this.prototype.constructor=o.constructor,o=s=null,n},m.BaseEvent=function(t,e){this.type=t,this.returnValue=!0,this.target=e||null,this.currentTarget=this.srcElement=null,this.cancelBubble=!1,this.domEvent=null},m.BaseClass.prototype.addEventListener=function(t,e,i){if("function"!=typeof e)return this._wlog("error","addEventListener:"+e+" is not a function");this._listeners||(this._listeners={});var n,o=this._listeners;"string"==typeof i&&i&&(/[^\w\-]/.test(i)?this._wlog("warning","nonstandard key:"+i):(e.hashCode=i,n=i)),0!=t.indexOf("on")&&(t="on"+t),"object"!=typeof o[t]&&(o[t]={}),n=n||m.BaseClass.guid(),e.hashCode=n,o[t][n]&&this._wlog("warning","repeat key:"+n),o[t][n]=e},m.BaseClass.prototype.removeEventListener=function(t,e){if("function"==typeof e)e=e.hashCode;else if("string"!=typeof e)return;this._listeners||(this._listeners={}),0!=t.indexOf("on")&&(t="on"+t);var i=this._listeners;i[t]&&i[t][e]&&delete i[t][e]},m.BaseClass.prototype.dispatchEvent=function(t){this._listeners||(this._listeners={});var e,i=this._listeners,n=t.type;if(t.target=t.srcElement=t.target||t.srcElement||this,t.currentTarget=this,"function"==typeof this[n]&&this[n](t),"object"==typeof i[n])for(e in i[n])"function"==typeof i[n][e]&&i[n][e].call(this,t);return t.returnValue},m.BaseEvent.prototype.inherit=function(t){var e=this;if(this.domEvent=t=window.event||t,e.clientX=t.clientX||t.pageX,e.clientY=t.clientY||t.pageY,e.offsetX=t.offsetX||t.layerX,e.offsetY=t.offsetY||t.layerY,e.screenX=t.screenX,e.screenY=t.screenY,e.ctrlKey=t.ctrlKey||t.metaKey,e.shiftKey=t.shiftKey,e.altKey=t.altKey,t.touches){e.touches=[];for(var i=0;i<t.touches.length;i++)e.touches.push({clientX:t.touches[i].clientX,clientY:t.touches[i].clientY,screenX:t.touches[i].screenX,screenY:t.touches[i].screenY,pageX:t.touches[i].pageX,pageY:t.touches[i].pageY,target:t.touches[i].target,identifier:t.touches[i].identifier})}if(t.changedTouches){e.changedTouches=[];for(var i=0;i<t.changedTouches.length;i++)e.changedTouches.push({clientX:t.changedTouches[i].clientX,clientY:t.changedTouches[i].clientY,screenX:t.changedTouches[i].screenX,screenY:t.changedTouches[i].screenY,pageX:t.changedTouches[i].pageX,pageY:t.changedTouches[i].pageY,target:t.changedTouches[i].target,identifier:t.changedTouches[i].identifier})}if(t.targetTouches){e.targetTouches=[];for(var i=0;i<t.targetTouches.length;i++)e.targetTouches.push({clientX:t.targetTouches[i].clientX,clientY:t.targetTouches[i].clientY,screenX:t.targetTouches[i].screenX,screenY:t.targetTouches[i].screenY,pageX:t.targetTouches[i].pageX,pageY:t.targetTouches[i].pageY,target:t.targetTouches[i].target,identifier:t.targetTouches[i].identifier})}return e.rotation=t.rotation,e.scale=t.scale,e},m.Browser=function(){var t=navigator.userAgent,e=0,i=0,n=0,o=0,s=0,a=0,r=0;return"object"==typeof window.opera&&/Opera(\s|\/)(\d+(\.\d+)?)/.test(t)?i=parseFloat(RegExp.$2):/MSIE (\d+(\.\d+)?)/.test(t)?e=parseFloat(RegExp.$1):/Firefox(\s|\/)(\d+(\.\d+)?)/.test(t)?o=parseFloat(RegExp.$2):"Netscape"==navigator.vendor&&/Netscape(\s|\/)(\d+(\.\d+)?)/.test(t)?r=parseFloat(RegExp.$2):t.indexOf("Safari")>-1&&/Version\/(\d+(\.\d+)?)/.test(t)&&(n=parseFloat(RegExp.$1)),t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML")&&/rv\:(\d+(\.\d+)?)/.test(t)&&(a=parseFloat(RegExp.$1)),/chrome\/(\d+\.\d)/i.test(t)&&(s=parseFloat(RegExp.$1)),{ie:e,firefox:o,gecko:a,netscape:r,opera:i,safari:n,chrome:s}}(),window.FeBrowser=m.Browser,m.Dom={},m.Dom.createDom=function(t,e){m.isIE&&e&&e.name&&(t="<"+t+' name="'+m.String.escapeHTML(e.name)+'">');var i=document.createElement(t);return e&&m.Dom.setProperties(i,e),i},m.Dom.getOffset=function(t){var e=m.Dom.getOwnerDocument(t),i=m.isGecko>0&&e.getBoxObjectFor&&"absolute"==m.Dom.getStyle(t,"position")&&(""===t.style.top||""===t.style.left),n={left:0,top:0},o=m.isIE&&!m.isStrict?e.body:e.documentElement;if(t==o)return n;var s,a=null;if(t.getBoundingClientRect)s=t.getBoundingClientRect(),n.left=s.left+Math.max(e.documentElement.scrollLeft,e.body.scrollLeft),n.top=s.top+Math.max(e.documentElement.scrollTop,e.body.scrollTop),n.left-=e.documentElement.clientLeft,n.top-=e.documentElement.clientTop,m.isIE&&!m.isStrict&&(n.left-=2,n.top-=2);else if(e.getBoxObjectFor&&!i){s=e.getBoxObjectFor(t);var r=e.getBoxObjectFor(o);n.left=s.screenX-r.screenX,n.top=s.screenY-r.screenY}else{a=t;do{if(n.left+=a.offsetLeft,n.top+=a.offsetTop,m.isWebkit>0&&"fixed"==m.Dom.getStyle(a,"position")){n.left+=e.body.scrollLeft,n.top+=e.body.scrollTop;break}a=a.offsetParent}while(a&&a!=t);for((m.isOpera>0||m.isWebkit>0&&"absolute"==m.Dom.getStyle(t,"position"))&&(n.top-=e.body.offsetTop),a=t.offsetParent;a&&a!=e.body;)n.left-=a.scrollLeft,m.isOpera&&"TR"==a.tagName||(n.top-=a.scrollTop),a=a.offsetParent}return n},m.Dom.getOwnerDocument=function(t){return 9==t.nodeType?t:t.ownerDocument||t.document},m.Dom.setProperties=function(t,e){m.each(e,function(e,i){m.Dom._setProperty(t,i,e)})},m.Dom._setProperty=function(t,e,i){"style"==e?t.style.cssText=i:"class"==e?t.className=i:"for"==e?t.htmlFor=i:e in m.Dom._DIRECT_ATTRIBUTE_MAP?t.setAttribute(m.Dom._DIRECT_ATTRIBUTE_MAP[e],i):t[e]=i},m.Dom._DIRECT_ATTRIBUTE_MAP={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder"},m.G=function(){for(var t=[],e=arguments.length-1;e>-1;e--){var i=arguments[e];t[e]=null,"object"http://webmap0.map.bdstatic.com/newmap/static/common/js/libs/API/==typeof i&&i&&i.dom?t[e]=i.dom:"object"==typeof i&&i&&i.tagName||i==window||i==document?t[e]=i:"string"==typeof i&&(i=document.getElementById(i))&&(t[e]=i)}return t.length<2?t[0]:t},m.ac=function(t,e){(t=this.G(t))&&(e=this.trim(e),new RegExp("(^| )"+e.replace(/(\W)/g,"\\$1")+"( |$)").test(t.className)||(t.className=t.className.split(/\s+/).concat(e).join(" ")))},m.addClassName=m.ac,m.each=function(t,e){if("function"!=typeof e)return t;if(t)if(void 0===t.length)for(var i in t)e.call(t[i],t[i],i);else for(var n=0,o=t.length;o>n;n++)e.call(t[n],t[n],n);return t},m.extend=function(t,e){if(t&&e&&"object"==typeof e){for(var i in e)t[i]=e[i];for(var n,o=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],s=0;s<o.length;s++)n=o[s],Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},m.hide=function(){m.each(arguments,function(t){(t=m.G(t))&&(t.style.display="none")})},m.inherit=function(t,e,i){var n=t.prototype,o=function(){};o.prototype=e.prototype;var s=t.prototype=new o;"string"==typeof i&&(s._className=i);for(var a in n)s[a]=n[a];return t.prototype.constructor=n.constructor,n=null,s},m.isIE=0,function(){navigator.userAgent.indexOf("MSIE")>0&&!window.opera&&(/MSIE (\d+(\.\d+)?)/.test(navigator.userAgent),m.isIE=parseFloat(RegExp.$1))}(),m.rc=function(t,e){if(t=this.G(t)){e=this.trim(e);var i=t.className.replace(new RegExp("(^| +)"+e.replace(/(\W)/g,"\\$1")+"( +|$)","g"),"$2");t.className!=i&&(t.className=i)}},m.removeClassName=m.rc,m.show=function(){this.each(arguments,function(t){(t=m.G(t))&&(t.style.display="")})},m.trim=function(t){return t.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g,"")},m.ajax={},m.fn={},m.fn.blank=function(){},m.ajax.request=function(t,e){function i(){if(4==r.readyState){try{var t=r.status}catch(e){return void o("failure")}o(t),o(t>=200&&300>t||304==t||1223==t?"success":"failure"),window.setTimeout(function(){r.onreadystatechange=m.fn.blank,c&&(r=null)},0)}}function n(){if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}return window.XMLHttpRequest?new XMLHttpRequest:void 0}function o(t){t="on"+t;var e=_[t],i=m.ajax[t];if(e)if(s&&clearTimeout(s),"onsuccess"!=t)e(r);else{try{r.responseText}catch(n){return e(r)}e(r,r.responseText)}else if(i){if("onsuccess"==t)return;i(r)}}var s,a,r,h=e||{},l=h.data||"",c=!(h.async===!1),u=h.username||"",p=h.password||"",f=(h.method||"GET").toUpperCase(),d=h.headers||{},g=h.timeout||0,_={};for(a in h)_[a]=h[a];d["X-Requested-With"]="XMLHttpRequest";try{r=n(),"GET"==f&&(l&&(t+=(t.indexOf("?")>=0?"&":"?")+l,l=null),h.noCache&&(t+=(t.indexOf("?")>=0?"&":"?")+"b"+ +new Date+"=1")),u?r.open(f,t,c,u,p):r.open(f,t,c),c&&(r.onreadystatechange=i),"POST"==f&&r.setRequestHeader("Content-Type",d["Content-Type"]||"application/x-www-form-urlencoded");for(a in d)d.hasOwnProperty(a)&&r.setRequestHeader(a,d[a]);o("beforerequest"),g&&(s=setTimeout(function(){r.onreadystatechange=m.fn.blank,r.abort(),o("timeout")},g)),r.send(l),c||i()}catch(v){o("failure")}return r};var F=m.BaseClass;F.prototype.toString=function(){return this._className||""};var aA=m.BaseEvent;if(m.on=function(t,e,i){return(t=m.G(t))?(e=e.replace(/^on/,"").toLowerCase(),t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i),t):t},m.un=function(t,e,i){return(t=m.G(t))?(e=e.replace(/^on/,"").toLowerCase(),t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i),t):t},m.hc=function(t,e){if(!t||!t.className||"string"!=typeof t.className)return!1;var i=-1;try{i=t.className==e||t.className.search(new RegExp("(\\s|^)"+e+"(\\s|$)"))}catch(n){return!1}return i>-1},"undefined"!=typeof HTMLElement&&HTMLElement.prototype.__lookupGetter__&&!HTMLElement.prototype.__lookupGetter__("children")&&!window.opera)try{HTMLElement.prototype.__defineGetter__("children",function(){for(var t,e=[],i=0,n=0,o=this.childNodes.length;o>n;n++)t=this.childNodes[n],1==t.nodeType&&(e[i++]=t,t.name&&(e[t.name]||(e[t.name]=[]),e[t.name][e[t.name].length]=t),t.id&&(e[t.id]=t));return e})}catch(R){}"undefined"==typeof HTMLElement||window.opera||!HTMLElement.prototype||HTMLElement.prototype.insertAdjacentHTML||(HTMLElement.prototype.insertAdjacentHTML=function(t,e){var i=this.ownerDocument.createRange();switch(i.setStartBefore(this),i=i.createContextualFragment(e),t){case"beforeBegin":this.parentNode.insertBefore(i,this);break;case"afterBegin":this.insertBefore(i,this.firstChild);break;case"beforeEnd":this.appendChild(i);break;case"afterEnd":this.nextSibling?this.parentNode.insertBefore(i,this.nextSibling):this.parentNode.appendChild(i)}}),"undefined"==typeof HTMLElement||window.opera||(HTMLElement.prototype.contains=function(t){if(t==this)return!0;for(;t=t.parentNode;)if(t==this)return!0;return!1}),m.Browser.ie||"undefined"==typeof Event||window.opera||(Event.prototype.__defineSetter__("returnValue",function(t){return t||this.preventDefault(),t}),Event.prototype.__defineSetter__("cancelBubble",function(t){return t&&this.stopPropagation(),t})),m.each=function(t,e){if(az(e))for(var i=0,n=t.length;n>i&&e.call(t,t[i],i)!==!1;i++);return t},m.Platform={x11:0,macintosh:0,windows:0,android:0,iphone:0,ipad:0};for(var O in m.Platform)m.Platform.hasOwnProperty(O)&&(m.Platform[O]=new RegExp(O,"i").test(window.navigator.userAgent)?1:0);"undefined"==typeof m.Dom&&(m.Dom={}),m.Dom.getComputedStyle=function(t,e){var i,n=9==t.nodeType?t:t.ownerDocument||t.document;if(n.defaultView&&n.defaultView.getComputedStyle){if(i=n.defaultView.getComputedStyle(t,null))return i[e]||i.getPropertyValue(e)}else if(t.currentStyle)return t.currentStyle[e]||"";return""};var aU={imgPath:"http://webmap0.map.bdimg.com/image/api/",cityNames:{"北京":"bj","上海":"sh","深圳":"sz","广州":"gz","泉州":"quanzhou","昆明":"kunming","福州":"fuzhou","东莞":"dongguan","武汉":"wuhan","太原":"taiyuan","蚌埠":"bengbu","盐城":"yancheng","义乌":"yiwu"}};m.Browser.firefox?m.extend(aU,{distCursor:"url("+aU.imgPath+"ruler.cur),crosshair",defaultCursor:"-moz-grab",draggingCursor:"-moz-grabbing"}):m.Browser.chrome||m.Browser.safari?m.extend(aU,{distCursor:"url("+aU.imgPath+"ruler.cur) 2 6,crosshair",defaultCursor:"url("+aU.imgPath+"openhand.cur) 8 8,default",draggingCursor:"url("+aU.imgPath+"closedhand.cur) 8 8,move"}):m.extend(aU,{distCursor:"url("+aU.imgPath+"ruler.cur),crosshair",defaultCursor:"url("+aU.imgPath+"openhand.cur),default",draggingCursor:"url("+aU.imgPath+"closedhand.cur),move"});var aW=aW||{version:"1.1",_register:new Array,register:function(t){this._register[this._register.length]=t}};D.inherits(F,"Map"),m.extend(D.prototype,{render:function(){var t=s("div",{id:"platform"}),e=t.style;e.overflow="visible",e.position="absolute",e.zIndex=5,e.top=e.left="0px";var i=s("div",{id:"mask","class":"BMap_mask"}),n=i.style;return n.position="absolute",n.top=n.left="0px",n.zIndex="9",n.overflow="hidden",n.WebkitUserSelect="none",t.appendChild(i),t},_setStyle:function(t){var e=t.style;e.overflow="hidden","absolute"!=aq(t).position&&(e.position="relative"),e.backgroundImage="url("+aU.imgPath+"bg.png)",e.textAlign="left"},_bind:function(){var t=this;t._watchSize=function(){var e=t.getSize();if(t.width!=e.width||t.height!=e.height){var i=(e.width-t.width)/2,n=(e.height-t.height)/2,o=t.getZoomUnits(),s=t.centerPoint;s&&!t.config.enableResizeOnCenter&&(t.centerPoint=new g(s.lng+i*o,s.lat-n*o)),t.maskLayer.style.width=(t.width=e.width)+"px",t.maskLayer.style.height=(t.height=e.height)+"px",t.divhs&&(t.divhs.style.width=(t.width=e.width)+"px",t.divhs.style.height=(t.height=e.height)+"px");var a=new aA("onresize");a.size=e,t.dispatchEvent(a);var r=parseInt(t.platform.style.left)||0,h=parseInt(t.platform.style.top)||0;"undefined"==t.currentOperation||0==t.currentOperation||t.offsetX==r&&t.offsetY==h||t._setPlatformPosition(r,h)
}},t._watchSize(),setInterval(t._watchSize,16)},_setPlatformPosition:function(t,e,i,n){if(n!==!1&&!(isNaN(t)||isNaN(e)||this.offsetX==t&&this.offsetY==e)){var o=this.offsetX-t,s=this.offsetY-e,a=this.getZoomUnits(),r=this.centerPoint.lng,h=this.centerPoint.lat,l=new g(r,h);if(this.centerPoint=new g(l.lng+o*a,l.lat-s*a),i&&(this.centerPoint=i),this.zoomLevel<=4||this.config.restrictBounds){var c=aM[this.mapType].bounds;(this.centerPoint.lng-this.width/2*a<=c.minX&&0>o||this.centerPoint.lng+this.width/2*a>c.maxX&&o>=0)&&(t=this.offsetX),(this.centerPoint.lat-this.height/2*a<=c.minY&&s>=0||this.centerPoint.lat+this.height/2*a>c.maxY&&0>s)&&(e=this.offsetY),this.centerPoint=new g(l.lng+(this.offsetX-t)*a,l.lat-(this.offsetY-e)*a);var u=new aA("onreachbounds");this.dispatchEvent(u)}t=Math.round(t),e=Math.round(e),this.offsetX=t,this.offsetY=e,this.platform.style.left=t+"px",this.platform.style.top=e+"px",this.maskLayer.style.left=-t+"px",this.maskLayer.style.top=-e+"px",this.divhs&&(this.divhs.style.left=-t+"px",this.divhs.style.top=-e+"px"),this.dispatchEvent(new aA("onmoving"))}},zoomTo:function(t,e){if("number"==typeof t){var i=aM[this.mapType];if(i){var n=t;if(t=this._getProperZoom(t).zoom,t==this.zoomLevel){var o=new aA("onzoomexceeded");return o.targetZoom=n,void this.dispatchEvent(o)}if(this.lastLevel=this.zoomLevel,e)this.temp._cPoint=e,this.temp._cPixel=this.pointToPixel(e);else if(this.getInfoWindow()){var s=this.getInfoWindow().getPoint();this.temp._cPixel=this.pointToPixel(s),this.temp._cPoint=s}if(e||this.temp.infoWin&&this.temp.infoWin.isOpen()){var a=this.config.coordType==BMAP_COORD_LNGLAT?av.convertLL2MC(this.temp._cPoint):this.temp._cPoint;a=this.mapType==BMAP_PERSPECTIVE_MAP?X.convert2DTo3D(this.currentCity,a):a;var r=this.temp._cPixel,h=this.getZoomUnits(t);this.centerPoint=new g(a.lng+h*(this.width/2-r.x),a.lat-h*(this.height/2-r.y))}this.dispatchEvent(new aA("onzoomstart")),this.dispatchEvent(new aA("onzoomstartcode")),this.zoomLevel=t}}},zoomIn:function(t){this.zoomTo(this.zoomLevel+1,t)},zoomOut:function(t){this.zoomTo(this.zoomLevel-1,t)},panTo:function(t,e,i){if(t&&"Point"==t.toString()){var n=this.pointToPixel(t);t=this.config.coordType==BMAP_COORD_LNGLAT?X.convertLL2MC(t):t,t=this.mapType==BMAP_PERSPECTIVE_MAP?X.convert2DTo3D(this.currentCity,t):t;var o=Math.round(this.width/2),s=Math.round(this.height/2);Math.abs(o-n.x)>this.width||Math.abs(s-n.y)>this.height||1==e?this._panTo(o-n.x,s-n.y,t):this._panBy(o-n.x,s-n.y,{duration:i})}},_panTo:function(t,e,i){var n=this.temp;1!=n.operating&&(n.dragAni&&(n.dragAni.stop(),n.dragAni=null,this.dispatchEvent(new aA("onmoveend"))),this.dispatchEvent(new aA("onmovestart")),this._setPlatformPosition(this.offsetX+t,this.offsetY+e,i),this.dispatchEvent(new aA("onmoveend")))},panBy:function(t,e){t=Math.round(t)||0,e=Math.round(e)||0,Math.abs(t)<=this.width&&Math.abs(e)<=this.height&&!arguments[3]?this._panBy(t,e,{fps:arguments[2]}):this._panTo(t,e)},_panBy:function(t,e,i){if(1!=this.temp.operating){i=i||{},this.dispatchEvent(new aA("onmovestart"));var n=this,o=n.temp;o.pl=n.offsetX,o.pt=n.offsetY,o.tlPan&&o.tlPan.cancel(),o.dragAni&&(o.dragAni.stop(),o.dragAni=null,this.dispatchEvent(new aA("onmoveend"))),o.tlPan=new aK({fps:i.fps||n.config.fps,duration:i.duration||n.config.actionDuration,transition:i.transition||l.easeInOutQuad,render:function(i){this.terminative=n.temp.operating,n.temp.operating||n._setPlatformPosition(o.pl+Math.ceil(t*i),o.pt+Math.ceil(e*i))},finish:function(){n.dispatchEvent(new aA("onmoveend")),n.temp.tlPan=!1,1==n.temp.stopArrow&&(n.temp.stopArrow=!1,0!=n.temp.arrow&&n._arrow())}})}},addControl:function(t){t&&az(t._i)&&(t._i(this),this.dispatchEvent(new aA("onaddcontrol",t)))},removeControl:function(t){t&&az(t.remove)&&(t.remove(),this.dispatchEvent(new aA("onremovecontrol",t)))},addContextMenu:function(t){t&&"contextmenu"==t._type&&"function"==typeof t.initialize&&(t.initialize(this),this.dispatchEvent(new aA("onaddcontextmenu",t)))},removeContextMenu:function(t){t&&"contextmenu"==t._type&&"function"==typeof t.remove&&(this.dispatchEvent(new aA("onremovecontextmenu",t)),t.remove())},addOverlay:function(t){t&&az(t._i)&&(t._i(this),this.dispatchEvent(new aA("onaddoverlay",t)))},removeOverlay:function(t){t&&az(t.remove)&&(t.remove(),this.dispatchEvent(new aA("onremoveoverlay",t)))},clearOverlays:function(){this.dispatchEvent(new aA("onclearoverlays"))},addTileLayer:function(t){for(var e=0;e<this.tileMgr.tileLayers.length;e++){var i=this.tileMgr.tileLayers[e];if(i==t||i.getMapType()==t.getMapType())return}t&&"tilelayer"==t._type&&az(t.initialize)&&(t.initialize(this),this.dispatchEvent(new aA("onaddtilelayer",t)))},removeTileLayer:function(t){t&&"tilelayer"==t._type&&az(t.remove)&&(t.remove(),this.dispatchEvent(new aA("onremovetilelayer",t)))},getTileLayer:function(t){return this.tileMgr?this.tileMgr.getTileLayer(t):void 0},setMapType:function(t){if(this.mapType!=t){var e=this;e._enableMapChange=!1,e._changeMapType?e._changeMapType(t):au.load("3dmap",function(){e._asyncRegister(),e._changeMapType(t)})}},getTileId:function(t,e){var i=aM[this.mapType];if("object"!=typeof i)return null;var n=i.baseUnits*Math.pow(2,i.zoomLevelBase-e),o=parseInt(t.lng/n),s=parseInt(t.lat/n);return{row:o,column:s,level:e}},getViewTiles:function(){var t=this,e=this._viewTiles[t.mapType];return e},setCenter:function(t){this.panTo(t,!0)},centerAndZoom:function(t,e,i){function n(t,e,i){if(t.centerPoint=new g(i.lng,i.lat),t.defaultZoomLevel=t.defaultZoomLevel||t.zoomLevel,t.defaultCenter=t.defaultCenter||t.centerPoint,!t.loaded){var n=new y(-21364736,-10616832,23855104,15859712),o=new aj("baidu",n,"百度地图"),s=new G({mapType:t.mapType,copyright:o});s.baseLayer=!0,t.addTileLayer(s)}e.pixel=t.pointToPixel(t.centerPoint,t.zoomLevel,!0),t.dispatchEvent(e)}if(t&&e){e=this._getProperZoom(e).zoom,this.lastLevel=this.zoomLevel||e,this.zoomLevel=e;var o=new aA("onload");if(o.point=t,o.zoom=e,!i){this.config.coordType==BMAP_COORD_LNGLAT&&(t=this.config.coordType==BMAP_COORD_LNGLAT?X.convertLL2MC(t):t);var s=this;this._setCorrectPts(),this.mapType!=BMAP_PERSPECTIVE_MAP||this._get3DHotspots?t=this.mapType==BMAP_PERSPECTIVE_MAP?X.convert2DTo3D(this.currentCity,t):t:(t=s.mapType==BMAP_PERSPECTIVE_MAP?X.convert2DTo3D(s.currentCity,t):t,n(s,o,t),s.config.zoomLevelMin=15,s.config.zoomLevelMax=20,au.load("3dmap",function(){s.temp.overlayDiv.appendChild(s.divhs),s._clear3DHotspots(),s._asyncRegister(),s.loaded||(s.addEventListener("zoomend",s._get3DHotspots),s.addEventListener("moveend",s._get3DHotspots)),s._get3DHotspots()}))}(this.mapType!=BMAP_PERSPECTIVE_MAP||this.mapType==BMAP_PERSPECTIVE_MAP&&this._get3DHotspots)&&(n(this,o,t),this.mapType==BMAP_PERSPECTIVE_MAP&&this._get3DHotspots()),this.dispatchEvent(new aA("oncenterandzoom"))}},reset:function(){this.centerAndZoom(this.defaultCenter,this.defaultZoomLevel,!0)},enableDragging:function(){this.config.enableDragging=!0},disableDragging:function(){this.config.enableDragging=!1},enableInertialDragging:function(){this.config.enableInertialDragging=!0},disableInertialDragging:function(){this.config.enableInertialDragging=!1},enableScrollWheelZoom:function(){this.config.enableWheelZoom=!0},disableScrollWheelZoom:function(){this.config.enableWheelZoom=!1},enableContinuousZoom:function(){this.config.enableContinuousZoom=!0},disableContinuousZoom:function(){this.config.enableContinuousZoom=!1},enableResizeOnCenter:function(){this.config.enableResizeOnCenter=!0},disableResizeOnCenter:function(){this.config.enableResizeOnCenter=!1},enableClickPan:function(t){this.config.enableClickPan=!!t},enableDoubleClickZoom:function(){this.config.enableDblclickZoom=!0},disableDoubleClickZoom:function(){this.config.enableDblclickZoom=!1},enableKeyboard:function(){this.config.enableKeyboard=!0},disableKeyboard:function(){this.config.enableKeyboard=!1},getSize:function(){var t=new Z(this.container.clientWidth,this.container.clientHeight);return t},getCenter:function(){var t=this.centerPoint;return this.config.coordType==BMAP_COORD_LNGLAT?(this.mapType==BMAP_PERSPECTIVE_MAP&&(t=X.convert3DTo2D(this.currentCity,t)),t=av.convertMC2LL(t)):this.mapType==BMAP_PERSPECTIVE_MAP&&(t=X.convert3DTo2D(this.currentCity,t)),t},getZoom:function(){return this.zoomLevel},_getProperZoom:function(t){var e=this.config.zoomLevelMin,i=this.config.zoomLevelMax,n=!1;return e>t&&(n=!0,t=e),t>i&&(n=!0,t=i),{zoom:t,exceeded:n}},getContainer:function(){return this.container},getZoomUnits:function(t){var e=aM[this.mapType];if("object"!=typeof e)return null;var i=t||this.zoomLevel;return Math.pow(2,e.zoomLevelBase-i)*e.baseUnits/e.tileSize},pointToPixel:function(t,e,i){if(t){i||(t=this.config.coordType==BMAP_COORD_LNGLAT?X.convertLL2MC(t):t,t=this.mapType==BMAP_PERSPECTIVE_MAP?X.convert2DTo3D(this.currentCity,t):t);var n=this.getZoomUnits(e),o=Math.round((t.lng-this.centerPoint.lng)/n+this.width/2),s=Math.round((this.centerPoint.lat-t.lat)/n+this.height/2);return new aN(o,s)}},pixelToPoint:function(t,e,i){if(t){var n=this.getZoomUnits(e),o=this.centerPoint.lng+n*(t.x-this.width/2),s=this.centerPoint.lat-n*(t.y-this.height/2),a=new g(o,s);if(!i)if(this.mapType==BMAP_PERSPECTIVE_MAP)if(this.config.coordType==BMAP_COORD_LNGLAT){var r=X.convert3DTo2D(this.currentCity,a);a=X.convertMC2LL(r)}else a=this.mapType==BMAP_PERSPECTIVE_MAP?X.convert3DTo2D(this.currentCity,a):a;else this.config.coordType==BMAP_COORD_LNGLAT&&(a=this.config.coordType==BMAP_COORD_LNGLAT?X.convertMC2LL(a):a);return a}},pointToOverlayPixel:function(t,e,i){var n=this.pointToPixel(t,e,i);if(n)return n.x-=this.offsetX,n.y-=this.offsetY,n},overlayPixelToPoint:function(t,e){if(t){var i=new aN(t.x,t.y);return i.x+=this.offsetX,i.y+=this.offsetY,this.pixelToPoint(i,e)}},lnglatToMercator:function(t,e){var i=new g(t,e),n=X.convertLL2MC(i);return[n.lng,n.lat]},mercatorToLnglat:function(t,e){if(isNaN(t)||isNaN(e))return[];t=parseFloat(t),e=parseFloat(e);var i=new g(t,e),n=X.convertMC2LL(i);return[n.lng,n.lat]},getBounds:function(){if(!this.isLoaded())return new y;var t=arguments[0]||{},e=t.margins||[0,0,0,0],i=t.level||null,n=this.pixelToPoint({x:e[3],y:this.height-e[2]},i,!0),o=this.pixelToPoint({x:this.width-e[1],y:e[0]},i,!0);return this.config.coordType==BMAP_COORD_LNGLAT&&(n=X.convertMC2LL(n),o=X.convertMC2LL(o)),this.mapType==BMAP_PERSPECTIVE_MAP&&(n=X.convert3DTo2D(this.currentCity,n),o=X.convert3DTo2D(this.currentCity,o)),new y(n.lng,n.lat,o.lng,o.lat)},setConfig:function(t){if(t)for(var e in t)typeof this.config[e]==typeof t[e]&&(this.config[e]=t[e])},isLoaded:function(){return!!this.loaded},_getBestLevel:function(t,e){var i=aM[this.mapType];if(!i)return this.getZoom();for(var n=e.margins||[10,10,10,10],o=e.zoomFactor||0,s=n[1]+n[3],a=n[0]+n[2],r=i.zoomLevelMin,h=i.zoomLevelMax,l=h;l>=r;l--){var c=this.getZoomUnits(l);if((t.maxX-t.minX)/c<this.width-s&&(t.maxY-t.minY)/c<this.height-a)break}return l+=o,r>l&&(l=r),l>h&&(l=h),l},getViewport:function(t,e){var i={center:this.getCenter(),zoom:this.getZoom()};if(!t||0==t.length)return i;e=e||{};var n=[],o=[];if(this.config.coordType==BMAP_COORD_LNGLAT)for(var s=0,a=t.length;a>s;s++)n.push(av.convertLL2MC(t[s]));else n=t;if(this.mapType!=BMAP_PERSPECTIVE_MAP)o=n;else for(var s=0,a=n.length;a>s;s++)n[s]&&o.push(av.convert2DTo3D(this.currentCity,n[s]));for(var r=new y,s=o.length-1;s>=0;s--)r.extend(o[s]);if(r.isEmpty())return i;var h=r.getCenter(),l=this._getBestLevel(r,e);if(e.margins){var c=e.margins,u=(c[1]-c[3])/2,p=(c[0]-c[2])/2,f=this.getZoomUnits(l);h.lng=h.lng+f*u,h.lat=h.lat+f*p}return this.mapType==BMAP_PERSPECTIVE_MAP&&(h=av.convert3DTo2D(this.currentCity,h)),this.config.coordType==BMAP_COORD_LNGLAT&&(h=av.convertMC2LL(h)),{center:h,zoom:l}},setViewport:function(t,e){var i;i=t&&t.center?t:this.getViewport(t,e),e=e||{};var n=e.delay||200;if(i.zoom==this.zoomLevel&&0!=e.enableAnimation){var o=this;setTimeout(function(){o.panTo(i.center,!1,210)},n)}else this.centerAndZoom(i.center,i.zoom)},addSpots:function(t,e){if(t&&0!=t.length){e=e||{};var i=e.zIndex||0,n="undefined"==typeof e.enableMultiResponse?!0:!!e.enableMultiResponse;this.spotsPool=this.spotsPool||{};var o="sp"+this.temp.spotsGuid++;this.spotsPool[o]={spots:t.slice(0),zIndex:i,enableMultiResponse:n};var s=this;return au.load("hotspot",function(){s._asyncRegister()}),o}},getSpots:function(t){return this.spotsPool[t]&&this.spotsPool[t].spots||[]},removeSpots:function(t){t&&this.spotsPool[t]&&delete this.spotsPool[t]},clearSpots:function(){delete this.spotsPool},setBounds:function(t){aM[this.mapType].bounds=new y(t.minX,t.minY,t.maxX,t.maxY)},getCoordType:function(){return this.config.coordType},getPanes:function(){return this._panes},getInfoWindow:function(){return this.temp.infoWin&&this.temp.infoWin.isOpen()?this.temp.infoWin:null},getDistance:function(t,e){if(t&&e){var i=0;return i=this.config.coordType==BMAP_COORD_LNGLAT?X.getDistanceByLL(t,e):X.getDistanceByMC(t,e)}},getOverlays:function(){var t=[],e=this._overlays,i=this._customOverlays;if(e)for(var n in e)e[n]instanceof aJ&&t.push(e[n]);if(i)for(var n=0,o=i.length;o>n;n++)t.push(i[n]);return t},getMapType:function(){return this.mapType},_asyncRegister:function(){for(var t=this.temp.registerIndex;t<aW._register.length;t++)aW._register[t](this);this.temp.registerIndex=t},_setCorrectPts:function(){var t=aM[BMAP_PERSPECTIVE_MAP].citys;for(var e in t){var i=(t[e][1],t[e][0]);if(e==this.currentCity){this.mapType==BMAP_PERSPECTIVE_MAP&&this.setBounds(i);break}}},setCurrentCity:function(t){var e=this;this.mapType==BMAP_PERSPECTIVE_MAP&&au.load("3dmap",function(){e._asyncRegister(),e.addEventListener("zoomend",e._get3DHotspots),e.addEventListener("moveend",e._get3DHotspots)}),this._clear3DHotspots&&this._clear3DHotspots();var i=aM[BMAP_PERSPECTIVE_MAP].citys;this.currentCity=this._get3DCityCode(t),this.cityCode=i[this.currentCity][2],this._setCorrectPts()},_get3DCityCode:function(t){if(!t)return"bj";var e=aU.cityNames;for(var i in e)if(t.search(i)>-1||t.search(e[i])>-1)return e[i];return"bj"},setDefaultCursor:function(t){this.config.defaultCursor=t,this.platform&&(this.platform.style.cursor=this.config.defaultCursor)},getDefaultCursor:function(){return this.config.defaultCursor},setDraggingCursor:function(t){this.config.draggingCursor=t},getDraggingCursor:function(){return this.config.draggingCursor},detectModernBrowser:function(){return 9==m.Browser.ie?!1:aC("transform")},canvas2dMapEnabled:function(){return map.config.enableCanvas2dMap},refreshPersonalMap:function(t){var e=new aA("onrefreshpersonalmap");e.spots=t,this.dispatchEvent(e)},isCanvasMap:function(){return this.canvas2dMapEnabled()&&"B_NORMAL_MAP"===this.getMapType()?!0:!1},getPersonalMapCoordByUid:function(t){var e=this.Canvas2dMapMgr._labelClick,i=e.findLabelByUid(t);return i?new g(i.iconPos.geoX,i.iconPos.geoY):null}}),window.BMAP_NORMAL_MAP="B_NORMAL_MAP",window.BMAP_PERSPECTIVE_MAP="B_DIMENSIONAL_MAP",window.BMAP_SATELLITE_MAP="B_SATELLITE_MAP",window.BMAP_HYBRID_MAP="B_STREET_MAP",window.BMAP_COORD_LNGLAT=0,window.BMAP_COORD_MERCATOR=1,window.BMAP_SYS_DRAWER=0,window.BMAP_SVG_DRAWER=1,window.BMAP_VML_DRAWER=2,window.BMAP_CANVAS_DRAWER=3,window._addStat=function(t,e){if(t){e=e||{};var i="";for(var n in e)i=i+"&"+n+"="+encodeURIComponent(e[n]);var o=function(t){t&&(_addStat._sending=!0,setTimeout(function(){_addStat._img.src="http://api.map.baidu.com/images/blank.gif?"+t.src},50))},s=function(){var t=_addStat._reqQueue.shift();t&&o(t)},a=(1e8*Math.random()).toFixed(0);_addStat._sending?_addStat._reqQueue.push({src:"t="+a+"&code="+t+i}):o({src:"t="+a+"&code="+t+i}),_addStat._binded||(m.on(_addStat._img,"load",function(){_addStat._sending=!1,s()}),m.on(_addStat._img,"error",function(){_addStat._sending=!1,s()}),_addStat._binded=!0)}},window._addStat._reqQueue=[],window._addStat._img=new Image;var aM={B_NORMAL_MAP:{tileUrls:["http://online1.map.bdimg.com/tile/","http://online2.map.bdimg.com/tile/","http://online3.map.bdimg.com/tile/"],tileSize:256,baseUnits:256,zoomLevelMin:3,zoomLevelMax:19,zoomLevelBase:18,errorUrl:aU.imgPath+"bg.png",bounds:new y(-21364736,-10616832,23855104,15859712),imgExtend:"png"},B_DIMENSIONAL_MAP:{tileUrls:["http://d0.map.baidu.com/resource/mappic/","http://d1.map.baidu.com/resource/mappic/","http://d2.map.baidu.com/resource/mappic/","http://d3.map.baidu.com/resource/mappic/"],tileSize:256,baseUnits:256,zoomLevelMin:15,zoomLevelMax:20,zoomLevelBase:20,errorUrl:aU.imgPath+"bg.png",bounds:new y(-21364736,-10616832,23855104,15859712),imgExtend:"jpg",hotspotUrl:["http://d0.map.baidu.com/resource/js/map/","http://d1.map.baidu.com/resource/js/map/","http://d2.map.baidu.com/resource/js/map/","http://d3.map.baidu.com/resource/js/map/"],entityUrl:"http://d0.map.baidu.com/resource/js/entity/",citys:{bj:[new y(524288,9363456,727040,9474048),new y(12821123.68,4784960.94,12958550,4862821.56),2],sh:[new y(983040,8890369,1130495,8994816),new y(13507877.45,3640466.88,13537325.71,3658712.59),4],gz:[new y(983200,1048776,1212200,1236792),new y(12585645.62,2587467.79,12657708.96,2656299.78),1],sz:[new y(947240,1023316,1246028,1208124),new y(12669674.93,2552766.98,12727655.99,2583802.97),14],quanzhou:[new y(531634,531227,552903,580087),new y(13200055.96,2842106.96,13210201.95,2850700.89),12],kunming:[new y(544898,533594,592678,576352),new y(11428412.04,2859931,11438338.95,2867685),8],fuzhou:[new y(561776,542595,591062,572664),new y(13278396.01,2987362.98,13287710.89,2995040.02),27],dongguan:[new y(529516,510966,611906,553625),new y(12657432.89,2615687.01,12671200.92,2630107.02),16],wuhan:[new y(528560,503456,629708,594224),new y(12712634.04,3547374.03,12740635.98,3565780.02),21],taiyuan:[new y(557729,542071,609414,593653),new y(12525406.98,4522867.92,12537419.04,4540811.98),24],bengbu:[new y(537793,534291,567182,551012),new y(13064114.01,3861560.02,13070216.06,3865528.01),25],yancheng:[new y(548741,535609,576543,565433),new y(13371399,3916352.01,13378620.04,3926347.01),32],yiwu:[new y(522885,524554,576249,547628),new y(13363048.95,3391847.51,13371668.96,3398527.58),7]}},B_SATELLITE_MAP:{tileUrls:["http://shangetu0.map.bdimg.com/it/","http://shangetu1.map.bdimg.com/it/","http://shangetu2.map.bdimg.com/it/"],tileSize:256,baseUnits:256,zoomLevelMin:3,zoomLevelMax:19,zoomLevelBase:18,errorUrl:aU.imgPath+"bg.png",bounds:new y(-21364736,-10616832,23855104,15859712),imgExtend:"png"},B_STREET_MAP:{tileUrls:["http://online0.map.bdimg.com/tile/","http://online1.map.bdimg.com/tile/","http://online2.map.bdimg.com/tile/"],tileSize:256,baseUnits:256,zoomLevelMin:3,zoomLevelMax:19,zoomLevelBase:18,errorUrl:aU.imgPath+"bg.png",bounds:new y(-21364736,-10616832,23855104,15859712),imgExtend:"png"},BMAP_CUSTOM_LAYER:{tileUrls:[""],tileSize:256,baseUnits:256,zoomLevelMin:1,zoomLevelMax:19,zoomLevelBase:18,errorUrl:aU.imgPath+"blank.gif",bounds:new y(-21364736,-10616832,23855104,15859712),imgExtend:"png"}};m.extend(n,{num:{bj:{num:Math.sin(Math.PI/4),num2:Math.sin(Math.PI/6)},other:{num:Math.sin(Math.PI/4),num2:Math.sin(Math.PI/4)}},correct_pts:{},_hostUrl:"/?qt=getreferencepoint&",_checkReferencePoint:function(t,e){var i=function(t){return t.instance[t.method].apply(t.instance,t.arguments)};if(n.correct_pts[t])return i(e);var o=this,s=this._hostUrl+"c="+t+"&t="+(new Date).getTime(),a=this._hostUrl+"t="+(new Date).getTime();if(t){var r=m.ajax.request(s,{async:!1}),h=new Function("return ("+r.responseText+")")();return n.correct_pts[t]=h[t],m.ajax.request(a,{onsuccess:function(t,e){var i=new Function("return ("+e+")")();o._setCoordTrans(i)}}),i(e)}var r=m.ajax.request(a,{async:!1}),l=new Function("return ("+r.responseText+")")();return o._setCoordTrans(l),i(e)},_setCoordTrans:function(t){for(var e=0,i=t.length;i>e;e++){var o=t[e];for(var s in o)n.correct_pts[s]=o[s]}},getLnglatIndex:function(t,e,i){for(var n=0,o=0,s=1e7,a=1e9,r=0;r<this.correct_pts[t].length;r++){var h=this.getDis(this.correct_pts[t][r].x,this.correct_pts[t][r].y,e,i);a>h&&(s>h?(a=s,s=h,o=n,n=r):(sedMinDis=h,o=r))}return{lt:n,rb:o}},getOMapIndex_mm:function(t,e,i){for(var n=0,o=0,s=1294723e3,a=1294723e3,r=0;r<this.correct_pts[t].length;r++){var h=this.getDis(this.correct_pts[t][r].utm_x,this.correct_pts[t][r].utm_y,e,i);a>h&&(s>h?(a=s,s=h,o=n,n=r):(sedMinDis=h,o=r))}return{lt:n,rb:o}},getDis:function(t,e,i,n){return Math.abs(t-i)+Math.abs(e-n)},toMap:function(t,e,i){var n=this.num[t]?this.num[t]:this.num.other,o=(e-i)*n.num,s=(e+i)*n.num*n.num2;return{x:o,y:s}},fromMap:function(t,e,i){var n=this.num[t]?this.num[t]:this.num.other;i/=n.num2;var o=(e+i)/(2*n.num),s=(i-e)/(2*n.num);return{x:o,y:s}},getDgPix_mm:function(t,e,i){var n=this.fromMap(t,this.correct_pts[t][e].x,this.correct_pts[t][e].y),o=this.fromMap(t,this.correct_pts[t][i].x,this.correct_pts[t][i].y),s=n.x,a=n.y,r=o.x,h=o.y,l=this.correct_pts[t][e].utm_x,c=this.correct_pts[t][e].utm_y,u=this.correct_pts[t][i].utm_x,p=this.correct_pts[t][i].utm_y,f=Math.abs(1e5*(u-l)/(r-s)),d=Math.abs(1e5*(p-c)/(h-a));return{j:f,w:d,x:1e5/f,y:1e5/d}},getPx_mm:function(t,e,i,n,o){var s=this.correct_pts[t][n],a=this.correct_pts[t][n],r=this.getDgPix_mm(t,n,o),h=this.fromMap(t,s.x,s.y),l=a.utm_x,c=a.utm_y,u=e,p=i,f=h.x,d=h.y,m=u-l,g=p-c,_=m*r.x+f,v=-g*r.y+d,y=this.toMap(t,_,v);return y},getJw_mm:function(t,e,i,n,o){var s=this.correct_pts[t][n],a=this.correct_pts[t][n],r=this.getDgPix_mm(t,n,o),h=this.fromMap(t,e,i),l=this.fromMap(t,s.x,s.y),c=a.utm_x,u=a.utm_y,p=l.x,f=l.y,d=h.x-p,m=f-h.y,g=d/r.x+c,_=m/r.y+u;return{lng:g,lat:_}},getOMap_pts:function(t,e){var i={instance:this,method:"_getOMap_pts",arguments:[t,e]};return this._checkReferencePoint(t,i)},_getOMap_pts:function(t,e){return this.getOMap_index(t,e.lng,e.lat,e.lt,e.rb)},getMapJw_pts:function(t,e){var i={instance:this,method:"_getMapJw_pts",arguments:[t,e]};return this._checkReferencePoint(t,i)},_getMapJw_pts:function(t,e){return this.getMapJw_index(t,e.lng,9998336-e.lat,e.lt,e.rb)},getOMap_mm:function(t,e,i){var n=this.getOMapIndex_mm(t,e,i);return this.getOMap_index(t,e,i,n.lt,n.rb)},getMapJw_mm:function(t,e,i){i=9998336-i;var n=this.getLnglatIndex(t,e,i);return this.getMapJw_index(t,e,i,n.lt,n.rb)},getMapJw_Array:function(t,e){var i={instance:this,method:"_getMapJw_Array",arguments:[t,e]};return this._checkReferencePoint(t,i)},_getMapJw_Array:function(t,e){for(var i=this.getLnglatIndex(t,e[0].lng,e[0].lat),n=new Array,o=0;o<e.length;o++){var s=this.getJw_mm(t,e[o].lng,e[o].lat,i.lt,i.rb);n[o]={lng:s.lng,lat:s.lat,lt:i.lt,rb:i.rb}}return n},getOMap_Array:function(t,e){var i={instance:this,method:"_getOMap_Array",arguments:[t,e]};return this._checkReferencePoint(t,i)},_getOMap_Array:function(t,e){for(var i=this.getOMapIndex_mm(t,e[0].lng,e[0].lat),n=new Array,o=0;o<e.length;o++){var s=this.getPx_mm(t,e[o].lng,e[o].lat,i.lt,i.rb);n[o]={lng:s.x,lat:s.y,lt:i.lt,rb:i.rb}}return n},getOMap_index:function(t,e,i,n,o){if(n&&o)var s={lt:n,rb:o};else var s=this.getOMapIndex_mm(t,e,i);var a=this.getPx_mm(t,e,i,s.lt,s.rb);return{x:Math.floor(a.x),y:9998336-Math.floor(a.y),lt:s.lt,rb:s.rb}},getMapJw_index:function(t,e,i,n,o){if(n&&o)var s={lt:n,rb:o};else var s=this.getLnglatIndex(t,e,i);var a=this.getJw_mm(t,e,i,s.lt,s.rb);return{lng:a.lng,lat:a.lat,lt:s.lt,rb:s.rb}}}),z.inherits(F,"DataRequest"),m.extend(z.prototype,{send:function(t,e){this.url=t,this.userData=e;var i=this,n=s("script");n.type="text/javascript",n.userData=e,n.setAttribute("defer","true"),n.defer=!0,n.loaded=!1,n.stime=(new Date).getTime(),n.addEventListener?(n.addEventListener("load",function(){i._loadData(i.objName,n)},!1),n.addEventListener("error",function(){i._loadError(i.objName,n)},!1)):n.attachEvent&&n.attachEvent("onreadystatechange",function(){var t=window.event.srcElement;n.timer=setInterval(function(){n.etime=(new Date).getTime();var e=parseInt(n.etime-n.stime);!t||"loaded"!=t.readyState&&"complete"!=t.readyState||(n.loaded=!0),1==n.loaded?(i._loadData(i.objName,n),clearInterval(n.timer)):e>5e3&&(i._loadError(i.objName,n),clearInterval(n.timer))},5)}),n.charset=i.charset,n.src=i.url,document.getElementsByTagName("head")[0].appendChild(n)},_loadData:function(t,e){var i=window[t],n=new aA("onloaded");n.data=i;for(var o in e.userData)!n[o]&&e.userData[o]&&(n[o]=e.userData[o]);this.dispatchEvent(n),e.parentNode&&e.parentNode.removeChild(e),e=null},_loadError:function(t,e){e.parentNode&&e.parentNode.removeChild(e),e=null}});var aL={request:function(t){var e=s("script",{src:t,type:"text/javascript",charset:"utf-8"});e.addEventListener?e.addEventListener("load",function(t){var e=t.target;e.parentNode.removeChild(e)},!1):e.attachEvent&&e.attachEvent("onreadystatechange",function(){var t=window.event.srcElement;!t||"loaded"!=t.readyState&&"complete"!=t.readyState||t.parentNode.removeChild(t)}),setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(e),e=null},1)}};aK.INFINITE="INFINITE",aK.prototype.start=function(){this._beginTime=B(),this._endTime=this._beginTime+this._opts.duration,this._launch()},aK.prototype.add=function(t){this._anis.push(t)},aK.prototype._launch=function(){var t=this,e=B();if(e>=t._endTime){if(az(t._opts.render)&&t._opts.render(t._opts.transition(1)),az(t._opts.finish)&&t._opts.finish(),t._anis.length>0){var i=t._anis[0];i._anis=[].concat(t._anis.slice(1)),i.start()}}else t.schedule=t._opts.transition((e-t._beginTime)/t._opts.duration),az(t._opts.render)&&t._opts.render(t.schedule),t.terminative||(t._timer=setTimeout(function(){t._launch()},1e3/t._opts.fps))},aK.prototype.stop=function(t){this.terminative=!0;for(var e=0;e<this._anis.length;e++)this._anis[e].stop(),this._anis[e]=null;this._anis.length=0,this._timer&&(clearTimeout(this._timer),this._timer=null),this._opts.onStop(this.schedule),t&&(this._endTime=this._beginTime,this._launch())},aK.prototype.cancel=function(){this._timer&&clearTimeout(this._timer),this._endTime=this._beginTime,this.schedule=0},aK.prototype.setFinishCallback=function(t){this._anis.length>0?this._anis[this._anis.length-1]._opts.finish=t:this._opts.finish=t};var l={linear:function(t){return t},reverse:function(t){return 1-t},easeInQuad:function(t){return t*t},easeInCubic:function(t){return Math.pow(t,3)},easeOutQuad:function(t){return-(t*(t-2))},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutQuad:function(t){return.5>t?t*t*2:-2*(t-2)*t-1},easeInOutCubic:function(t){return.5>t?4*Math.pow(t,3):4*Math.pow(t-1,3)+1},easeInOutSine:function(t){return(1-Math.cos(Math.PI*t))/2}};l["ease-in"]=l.easeInQuad,l["ease-out"]=l.easeOutQuad,m.extend(au,{Request:{INITIAL:-1,WAITING:0,COMPLETED:1},Dependency:{control:[],marker:[],poly:["marker"],infowindow:["marker"],hotspot:["poly"],menu:[],tools:["marker","poly"],oppc:[],opmb:[],"3dmap":["hotspot"]},preLoaded:{},Config:{_baseUrl:"../../../../../../../map.baidu.com/-qt=getmodules&v=1.1&t=20150415061301"/*tpa=http://map.baidu.com/?qt=getmodules&v=1.1&t=20150415061301*/,_timeout:5e3},delayFlag:!1,Module:{_modules:{},_arrMdls:[]},load:function(t,e,i){var n=this.current(t);if(n._status==this.Request.COMPLETED)return void(i&&e());if(n._status==this.Request.INITIAL){this.combine(t),this.pushUniqueMdl(t);var o=this;0==o.delayFlag&&(o.delayFlag=!0,window.setTimeout(function(){var t=o.Config._baseUrl+"&mod="+o.Module._arrMdls.join(",");aL.request(t),o.Module._arrMdls.length=0,o.delayFlag=!1},1)),n._status=this.Request.WAITING}n._callbacks.push(e)},combine:function(t){if(t&&this.Dependency[t])for(var e=this.Dependency[t],i=0;i<e.length;i++)this.combine(e[i]),this.Module._modules[e[i]]||this.pushUniqueMdl(e[i])},pushUniqueMdl:function(t){for(var e=0;e<this.Module._arrMdls.length;e++)if(this.Module._arrMdls[e]==t)return;this.Module._arrMdls.push(t)},run:function(a0,a2){var aZ=this.current(a0);try{eval(a2)}catch(a3){return}aZ._status=this.Request.COMPLETED;for(var a1=0,aY=aZ._callbacks.length;aY>a1;a1++)aZ._callbacks[a1]();aZ._callbacks.length=0},check:function(t,e){var i=this;i.timeout=setTimeout(function(){var n=i.Module._modules[t]._status;n!=i.Request.COMPLETED?(i.remove(t),i.load(t,e)):clearTimeout(i.timeout)},i.Config._timeout)},current:function(t){var e;return this.Module._modules[t]||(this.Module._modules[t]={},this.Module._modules[t]._status=this.Request.INITIAL,this.Module._modules[t]._callbacks=[]),e=this.Module._modules[t]},remove:function(t){var e=this.current(t);delete e}}),window._jsload=function(t,e){au.run(t,e)},Q.inherits(F,"Control"),m.extend(Q.prototype,{initialize:function(t){return this._map=t,this._container?(t.container.appendChild(this._container),this._container):void 0},_i:function(t){!this._container&&this.initialize&&az(this.initialize)&&(this._container=this.initialize(t)),this._opts=this._opts||{printable:!1},this._setStyle(),this._setPosition(),this._container&&(this._container._jsobj=this)},_setStyle:function(){var t=this._container;if(t){var e=t.style;e.position="absolute",e.zIndex=this._cZIndex||"10",e.MozUserSelect="none",this._opts.printable||m.ac(t,"BMap_noprint"),m.on(t,"contextmenu",aG)}},remove:function(){this._map=null,this._container&&(this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container._jsobj=null,this._container=null)},_render:function(){return this._container=ab(this._map.container,"<div unselectable='on'></div>"),0==this._visible&&(this._container.style.display="none"),this._container},_setPosition:function(){this.setAnchor(this._opts.anchor)},setAnchor:function(t){(this.anchorFixed||"number"!=typeof t||isNaN(t)||BMAP_ANCHOR_TOP_LEFT>t||t>BMAP_ANCHOR_BOTTOM_RIGHT)&&(t=this.defaultAnchor),this._opts.offset=this._opts.offset||this.defaultOffset;var e=this._opts.anchor;if(this._opts.anchor=t,this._container){var i=this._container,n=this._opts.offset.width,o=this._opts.offset.height;switch(i.style.left=i.style.top=i.style.right=i.style.bottom="auto",t){case BMAP_ANCHOR_TOP_LEFT:i.style.top=o+"px",i.style.left=n+"px";break;case BMAP_ANCHOR_TOP_RIGHT:i.style.top=o+"px",i.style.right=n+"px";break;case BMAP_ANCHOR_BOTTOM_LEFT:i.style.bottom=o+"px",i.style.left=n+"px";break;case BMAP_ANCHOR_BOTTOM_RIGHT:i.style.bottom=o+"px",i.style.right=n+"px"}var s=["TL","TR","BL","BR"];m.rc(this._container,"anchor"+s[e]),m.ac(this._container,"anchor"+s[t])}},getAnchor:function(){return this._opts.anchor},setOffset:function(t){!t||t&&"Size"!=t.toString()||(this._opts.offset=new Z(t.width,t.height),this._container&&this.setAnchor(this._opts.anchor))},getOffset:function(){return this._opts.offset},getDom:function(){return this._container},show:function(){1!=this._visible&&(this._visible=!0,this._container&&(this._container.style.display=""),this.dispatchEvent(new aA("onshow")))},hide:function(){0!=this._visible&&(this._visible=!1,this._container&&(this._container.style.display="none"),this.dispatchEvent(new aA("onhide")))},isPrintable:function(){return!!this._opts.printable},isVisible:function(){return this._container||this._map?!!this._visible:!1}}),window.BMAP_ANCHOR_TOP_LEFT=0,window.BMAP_ANCHOR_TOP_RIGHT=1,window.BMAP_ANCHOR_BOTTOM_LEFT=2,window.BMAP_ANCHOR_BOTTOM_RIGHT=3,K.inherits(Q,"CopyrightControl"),m.extend(K.prototype,{initialize:function(t){return this._map=t,this._container},addCopyright:function(t){if(t&&"number"==typeof t.id&&!isNaN(t.id)){var e={minZoom:0,bounds:null,content:"",mapType:""};for(var i in t)e[i]=t[i];if(this._map){var n=e.minZoom;(-1==n||n<aM[this._map.mapType].zoomLevelMin||n>aM[this._map.mapType].zoomLevelMax)&&(e.minZoom=aM[this._map.mapType].zoomLevelMin),""==e.mapType||aM[e.mapType]||(e.mapType=BMAP_NORMAL_MAP)}var o=this.getCopyright(t.id);if(o)for(var s in e)o[s]=e[s];else this._copyrightCollection.push(e)}},getCopyright:function(t){for(var e=0,i=this._copyrightCollection.length;i>e;e++)if(this._copyrightCollection[e].id==t)return this._copyrightCollection[e]},getCopyrightCollection:function(){return this._copyrightCollection},removeCopyright:function(t){for(var e=0,i=this._copyrightCollection.length;i>e;e++)this._copyrightCollection[e].id==t&&(r=this._copyrightCollection.splice(e,1),e--,i=this._copyrightCollection.length)},_asyncLoadCode:function(){var t=this;au.load("control",function(){t._asyncDraw()})}}),al.inherits(Q,"OverviewMapControl"),m.extend(al.prototype,{initialize:function(t){return this._map=t,this._container
},setAnchor:function(t){Q.prototype.setAnchor.call(this,t)},changeView:function(){return this.changeView._running=!0,this._opts.isOpen=!this._opts.isOpen,this._container?void 0:void(this.changeView._running=!1)},setSize:function(t){t&&"Size"==t.toString()||(t=new Z(150,150)),t.width=t.width>0?t.width:150,t.height=t.height>0?t.height:150,this._opts.size=t},getSize:function(){return this.isOpen()?this._opts.size:new Z(this._btnWidth,this._btnHeight)},setOffset:function(t){t&&"Size"==t.toString()&&Q.prototype.setOffset.call(this,t)},remove:function(){Q.prototype.remove.call(this)},isOpen:function(){return this._opts.isOpen},_asyncLoadCode:function(){var t=this;au.load("control",function(){t._asyncDraw()})}}),window.BMAP_UNIT_METRIC="metric",window.BMAP_UNIT_IMPERIAL="us",V.inherits(Q,"ScaleControl"),m.extend(V.prototype,{initialize:function(t){return this._map=t,this._container},setColor:function(t){this._opts.color=t+""},getColor:function(){return this._opts.color},setUnit:function(t){this._opts.unit=this._units[t]&&this._units[t].name||this._opts.unit},getUnit:function(){return this._opts.unit},_asyncLoadCode:function(){var t=this;au.load("control",function(){t._asyncDraw()})}}),window.BMAP_NAVIGATION_CONTROL_LARGE=0,window.BMAP_NAVIGATION_CONTROL_SMALL=1,window.BMAP_NAVIGATION_CONTROL_PAN=2,window.BMAP_NAVIGATION_CONTROL_ZOOM=3,I.inherits(Q,"NavigationControl"),m.extend(I.prototype,{initialize:function(t){return this._map=t,this._container},setType:function(t){this._opts.type="number"==typeof t&&t>=BMAP_NAVIGATION_CONTROL_LARGE&&BMAP_NAVIGATION_CONTROL_ZOOM>=t?t:BMAP_NAVIGATION_CONTROL_LARGE},getType:function(){return this._opts.type},_asyncLoadCode:function(){var t=this;au.load("control",function(){t._asyncDraw()})}}),ag.inherits(Q,"MapTypeControl"),m.extend(ag.prototype,{initialize:function(t){return this._map=t,this._container},select:function(){},hide3DControl:function(){this._is3DControlShow=!1},show3DControl:function(){this._is3DControlShow=!0},streetMapMgr:function(t){this._map._isHybirdShow=t},getHeight:function(){return"B_SATELLITE_MAP"===this._map.mapType?86:60},_asyncLoadCode:function(){var t=this;au.load("control",function(){t._asyncDraw()})}}),j.inherits(F,"ContextMenu"),m.extend(j.prototype,{initialize:function(t){this._map=t},remove:function(){this._map=null},addItem:function(t){if(t&&"menuitem"==t._type&&""!=t._text&&!(t._width<=0)){for(var e=0,i=this._items.length;i>e;e++)if(this._items[e]===t)return;this._items.push(t),this._rItems.push(t)}},removeItem:function(t){if(t&&"menuitem"==t._type){for(var e=0,i=this._items.length;i>e;e++)this._items[e]===t&&(this._items[e].remove(),this._items.splice(e,1),i--);for(var e=0,i=this._rItems.length;i>e;e++)this._rItems[e]===t&&(this._rItems[e].remove(),this._rItems.splice(e,1),i--)}},addSeparator:function(){this._items.push({_type:"divider",_dIndex:this._dividers.length}),this._dividers.push({dom:null})},removeSeparator:function(t){if(this._dividers[t]){for(var e=0,i=this._items.length;i>e;e++)this._items[e]&&"divider"==this._items[e]._type&&this._items[e]._dIndex==t&&(this._items.splice(e,1),i--),this._items[e]&&"divider"==this._items[e]._type&&this._items[e]._dIndex>t&&this._items[e]._dIndex--;this._dividers.splice(t,1)}},getDom:function(){return this._container},show:function(){1!=this._isOpen&&(this._isOpen=!0)},hide:function(){0!=this._isOpen&&(this._isOpen=!1)},setCursor:function(t){t&&(this._opts.cursor=t)},getItem:function(t){return this._rItems[t]},enable:function(){this._enable=!0},disable:function(){this._enable=!1}}),L.inherits(F,"MenuItem"),m.extend(L.prototype,{initialize:function(t,e){this._map=t,this._contextmenu=e},remove:function(){this._contextmenu=null,this._map=null},setText:function(t){t&&(this._text=t+"")},getDom:function(){return this._container},enable:function(){this._enabled=!0},disable:function(){this._enabled=!1}}),m.extend(y.prototype,{isEmpty:function(){var t="number";return typeof this.minX!=t||typeof this.minY!=t||typeof this.maxX!=t||typeof this.maxY!=t},equals:function(t){return t&&"Bounds"==t.toString()?this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY:void 0},getMaxX:function(){return this.maxX},getMaxY:function(){return this.maxY},getMinX:function(){return this.minX},getMinY:function(){return this.minY},containsBounds:function(t){return t&&"Bounds"==t.toString()?t.minX>this.minX&&t.maxX<this.maxX&&t.minY>this.minY&&t.maxY<this.maxY:void 0},getCenterPoint:function(){return new g((this.minX+this.maxX)/2,(this.minY+this.maxY)/2)},getCenter:function(){return this.getCenterPoint()},intersects:function(t){if(t&&"Bounds"==t.toString()){if(Math.max(t.minX,t.maxX)<Math.min(this.minX,this.maxX)||Math.min(t.minX,t.maxX)>Math.max(this.minX,this.maxX)||Math.max(t.minY,t.maxY)<Math.min(this.minY,this.maxY)||Math.min(t.minY,t.maxY)>Math.max(this.minY,this.maxY))return null;var e=Math.max(this.minX,t.minX),i=Math.min(this.maxX,t.maxX),n=Math.max(this.minY,t.minY),o=Math.min(this.maxY,t.maxY);return new y(e,n,i,o)}},containsPoint:function(t){return t&&"Point"==t.toString()?t.lng>=this.minX&&t.lng<=this.maxX&&t.lat>=this.minY&&t.lat<=this.maxY:void 0},extend:function(t){if(t&&"Point"==t.toString()){var e=t.lng,i=t.lat;(!this.minX||this.minX>e)&&(this.minX=e),(!this.maxX||this.maxX<e)&&(this.maxX=e),(!this.minY||this.minY>i)&&(this.minY=i),(!this.maxY||this.maxY<i)&&(this.maxY=i)}},getIntersectLine:function(t){if(t&&"Line"==t.toString()){var e=t.sPoint,i=t.ePoint,n=[];if(e.lat==i.lat){if(e.lng==i.lng)return null;e.lat>this.minY&&e.lat<this.maxY;var t=new Line(n.lng,n.lat);return t}}},getMin:function(){return new g(this.minX,this.minY)},getMax:function(){return new g(this.maxX,this.maxY)},toString:function(){return"Bounds"}});var v=g.prototype;v.equals=function(t){return t&&"Point"==t.toString()?this.lat==t.lat&&this.lng==t.lng:void 0},v.toString=function(){return"Point"},x.inherits(F,"Area"),x.prototype={containsPoint:function(t){for(var e=0,i=0,n=this.points,o=0;o<n.length;o++)e=o==n.length-1?0:e+1,n[o].lat!=n[e].lat&&(t.lat>=n[o].lat&&t.lat<n[e].lat||t.lat>=n[e].lat&&t.lat<n[o].lat)&&t.lng<(n[e].lng-n[o].lng)*(t.lat-n[o].lat)/(n[e].lat-n[o].lat)+n[o].lng&&i++;return i%2>0?!0:!1},getQuad:function(t){return t.lng>=0?t.lat>=0?0:3:t.lat>=0?1:2}};var aO={undo:1,redo:2,zoom:4,drag:8,move:16,mousewheel:32,toolbarOperation:64,stdMapCtrlDrag:128,dblclick:256},at={_map:null,_html:"<div class='BMap_opMask' unselectable='on'></div>",_maskElement:null,_cursor:"default",inUse:!1,show:function(t){this._map||(this._map=t),this.inUse=!0,this._maskElement||this._createMask(t),this._maskElement.style.display="block"},_createMask:function(t){if(this._map||(this._map=t),this._map){var e=this._maskElement=ab(this._map.container,this._html);m.on(e,"mouseup",function(t){2==t.button&&aG(t)}),m.on(e,"contextmenu",aG),e.style.display="none"}},getDrawPoint:function(t,e,i){t=window.event||t;var n=t.offsetX||t.layerX||0,o=t.offsetY||t.layerY||0,s=t.target||t.srcElement;if(s!=at.getDom(this._map)&&1==e)for(;s&&s!=this._map.container;)0==s.clientWidth&&0==s.clientHeight&&s.offsetParent&&"td"==s.offsetParent.nodeName.toLowerCase()||(n+=s.offsetLeft,o+=s.offsetTop),s=s.offsetParent;return s!=at.getDom(this._map)&&s!=this._map.container||"undefined"==typeof n||"undefined"==typeof o||isNaN(n)||isNaN(o)?void 0:(i&&(n+=i.x,o+=i.y),this._map.pixelToPoint(new aN(n,o)))},hide:function(){this._map&&(this.inUse=!1,this._maskElement&&(this._maskElement.style.display="none"))},getDom:function(t){return this._maskElement||this._createMask(t),this._maskElement},setCursor:function(t){this._cursor=t||"default",this._maskElement&&(this._maskElement.style.cursor=this._cursor)}};P.inherits(m.BaseClass,"Overlay"),P.getZIndex=function(t,e){return(t=1*t)?(e&&e==BMAP_COORD_MERCATOR&&(t=X.convertMC2LL(new aW.Point(0,t)).lat),-1e5*t<<1):0},m.extend(P.prototype,{_i:function(t){!this.domElement&&az(this.initialize)&&(this.domElement=this.initialize(t),this.domElement&&(this.domElement.style.WebkitUserSelect="none")),this.draw()},initialize:function(){throw"initialize方法未实现"},draw:function(){throw"draw方法未实现"},remove:function(){this.domElement&&this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.domElement=null,this.dispatchEvent(new aA("onremove"))},hide:function(){m.hide(this.domElement)},show:function(){m.show(this.domElement)},dispose:function(){m.BaseClass.prototype.decontrol.call(this)}}),aW.register(function(t){function e(t,e){var i=s("div"),n=i.style;return n.position="absolute",n.top=n.left=n.width=n.height="0",n.zIndex=e,t.appendChild(i),i}t.temp.overlayDiv=t.overlayDiv=e(t.platform,200),t._panes.floatPane=e(t.temp.overlayDiv,800),t._panes.markerMouseTarget=e(t.temp.overlayDiv,700),t._panes.floatShadow=e(t.temp.overlayDiv,600),t._panes.labelPane=e(t.temp.overlayDiv,500),t._panes.markerPane=e(t.temp.overlayDiv,400),t._panes.mapPane=e(t.temp.overlayDiv,200)}),aJ.inherits(P,"OverlayInternal"),m.extend(aJ.prototype,{initialize:function(t){return this.map=t,m.BaseClass.call(this,this.hashCode),null},draw:function(){},remove:function(){this.map=null,this.decontrol(),P.prototype.remove.call(this)},hide:function(){0!=this._visible&&(this._visible=!1)},show:function(){1!=this._visible&&(this._visible=!0)},getDom:function(){return this.domElement},setConfig:function(t){t=t||{};for(var e in t)typeof this._config[e]==typeof t[e]&&(this._config[e]=t[e])},getPoint:function(t,e){if(!t)return this.point;var i=e?e.width:0,n=e?e.height:0;if(this.map){var o=this.map.pointToPixel(this.point);return this._config&&this._config.offset?(o.x=o.x+this._config.offset.width+i,o.y=o.y+this._config.offset.height+n):(o.x=o.x+i,o.y=o.y+n),this.map.pixelToPoint(o)}},setZIndex:function(t){this.zIndex=t},isVisible:function(){return this.domElement?!!this._visible:!1},enableMassClear:function(){this._config.enableMassClear=!0},disableMassClear:function(){this._config.enableMassClear=!1}}),aW.register(function(t){var e=new aw;e.map=t,t._overlays=e._overlays,t._customOverlays=e._customOverlays,t.addEventListener("load",function(t){e.draw(t)}),t.addEventListener("moveend",function(t){e.draw(t)}),t.addEventListener("resize",function(i){t.config.enableResizeOnCenter&&e.draw(i)}),m.Browser.ie&&m.Browser.ie<8||"BackCompat"==document.compatMode?t.addEventListener("zoomend",function(t){setTimeout(function(){e.draw(t)},20)}):t.addEventListener("zoomend",function(t){e.draw(t)}),t.addEventListener("maptypechange",function(t){e.draw(t)}),t.addEventListener("addoverlay",function(t){var i=t.target;if(i instanceof aJ)e._overlays[i.hashCode]||(e._overlays[i.hashCode]=i);else{for(var n=!1,o=0,s=e._customOverlays.length;s>o;o++)if(e._customOverlays[o]===i){n=!0;break}n||e._customOverlays.push(i)}}),t.addEventListener("removeoverlay",function(t){var i=t.target;if(i instanceof aJ)delete e._overlays[i.hashCode];else for(var n=0,o=e._customOverlays.length;o>n;n++)if(e._customOverlays[n]===i){e._customOverlays.splice(n,1);break}}),t.addEventListener("clearoverlays",function(){this.closeInfoWindow();for(var t in e._overlays)e._overlays[t]._config.enableMassClear&&(e._overlays[t].remove(),delete e._overlays[t]);for(var i=0,n=e._customOverlays.length;n>i;i++)0!=e._customOverlays[i].enableMassClear&&(e._customOverlays[i].remove(),e._customOverlays[i]=null,e._customOverlays.splice(i,1),i--,n--)}),t.addEventListener("infowindowopen",function(){var t=this.infoWindow;t&&(m.hide(t.popDom),m.hide(t.shadowDom))}),t.addEventListener("movestart",function(){this.getInfoWindow()&&this.getInfoWindow()._setOverflow()}),t.addEventListener("moveend",function(){this.getInfoWindow()&&this.getInfoWindow()._resetOverflow()})}),aw.prototype.draw=function(){for(var t in this._overlays)this._overlays[t].draw();if(m.each(this._customOverlays,function(t){t.draw()}),this.map.temp.infoWin&&this.map.temp.infoWin.setPosition(),aW.DrawerSelector){var e=aW.DrawerSelector.getDrawer(this.map);e.setPalette()}},ay.inherits(aJ,"Graph"),ay.getGraphPoints=function(t){var e=[];if(!t)return e;if("string"==typeof t){var i=t.split(";");m.each(i,function(t){var i=t.split(",");e.push(new g(i[0],i[1]))})}return t.constructor==Array&&t.length>0&&(e=t),e},ay.parseTolerance={0:[.09,.005,1e-4,1e-5],1:[9e3,500,10,1]},m.extend(ay.prototype,{initialize:function(t){return this.map=t,null},draw:function(){},setPoints:function(t){this._parseCache.length=0,this.points=ay.getGraphPoints(t).slice(0),this._calcBounds()},_calcBounds:function(){if(this.points){var t=this;t._bounds=new y,m.each(this.points,function(e){t._bounds.extend(e)})}},getPoints:function(){return this.points},setPointAt:function(t,e){e&&this.points[t]&&(this._parseCache.length=0,this.points[t]=new g(e.lng,e.lat),this._calcBounds())},setStrokeColor:function(t){this._config.strokeColor=t},getStrokeColor:function(){return this._config.strokeColor},setStrokeLineCap:function(t){this._config.strokeLineCap=t},getStrokeLineCap:function(){return this._config.strokeLineCap},setStrokeLineJoin:function(t){this._config.strokeLineJoin=t},getStrokeLineJoin:function(){return this._config.strokeLineJoin},setStrokeWeight:function(t){t>0&&(this._config.strokeWeight=t)},getStrokeWeight:function(){return this._config.strokeWeight},setStrokeOpacity:function(t){!t||t>1||0>t||(this._config.strokeOpacity=t)},getStrokeOpacity:function(){return this._config.strokeOpacity},setFillOpacity:function(t){t>1||0>t||(this._config.fillOpacity=t)},getFillOpacity:function(){return this._config.fillOpacity},setStrokeStyle:function(t){("solid"==t||"dashed"==t||"dotted"==t)&&(this._config.strokeStyle=t)},getStrokeStyle:function(){return this._config.strokeStyle},setFillColor:function(t){this._config.fillColor=t||""},getFillColor:function(){return this._config.fillColor},getBounds:function(){return this._bounds},remove:function(){this.map&&this.map.removeEventListener("onmousemove",this._graphMouseEvent),aJ.prototype.remove.call(this),this._parseCache.length=0},enableEditing:function(){this._config.enableEditing=!0},disableEditing:function(){this._config.enableEditing=!1}}),m.Browser.ie&&document.namespaces&&!document.namespaces.olv&&document.namespaces.add("olv","urn:schemas-microsoft-com:vml"),an.inherits(aJ,"Division"),m.extend(an.prototype,{_addDom:function(){var t=this._config,e=this.content,i=['<div class="BMap_Division" style="position:absolute;'];i.push("width:"+t.width+"px;display:block;"),i.push("overflow:hidden;"),"none"!=t.borderColor&&i.push("border:"+t.lineStroke+"px "+t.lineStyle+" "+t.lineColor+";"),i.push("opacity:"+t.opacity+"; filter:(opacity="+100*t.opacity+")"),i.push("background:"+t.background+";"),i.push('z-index:60;">'),i.push(e),i.push("</div>"),this.domElement=ab(this.map.getPanes().markerMouseTarget,i.join(""))},initialize:function(t){return this.map=t,this._addDom(),this.domElement&&m.on(this.domElement,"mousedown",function(t){ak(t)}),this.domElement},draw:function(){var t=this.map.pointToOverlayPixel(this._config.point);this._config.offset=new Z(-Math.round(this._config.width/2)-Math.round(this._config.lineStroke),-Math.round(this._config.height/2)-Math.round(this._config.lineStroke)),this.domElement.style.left=t.x+this._config.offset.width+"px",this.domElement.style.top=t.y+this._config.offset.height+"px"},getPoint:function(){return this._config.point},_getPixel:function(){return this.map.pointToPixel(this.getPoint())},setPoint:function(t){this._config.point=t,this.draw()},setDimension:function(t,e){this._config.width=Math.round(t),this._config.height=Math.round(e),this.domElement&&(this.domElement.style.width=this._config.width+"px",this.domElement.style.height=this._config.height+"px",this.draw())}});var S=w.prototype;S.setImageUrl=function(t){t&&(this.imageUrl=t)},S.setPrintImageUrl=function(t){t&&(this.printImageUrl=t)},S.setSize=function(t){t&&(this.size=new Z(t.width,t.height))},S.setOffset=function(t){t&&(this.offset=new Z(t.width,t.height))},S.setImageOffset=function(t){t&&(this.imageOffset=new Z(t.width,t.height))},S.setInfoWindowOffset=function(t){t&&(this.infoWindowOffset=new Z(t.width,t.height))},S.toString=function(){return"Icon"},aD.inherits(m.BaseClass,"InfoWindow"),m.extend(aD.prototype,{setWidth:function(t){t=1*t,!t&&0!=t||isNaN(t)||0>t||(0!=t&&(220>t&&(t=220),t>730&&(t=730)),this._config.width=t)},setHeight:function(t){t=1*t,!t&&0!=t||isNaN(t)||0>t||(0!=t&&(60>t&&(t=60),t>650&&(t=650)),this._config.height=t)},setMaxWidth:function(t){t=1*t,!t&&0!=t||isNaN(t)||0>t||(0!=t&&(220>t&&(t=220),t>730&&(t=730)),this._config.maxWidth=t)},setTitle:function(t){this._config.title=t||""},setContent:function(t){this.content=t||""},setMaxContent:function(t){this._config.maxContent=t||""},redraw:function(){},enableAutoPan:function(){this._config.enableAutoPan=!0},disableAutoPan:function(){this._config.enableAutoPan=!1},enableCloseOnClick:function(){this._config.enableCloseOnClick=!0},disableCloseOnClick:function(){this._config.enableCloseOnClick=!1},enableMaximize:function(){this._config.enableMaximize=!0},disableMaximize:function(){this._config.enableMaximize=!1},show:function(){this._visible=!0},hide:function(){this._visible=!1},close:function(){this.hide()},dispose:function(){m.BaseClass.prototype.decontrol.call(this)},maximize:function(){this.isWinMax=!0},restore:function(){this.isWinMax=!1},setConfig:function(t){if(t)for(var e in t)typeof this._config[e]==typeof t[e]&&(this._config[e]=t[e])},isVisible:function(){return this.isOpen()},isOpen:function(){return!1},getPoint:function(){return this.overlay&&this.overlay.getPoint?this.overlay.getPoint():void 0},getOffset:function(){return this._config.offset},dispose:function(){m.BaseClass.prototype.decontrol.call(this)},toString:function(){return"InfoWindow"}}),D.prototype.openInfoWindow=function(t,e){if(t&&"InfoWindow"==t.toString()&&e&&"Point"==e.toString()){var i=this.temp;if(i.marker)i.marker.setPoint(e);else{var n=new w(aU.imgPath+"blank.gif",{width:1,height:1});i.marker=new J(e,{icon:n,width:1,height:1,offset:new Z(0,0),infoWindowOffset:new Z(0,0),clickable:!1}),i.marker._fromMap=1}this.addOverlay(i.marker),i.marker.show(),i.marker.openInfoWindow(t)}},D.prototype.closeInfoWindow=function(){var t=this.temp.infoWin||this.temp._infoWin;t&&t.overlay&&t.overlay.closeInfoWindow()},aJ.prototype.openInfoWindow=function(t){this.map&&(this.map.closeInfoWindow(),t._visible=!0,this.map.temp._infoWin=t,t.overlay=this,m.BaseClass.call(t,t.hashCode))},aJ.prototype.closeInfoWindow=function(){this.map&&this.map.temp._infoWin&&(this.map.temp._infoWin._visible=!1,this.map.temp._infoWin.decontrol(),this.map.temp._infoWin=null)},q.inherits(aJ,"Label"),m.extend(q.prototype,{setPoint:function(t){t&&"Point"==t.toString()&&!this.getMarker()&&(this.point=this._config.point=new g(t.lng,t.lat))},setContent:function(t){this.content=t},setOpacity:function(t){t>=0&&1>=t&&(this._config.opacity=t)},setOffset:function(t){t&&"Size"==t.toString()&&(this._config.offset=new Z(t.width,t.height))},getOffset:function(){return this._config.offset},setStyle:function(t){t=t||{},this._config.styles=m.extend(this._config.styles,t)},setStyles:function(t){return this.setStyle(t)},setTitle:function(t){this._config.title=t||""},getTitle:function(){return this._config.title},setMarker:function(t){this._marker=t,this.point=this._config.point=t?t.getPoint():null},getMarker:function(){return this._marker||null}}),window.BMAP_ANIMATION_DROP=1,window.BMAP_ANIMATION_BOUNCE=2,J.TOP_ZINDEX=P.getZIndex(-90)+1e6,J.DRAG_ZINDEX=J.TOP_ZINDEX+1e6,J.inherits(aJ,"Marker"),m.extend(J.prototype,{setIcon:function(t){t&&"Icon"==t.toString()&&(this._config.icon=t)},setIconClassName:function(t){this.iconDom&&(this.iconDom.className=t)},getIcon:function(){return this._config.icon},setLabel:function(t){t&&"Label"==t.toString()&&(this._config.label=t)},getLabel:function(){return this._config.label},enableDragging:function(){this._config.enableDragging=!0},disableDragging:function(){this._config.enableDragging=!1},setPoint:function(t){t&&"Point"==t.toString()&&(this.point=this._config.point=new g(t.lng,t.lat))},setTop:function(t,e){this._config.isTop=!!t,t&&(this._addi=e||0)},setTitle:function(t){this._config.title=t},getTitle:function(){return this._config.title||""},setOffset:function(t){t&&"Size"==t.toString()&&(this._config.offset=t)},getOffset:function(){return this._config.offset},setAnimation:function(t){this._animation=t}}),am.inherits(ay,"Polyline"),aR.inherits(am,"PolylineMultipart"),m.extend(aR.prototype,{setPoints:function(t){this._parseCache.length=0;var e=[];t&&t.constructor==Array&&(m.each(t,function(t){e.push(ay.getGraphPoints(t))}),this.points=e)}}),c.inherits(ay,"Polygon"),m.extend(c.prototype,{setPoints:function(t,e){this._userPoints=ay.getGraphPoints(t).slice(0);var i=ay.getGraphPoints(t).slice(0);i.length>1&&!i[0].equals(i[i.length-1])&&i.push(new g(i[0].lng,i[0].lat)),ay.prototype.setPoints.call(this,i,e)},setPointAt:function(t,e){this._userPoints[t]&&(this._userPoints[t]=new g(e.lng,e.lat),this.points[t]=new g(e.lng,e.lat),0!=t||this.points[0].equals(this.points[this.points.length-1])||(this.points[this.points.length-1]=new g(e.lng,e.lat)),this._calcBounds())},getPoints:function(){var t=this._userPoints;return 0==t.length&&(t=this.points),t}}),aa.parseTolerance={0:[.01,1e-4,1e-5,4e-6],1:[1e3,10,1,.4]},aa.inherits(c,"Circle"),m.extend(aa.prototype,{initialize:function(t){return this.map=t,this.points=this._getPerimeterPoints(this.point,this.radius),this._calcBounds(),null},getPoint:function(){return this.point},getCenter:function(){return this.point},setPoint:function(t){t&&(this.point=t)},setCenter:function(t,e){this.setPoint(t,e)},getRadius:function(){return this.radius},setRadius:function(t){this.radius=Math.abs(t)},_getPerimeterPoints:function(t,e){if(!t||!e||!this.map)return[];var i=this.map,n=t.lng,o=t.lat;if(i.config.coordType==BMAP_COORD_MERCATOR){var s=av.convertMC2LL(t);n=s.lng,o=s.lat}for(var a=[],r=e/6378800,h=Math.PI/180*o,l=Math.PI/180*n,c=0;360>c;c+=9){var u=Math.PI/180*c,p=Math.asin(Math.sin(h)*Math.cos(r)+Math.cos(h)*Math.sin(r)*Math.cos(u)),f=Math.atan2(Math.sin(u)*Math.sin(r)*Math.cos(h),Math.cos(r)-Math.sin(h)*Math.sin(p)),d=(l-f+Math.PI)%(2*Math.PI)-Math.PI,m=new g(d*(180/Math.PI),p*(180/Math.PI));a.push(i.config.coordType==BMAP_COORD_LNGLAT?m:X.convertLL2MC(m))}var _=a[0];return a.push(new g(_.lng,_.lat)),a}}),H.inherits(c,"Rectangle"),m.extend(H.prototype,{setPoints:function(t){if(t){var e=t[0],i=t[1];if(e&&i&&"Point"==e.toString()&&"Point"==i.toString()){var n=e,o=i,s=new g(n.lng,o.lat),a=new g(o.lng,n.lat),r=e;this.points=[n,s,o,a,r],this._calcBounds()}}},getPoints:function(){return[this.points[0],this.points[2]]}});var T={};aN.prototype.equals=function(t){return t?t.x==this.x&&t.y==this.y:!1},aN.prototype.toString=function(){return"Pixel"};var av=X;m.extend(X,{EARTHRADIUS:6370996.81,MCBAND:[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(t,e){if("undefined"==typeof t||"undefined"==typeof e)return 0;var i,n,o,s;return t=this.convertMC2LL(t),"undefined"==typeof t?0:(i=this.toRadians(t.lng),n=this.toRadians(t.lat),e=this.convertMC2LL(e),"undefined"==typeof e?0:(o=this.toRadians(e.lng),s=this.toRadians(e.lat),this.getDistance(i,o,n,s)))},getDistanceByLL:function(t,e){if("undefined"==typeof t||"undefined"==typeof e)return 0;t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74),e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74);var i,n,o,s;return i=this.toRadians(t.lng),o=this.toRadians(t.lat),n=this.toRadians(e.lng),s=this.toRadians(e.lat),this.getDistance(i,n,o,s)},convertMC2LL:function(t){var e,i;e=new g(Math.abs(t.lng),Math.abs(t.lat));for(var n=0;n<this.MCBAND.length;n++)if(e.lat>=this.MCBAND[n]){i=this.MC2LL[n];break}var o=this.convertor(t,i),t=new g(o.lng.toFixed(6),o.lat.toFixed(6));return t},convertLL2MC:function(t){var e,i;t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74),e=new g(t.lng,t.lat);for(var n=0;n<this.LLBAND.length;n++)if(e.lat>=this.LLBAND[n]){i=this.LL2MC[n];break}if(!i)for(var n=this.LLBAND.length-1;n>=0;n--)if(e.lat<=-this.LLBAND[n]){i=this.LL2MC[n];break}var o=this.convertor(t,i),t=new g(o.lng.toFixed(2),o.lat.toFixed(2));return t},convertor:function(t,e){if(t&&e){var i=e[0]+e[1]*Math.abs(t.lng),n=Math.abs(t.lat)/e[9],o=e[2]+e[3]*n+e[4]*n*n+e[5]*n*n*n+e[6]*n*n*n*n+e[7]*n*n*n*n*n+e[8]*n*n*n*n*n*n;return i*=t.lng<0?-1:1,o*=t.lat<0?-1:1,new g(i,o)}},getDistance:function(t,e,i,n){return this.EARTHRADIUS*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(e-t))},toRadians:function(t){return Math.PI*t/180},toDegrees:function(t){return 180*t/Math.PI},getRange:function(t,e,i){return null!=e&&(t=Math.max(t,e)),null!=i&&(t=Math.min(t,i)),t},getLoop:function(t,e,i){for(;t>i;)t-=i-e;for(;e>t;)t+=i-e;return t},convert2DTo3D:function(t,e){t||(t="bj");var i=n.getOMap_pts(t,e);return new g(i.x,i.y)},convert3DTo2D:function(t,e){t||(t="bj");var i=n.getMapJw_pts(t,e);return new g(i.lng,i.lat)},batch3DTo2D:function(t,e){t||(t="bj");var i=n.getMapJw_Array(t,e);return i},batch2DTo3D:function(t,e){t||(t="bj");var i=n.getOMap_Array(t,e);return i}}),Z.prototype.equals=function(t){return!(!t||this.width!=t.width||this.height!=t.height)},Z.prototype.toString=function(){return"Size"},aB.prototype._addLoadCbk=function(t){this._cbks.push(t)},aB.prototype._load=function(){this.img.src=FeBrowser.ie<=6&&FeBrowser.ie>0&&this._transparentPng?aU.imgPath+"blank.gif":this.src},aB.prototype._callCbks=function(){for(var t=this,e=0;e<t._cbks.length;e++)t._cbks[e]();t._cbks.length=0};var ah=!m.Browser.ie||m.Browser.ie>8;aW.register(function(t){var e=t.tileMgr=new aI(t);t.addEventListener("dragstart",function(t){e.dragStart(t)}),t.addEventListener("dragend",function(t){e.dragEnd(t)}),t.addEventListener("click",function(t){e.click(t)}),t.addEventListener("mousewheel",function(t){e.mouseWheel(t)}),t.addEventListener("dblclick",function(t){e.dblClick(t)}),t.addEventListener("rightdblclick",function(t){e.dblClick(t)}),t.addEventListener("minuspress",function(t){e.keypress(t)}),t.addEventListener("pluspress",function(t){e.keypress(t)}),t.addEventListener("load",function(){e.loadTiles()}),t.addEventListener("zoomstartcode",function(t){e._zoom(t)}),t.addEventListener("moving",function(t){e.mend(t)}),t.addEventListener("resize",function(t){e.resizeMap(t)}),t.addEventListener("addtilelayer",function(t){e.addTileLayer(t)}),t.addEventListener("removetilelayer",function(t){e.removeTileLayer(t)})}),m.extend(aI.prototype,{addTileLayer:function(t){var e=this,i=t.target;e.tileLayers.push(i),e.moveGridTiles()},removeTileLayer:function(t){var e=this,i=t.target,n=i.mapType,o=e.mapTiles,s=e.bufferTiles;for(var a in s){var r=a.split("-")[1];r==n&&delete s[a]}for(var a in o){var r=a.split("-")[1];r==n&&delete o[a]}e.zoomsDiv&&e.zoomsDiv.parentNode&&(e.zoomsDiv.parentNode.removeChild(e.zoomsDiv),e.zoomsDiv.innerHTML="");var h=e.map;if(h.deepZoom){var l=h.deepZoom.preDeepZoomDiv;l&&l.parentNode&&l.parentNode.removeChild(l)}for(var c=0,u=e.tileLayers.length;u>c;c++)i==e.tileLayers[c]&&(e.tileLayers.splice(c,1),delete i);e.moveGridTiles()},hideDeepZoomDiv:function(){var t=this,e=t.map;if(e.deepZoom){var i=e.deepZoom.preDeepZoomDiv;i&&"none"!=i.style.display&&(i.style.display="none")}},getTileLayer:function(t){for(var e=this,i=0,n=e.tileLayers.length;n>i;i++)if(tilelayer=e.tileLayers[i],tilelayer.mapType==t)return tilelayer},mend:function(){this.moveGridTiles()},_zoom:function(){var t=this;t.zoomsDiv&&"none"!=t.zoomsDiv.style.display&&(t.zoomsDiv.style.display="none"),t.hideDeepZoomDiv(),setTimeout(function(){t.moveGridTiles(),t.map.dispatchEvent(new aA("onzoomend"))},10)},resizeMap:function(){this.loaded=!1,this.moveGridTiles()},showTile:function(t,e,i,n){this.centerPos=e;var o=aM[i.mapType],s=this.getTileName(t,i),a=t[0]*o.tileSize+e[0],r=0;i.mapType==BMAP_PERSPECTIVE_MAP&&15==this.map.getZoom()&&(r=.5);var h=(r-1-t[1])*o.tileSize+e[1],l=[a,h],c=this,u=this.mapTiles[s];if(u)return aV(u.img,l),void(u.loaded?this._checkTilesLoaded():u._addLoadCbk(function(){c._checkTilesLoaded()}));if(u=this.bufferTiles[s]){this.imgNumber++,i.tilesDiv.insertBefore(u.img,i.tilesDiv.lastChild),this.mapTiles[s]=u,aV(u.img,l),u.loaded?this._checkTilesLoaded():u._addLoadCbk(function(){c._checkTilesLoaded()});var p=new aA("onimagechange");return p.action="cache",p.tile=this.getTileName(t,i),void this.map.dispatchEvent(p)}var f=o.baseUnits*Math.pow(2,o.zoomLevelBase-t[2]),d=new g(t[0]*f,t[1]*f),m=i.getTilesUrl(d,t[2]);if(u=new aB(this,m,l,t,i),u._addLoadCbk(function(){c._checkTilesLoaded()}),0===n&&(i.mapType==window.BMAP_NORMAL_MAP||i.opts.requestMonitor)){var _=(new Date).getTime();u._addLoadCbk(function(){var t=(new Date).getTime(),e=t-_,n={value:e,detail:m,unique:!0};u.error?(n.type="fail",n.subvalue="fail"):e>=2e3?(n.type="slow",n.subvalue=4e3>e?"req_slow2":6e3>e?"req_slow4":"req_slow6"):(n.type="succ",n.subvalue="succ");var o="tile",s=.02;i.mapType!==window.BMAP_NORMAL_MAP&&i.opts.monitorOpts&&(o=i.opts.monitorOpts.name||"tile",s=i.opts.monitorOpts.seed||.02),aW.Utils.ErrorMonitor(o,s,n)})}u._load(),this.mapTiles[s]=u},_checkTilesLoaded:function(){this.numLoading--;var t=this;0==this.numLoading&&(this._checkLoadedTimer&&(clearTimeout(this._checkLoadedTimer),this._checkLoadedTimer=null),this._checkLoadedTimer=setTimeout(function(){0==t.numLoading&&t.map.dispatchEvent(new aA("ontilesloaded")),t._checkLoadedTimer=null},80))},getTileName:function(t,e){var i=e.mapType,n="";return n=i==BMAP_PERSPECTIVE_MAP?"TILE-"+i+"-"+this.map.cityCode+"-"+t[0]+"-"+t[1]+"-"+t[2]:"TILE-"+i+"-"+t[0]+"-"+t[1]+"-"+t[2]},hideTile:function(e,i){var n=e.img;t(n)&&(e.loaded&&this.imgNumber--,n.parentNode&&(o(n),n.parentNode.removeChild(n)));var s=new aA("onimagechange");s.tile=this.getTileName(e.info,i),s.action="hide",delete this.mapTiles[e.name],e.loaded||(o(n),e._callCbks(),n=null,e.img=null,e.mgr=null),this.map.dispatchEvent(s)},loadTiles:function(){var t=this;if(m.Browser.ie)try{document.execCommand("BackgroundImageCache",!1,!0)
}catch(e){}this.zoomsDiv&&"none"!=this.zoomsDiv.style.display&&(this.zoomsDiv.style.display="none"),t.hideDeepZoomDiv(),t.moveGridTiles();var i=t.map;i.loaded=!0},getCell:function(t,e){var i=this.baseUnits*Math.pow(2,this.baseZoomLevel-e),n=parseInt(t.lng/i),o=parseInt(t.lat/i);return[n,o,i*(n+.5),i*(o+.5)]},moveGridTiles:function(){var t=this.map,e=t.getMapType(),i=this.tileLayers.length,n=t.config.enableCanvas2dMap;if(!n||"B_NORMAL_MAP"!=e)for(var o=0;i>o;o++){var s=this.tileLayers[o];(s.baseLayer||1==i)&&(this.tilesDiv=s.tilesDiv);var a=aM[s.mapType],r=t.zoomLevel,h=t.centerPoint;this.mapCenterPoint=h;var l=t.getZoomUnits(t.zoomLevel),c=a.baseUnits*Math.pow(2,a.zoomLevelBase-r),u=parseInt(h.lng/c);h.lng<0&&(u-=1);var p=parseInt(h.lat/c);h.lat<0&&(p-=1);var f=a.tileSize,d=[u,p,(h.lng-u*c)/c*f,(h.lat-p*c)/c*f],m=d[0]-Math.ceil((t.width/2-d[2])/f),_=d[1]-Math.ceil((t.height/2-d[3])/f),v=d[0]+Math.ceil((t.width/2+d[2])/f),y=0;s.mapType==BMAP_PERSPECTIVE_MAP&&15==t.getZoom()&&(y=1);var w=d[1]+Math.ceil((t.height/2+d[3])/f)+y;this.areaCenter=new g(h.lng,h.lat);var M=this.mapTiles,T=-this.areaCenter.lng/l,b=this.areaCenter.lat/l,C=[Math.round(T),Math.round(b)];for(var P in M){var x=M[P],L=x.info;L&&(L[2]==t.zoomLevel&&(m>L[0]||v<=L[0]||_>L[1]||w<=L[1])?this.hideTile(x,s):L[2]!=t.zoomLevel&&this.hideTile(x,s))}var A=-t.offsetX+t.width/2,E=-t.offsetY+t.height/2;s.tilesDiv.style.left=Math.round(T+A)-C[0]+"px",s.tilesDiv.style.top=Math.round(b+E)-C[1]+"px";var O=[];this.imgTotalNumber=0;for(var D=m;v>D;D++)for(var z=_;w>z;z++)O.push([D,z]),this.imgTotalNumber++;if(O.sort(function(t){return function(e,i){return.4*Math.abs(e[0]-t[0])+.6*Math.abs(e[1]-t[1])-(.4*Math.abs(i[0]-t[0])+.6*Math.abs(i[1]-t[1]))}}([d[0],d[1]])),!this.map.enableLoadTiles)return;this.numLoading+=O.length;for(var D=0,I=O.length;I>D;D++)this.showTile([O[D][0],O[D][1],t.zoomLevel],C,s,D)}},dragStart:function(){this.temp.pps={x:this.map.offsetX,y:this.map.offsetY}},dragEnd:function(){this.temp.ppe={x:this.map.offsetX,y:this.map.offsetY},(m.Platform.iphone||m.Platform.ipad||m.Platform.android)&&(this.zoomsDiv&&"none"!=this.zoomsDiv.style.display&&(this.zoomsDiv.style.display="none"),this.hideDeepZoomDiv())},click:function(t){if(this.map.config.enableClickPan){var e=this.temp;(0==this.map.currentOperation&&!e.ppe&&!e.pps||e.ppe&&e.pps&&e.ppe.x-e.pps.x==0&&e.ppe.y-e.pps.y==0)&&this.map.panBy(this.map.width/2-t.offsetX,this.map.height/2-t.offsetY),e.pps=null,e.ppe=null}},mouseWheel:function(t){if(!this.isCanvas2dMapOp()){var e=this.map;if(e.config.enableWheelZoom){var i=e.zoomLevel+(1==t.trend?1:-1),n=e._getProperZoom(i);if(n.exceeded){var o=new aA("onzoomexceeded");return o.targetZoom=i,void e.dispatchEvent(o)}e.dispatchEvent(new aA("onzoomstart")),e.lastLevel=e.zoomLevel,e.zoomLevel=n.zoom;var s=t.pixel,a=e.pixelToPoint(s,e.lastLevel,!0),r=e.getZoomUnits(e.zoomLevel);e.centerPoint=new g(a.lng+r*(e.width/2-s.x),a.lat-r*(e.height/2-s.y)),this.zoom(s)}}},dblClick:function(t){var e=this.map;if(e.config.enableDblclickZoom){var i=t.pixel,n=e.pixelToPoint(i,null,!0),o=1,s=i,a=new Z(0,0);"onrightdblclick"==t.type&&(o=-1);var r=e.zoomLevel+o,h=e._getProperZoom(r);if(h.exceeded){var l=new aA("onzoomexceeded");l.targetZoom=r,e.dispatchEvent(l)}else{if(e.dispatchEvent(new aA("onzoomstart")),this.isCanvas2dMapOp())return;var c=e.deepZoom;if(c)c.zoomMap(s,a,o,o);else{e.lastLevel=e.zoomLevel,e.zoomLevel=h.zoom;var u=e.getZoomUnits(e.zoomLevel);e.centerPoint=new g(n.lng+u*(e.width/2-i.x),n.lat-u*(e.height/2-i.y)),this.zoom(i)}}}},keypress:function(t){var e=this.map;if(!e.config.enableContinuousZoom)return void("onpluspress"http://webmap0.map.bdstatic.com/newmap/static/common/js/libs/API/==t.type?e.zoomIn():e.zoomOut());if(!this._zTimeLine){var i=e.zoomLevel+("onpluspress"http://webmap0.map.bdstatic.com/newmap/static/common/js/libs/API/==t.type?1:-1),n=e._getProperZoom(i);if(n.exceeded){var o=new aA("onzoomexceeded");return o.targetZoom=i,void e.dispatchEvent(o)}e.dispatchEvent(new aA("onzoomstart"));var s=new aN(e.width/2,e.height/2);if(e.lastLevel=e.zoomLevel,e.zoomLevel=n.zoom,e.getInfoWindow()){s=e.pointToPixel(e.getInfoWindow().getPoint(),e.lastLevel);var a=e.pixelToPoint(s,e.lastLevel,!0),r=e.getZoomUnits(e.zoomLevel);e.centerPoint=new g(a.lng+r*(e.width/2-s.x),a.lat-r*(e.height/2-s.y))}return this.isCanvas2dMapOp()?void e.dispatchEvent(new aA("onzoomend")):void this.zoom(s)}},isCanvas2dMapOp:function(){var t=this.map,e=t.config.enableCanvas2dMap;return e&&"B_NORMAL_MAP"==t.getMapType()?!0:!1}}),G.inherits(F,"TileLayer"),m.extend(G.prototype,{isTransparentPng:function(){return this.transparentPng},getTilesUrl:function(t,e){var i=aM[this.mapType];if("object"!=typeof i)return null;var n=i.baseUnits*Math.pow(2,i.zoomLevelBase-e),o=parseInt(t.lng/n)-this.offset[0],s=parseInt(t.lat/n-this.offset[1]),a="";if(this.opts.tileUrlTemplate)a=this.opts.tileUrlTemplate,a=a.replace(/\{X\}/,o),a=a.replace(/\{Y\}/,s),a=a.replace(/\{Z\}/,e);else{if(this.mapType==BMAP_NORMAL_MAP){var r="015";"undefined"!=typeof TVC&&(r=TVC.ditu.normal.version);var h="20130501";"undefined"!=typeof TVC&&(h=TVC.ditu.normal.updateDate),a=i.tileUrls[Math.abs(o+s)%i.tileUrls.length]+"?qt=tile&x="+o+"&y="+s+"&z="+e+"&styles=pl&udt="+h+"&scaler="+this.scaler,a=a.replace(/-(\d+)/gi,"M$1")}if(this.mapType==BMAP_PERSPECTIVE_MAP){var l=Math.pow(2,i.zoomLevelBase-e)*i.baseUnits;s=Math.round((9998336-l*s)/l)-1,a=i.tileUrls[Math.abs(o+s)%i.tileUrls.length]+this.map.currentCity+"/"+this.map.cityCode+"/3/lv"+(21-e)+"/"+o+","+s+"."+(i.imgExtend||"jpg")+"?v=001"}if(this.mapType==BMAP_SATELLITE_MAP){var r="009";"undefined"!=typeof TVC&&(r=TVC.ditu.satellite.version);var h="20130501";"undefined"!=typeof TVC&&(h=TVC.ditu.satellite.updateDate),a=i.tileUrls[Math.abs(o+s)%i.tileUrls.length]+"u=x="+o+";y="+s+";z="+e+";v="+r+";type=sate&fm=46&udt="+h,a=a.replace(/-(\d+)/gi,"M$1")}}return a},initialize:function(t){t.temp.layerZIndex||(t.temp.layerZIndex=0),this.zIndex=this.zIndex||-1,this.baseLayer&&(this.zIndex=-1),t.temp.layid||(t.temp.layid=0),this.opts.mapType?this.mapType=this.opts.mapType:(this.mapType="BMAP_CUSTOM_LAYER_"+t.temp.layid,t.temp.layid++);var e=aM[this.mapType];e||(aM[this.mapType]={tileUrls:[],tileSize:256,baseUnits:256,zoomLevelMin:1,zoomLevelMax:19,zoomLevelBase:18,errorUrl:aU.imgPath+"/blank.gif",bounds:new y(-21364736,-10616832,23855104,15859712),imgExtend:"png"});var i=ab(t.platform,'<div style="position:absolute;z-index:'+this.zIndex+'"></div>');i.style.display="",i.style.left=Math.ceil(-t.offsetX+t.width/2)+"px",i.style.top=Math.ceil(-t.offsetY+t.height/2)+"px",this.tilesDiv=i,this.map=t},remove:function(){this.tilesDiv&&this.tilesDiv.parentNode&&(this.tilesDiv.innerHTML="",this.tilesDiv.parentNode.removeChild(this.tilesDiv)),delete this.tilesDiv},getCopyright:function(){return this.copyright},getMapType:function(){return this.mapType},setZIndex:function(t){this.zIndex=t,this.tilesDiv&&(this.tilesDiv.style.zIndex=t)}}),aj.inherits(F,"Copyright"),ar.inherits(F,"ToolbarItem"),m.extend(ar.prototype,{open:function(){return 1==this._isOpen?!0:this._map._toolInUse?!1:(this._map._toolInUse=!0,this._isOpen=!0,!0)},close:function(){this._isOpen&&(this._map._toolInUse=!1,this._isOpen=!1)},_checkStr:function(t){return t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}}),U.inherits(ar,"PolylineTItem"),m.extend(U.prototype,{setLineColor:function(t){this._opts.lineColor=t},setLineStroke:function(t){Math.round(t)>0&&(this._opts.lineStroke=Math.round(t))},setOpacity:function(t){t>=0&&1>=t&&(this._opts.opacity=t)},setLineStyle:function(t){("solid"==t||"dashed"==t)&&(this._opts.lineStyle=t)},clear:function(){for(var t=0,e=this._overlays.length;e>t;t++)this._overlays[t]&&this._map.removeOverlay(this._overlays[t]);this._overlays.length=0;for(var t=0,e=this._dots.length;e>t;t++)this._dots[t]&&this._dots[t].parentNode&&this._dots[t].parentNode.removeChild(this._dots[t]);this._dots.length=0},setCursor:function(t){1==this._opts.showResult||(this._opts.cursor=t)},getCursor:function(){if(1==this._opts.showResult)return this._dCursor;var t=this._opts.cursor.match(/^url\((.+)\)(,.*)?/);return null!=t?t[1]:this._opts.cursor},showResult:function(t){this._opts.showResult=!!t},toString:function(){return"DistanceTool"}});var aX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";!function(t){t||(t=window.BMap={}),t.Utils||(t.Utils={});var e=t.Utils;e.format=function(){function t(t,e,i){var n=i[+e];return"function"==typeof n?n(e):n}function e(t,e,i){var n=e,o=[],s=e.split(":");2===s.length&&(n=s[0],o.push(s[1]));var a=typeof i[n];return"function"===a?i[n].apply(void 0,o):"undefined"===a?t:String(i[n])}return function(i,n){var o=n.splice?t:e,s=i.splice?i.join(""):i;return s.replace(/{([a-zA-Z0-9_$:.]+)}/g,function(t,e){return o(t,e,n)})}}(),e.IE={getAlphaFilterCSS:function(t,i){return e.format("progid:DXImageTransform.Microsoft.AlphaImageLoader(src='{src}',{method});",{src:t,method:i?"sizingMethod="+i.toString():""})},fixPNGs:function(t,i,n){if(t){n=n||{};var o=t.length,s=null;if(0!==o)for(var a=0;o>a;++a)s=t[a],s.style.cssText="FILTER:"+e.IE.getAlphaFilterCSS(s.src,n.sizingMethod||"crop")+s.style.cssText,s.src=i}}},e.isAncestor=function(t,e,i){var n=!1;if(i&&t===e)return!0;if(t.constains)return t.constains(e);if(t.compareDocumentPosition)return n=!!(16&t.compareDocumentPosition(e));for(;(e=e.parentNode)&&!n;)n=t===e||n;return!0};var i={};e.ErrorMonitor=function(t,e,n){var o=Math.floor(.001*(new Date).getTime());n=n||{};var s=e;if("succ"==n.type&&(s=.01*e),"http://webmap0.map.bdstatic.com/newmap/static/common/js/libs/API/map.baidu.com"==location.host&&Math.random()<s){if(n.unique){if(i[t])return;i[t]=!0}var a="http://log.map.baidu.com/tn.gif?module="+t+"&time="+o+"&value="+n.value+"&detail="+encodeURIComponent(n.detail)+"&subtype="+n.type+"&subvalue="+n.subvalue+"&represent="+s,r=new Image;r.src=a}}}(aW),aW.register(function(t){if(!t.config.isOverviewMap){var e=new af;t.container.insertAdjacentHTML("beforeEnd",e.render(t.config.defaultCursor)),e._container=t.container.lastChild,t.temp.zoomer=e}}),af.prototype.render=function(t){var e=['<div id=zoomer style="position:absolute;z-index:5;top:0px;left:0px;overflow:hidden;visibility:hidden;cursor:'+t+'">'];return e.push('<div class="BMap_zoomer" style="top:0;left:0;"></div>'),e.push('<div class="BMap_zoomer" style="top:0;right:0;"></div>'),e.push('<div class="BMap_zoomer" style="bottom:0;left:0;"></div>'),e.push('<div class="BMap_zoomer" style="bottom:0;right:0;"></div>'),e.push("</div>"),e.join("")},af.prototype.action=function(t,e){if(!af._timeline){var i=this._container;if(i){var n=e,o=60,s=120,a=4/3,r=Math.ceil((n?o:s)/2),h=Math.max(15,r/a),c=i.style;c.width=2*r+"px",c.height=2*h+"px",c.visibility="visible";var u=i.children;n?(u[0].style.backgroundPosition="0 0",u[1].style.backgroundPosition="-7px 0",u[2].style.backgroundPosition="0 -7px",u[3].style.backgroundPosition="-7px -7px"):(u[0].style.backgroundPosition="-7px -7px",u[1].style.backgroundPosition="0 -7px",u[2].style.backgroundPosition="-7px 0",u[3].style.backgroundPosition="0 0"),u=null;var p=t.x-r,f=t.y-h;if(!isNaN(p)&&!isNaN(f)){c.left=p+"px",c.top=f+"px";var d=Math.ceil((n?s:o)/2),m=Math.max(15,d/a);d-=r,m=Math.ceil(m-h);var g=this,_=g._container.style;af._timeline&&af._timeline.end(),af._timeline=new aK({fps:20,duration:240,transition:l.easeInQuad,delay:100,render:function(t){if(!(.1>t)){var e=Math.ceil(d*t),i=Math.ceil(m*t);_.width=2*(r+e)+"px",_.height=2*(h+i)+"px",_.left=p-e+"px",_.top=f-i+"px"}},finish:function(){af._timeline=!1,setTimeout(function(){c.visibility="hidden"},300)}})}}}},window.BMap=aW,aW.Map=D,aW.MapType=aM,aW.Point=g,aW.Pixel=aN,aW.Size=Z,aW.Bounds=y,aW.Area=x,aW.TileLayer=G,aW.Copyright=aj,aW.CoordTrans=n,aW.Projection=aW.Project=X,aW.Overlay=P,aW.Label=q,aW.Marker=J,aW.Icon=w,aW.Polyline=am,aW.PolylineMultipart=aR,aW.Polygon=c,aW.Rectangle=H,aW.InfoWindow=aD,aW.Circle=aa,aW.Control=Q,aW.NavigationControl=I,aW.OverviewMapControl=al,aW.CopyrightControl=K,aW.ScaleControl=V,aW.MapTypeControl=ag,aW.DistanceTool=U,aW.ContextMenu=j,aW.MenuItem=L,aW.OperationMask=at,aW.Animation=aK,aW.Transitions=l}();