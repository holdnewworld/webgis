define("common:widget/com/District/District.js",function(require,exports,module){function District(t){BaseComponent.call(this,t),this.curKw="",this.sCityCode=0,this.sCityName=""}var comMgr=require("common:widget/com/componentManager.js"),BaseComponent=require("common:widget/com/BaseComponent.js"),util=require("common:widget/ui/util/util.js"),mapUtil=require("common:widget/ui/mapUtil/mapUtil.js"),indexUtil=require("common:widget/ui/indexUtil/IndexUtil.js"),config=require("common:widget/ui/config/config.js"),modelConfig=config.modelConfig,MapConfig=config.mapConfig;T.lang.inherits(District,BaseComponent,"District"),T.object.extend(District.prototype,{render:function(){try{var template=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div id="txtPanel" class="mapinfo_con">',"undefined"==typeof result_title?"":result_title,"","undefined"==typeof suggest_query?"":suggest_query,"","undefined"==typeof jump_back?"":jump_back,"</div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],templateObj={guid:this.guid},j=this.json;if(!j||j&&!j.result)return;var r=j.result,c=j.content[0];this.curKw=r.return_query||r.wd,j.current_city?(this.sCityCode=j.current_city.code,this.sCityName=j.current_city.name,this.ctype=j.current_city.type):(this.sCityCode=modelConfig.cityCode,this.sCityName=modelConfig.cityName);var cn=this.sCityName,sg_search=this.cinfo.sg_search||0,wd=this.curKw?this.curKw:"";if(!sg_search&&j.suggest_query){for(var suggs=j.suggest_query,suggStrs=["<p class='sugg_q'>您是否要找：<br />"],i=0,l=suggs.length;l>i;i++)suggStrs.push("<a href='javascript:void(0)' onclick='Instance(\""+this.guid+'").q("'+suggs[i].query+'", 2,"SUGG");return false;\'>'),suggStrs.push(suggs[i].query),suggStrs.push("</a>"),i<suggs.length-1&&suggStrs.push("<br />");suggStrs.push("</p>"),templateObj.suggest_query=suggStrs.join("")}else templateObj.suggest_query="";if(templateObj.jump_back=r.jump_back?'<p class="j_b">您是否要<a onclick="Instance("'+this.guid+'"")._cnameSearch(\''+r.wd+"',"+this.cinfo.startCity.code+', 3);return false;" href="javascript:void(0)">在<b>'+this.cinfo.startCity.name+'</b>找名称中含有"<b>'+r.wd+'</b>"的地点</a></p>':"",0==r.total||!c)return this._processNoResult(r,template,templateObj);if(templateObj.no_result="",templateObj.result_title=c.addr&&c.name?'<p class="detail_title">'+c.addr+c.name+"</p>":"",c.geo){var pts=mapUtil.parseGeo(c.geo).points;map.centerAndZoom(util.getPointByStr(pts),13)}return template(templateObj)}catch(e){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/com/District/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/com/District/District.js",ln:113})}},initialize:function(){try{var t=this;this.cinfo&&(this.cinfo&&this.cinfo._maplevel&&this.cinfo._centerPoint&&map.centerAndZoom(t.cinfo._centerPoint,t.cinfo._maplevel),"undefined"!=typeof this.cinfo._index&&-1!=this.cinfo._index&&t.select(t.cinfo._index,{notMove:!0,notZoom:!0})),T.G("MapInfo")&&(T.G("MapInfo").scrollTop=0)}catch(e){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/com/District/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/com/District/District.js",ln:136})}},unload:function(){},_processNoResult:function(t,e,i){{var s=[],n=this.sCityName;this.json.center}i.result_title="";var r="http://www.baidu.com/s?ie=utf-8&wd="+encodeURIComponent(this.curKw)+"&cl=3";return s=["<p>抱歉，在"+n+"没有找到与“<span class='nr_kw'>"+this.curKw+"</span>”相关的地点。</P>"],0!=this.ctype&&s.push("<p class='nr_p'>在全国范围也没有找到与“<span class='nr_kw'>"+this.curKw+"</span>”相关的地点。</p>"),s.push("<div class='nr_suggest'>百度建议您：","<ul><li>用空格键将多个关键词分开，扩大搜索范围</li>",'<li>在百度网页中查找“<a href="'+r+'">'+this.curKw+"</a>”</li>","<li>看看输入的文字是否有误</li>","</ul></div>"),i.no_result=s.join(""),e(i)},q:function(t,e){if(t){e||(e=0);{this.curKw?this.curKw:"",this.sCityName}comMgr.go("s&stp=0&wd="+encodeURIComponent(t)+"&c="+this.sCityCode+"&src="+e,{cinfo:{sg_search:1}})}},_cnameSearch:function(t,e,i){indexUtil.cnameSearch(t,e,i)}}),module.exports=District});