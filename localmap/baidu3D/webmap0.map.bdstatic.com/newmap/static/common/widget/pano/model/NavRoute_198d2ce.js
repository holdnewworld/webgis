define("common:widget/pano/model/NavRoute.js",function(t){var n=t("common:widget/pano/base/service.js"),e=t("common:widget/pano/base/util.js"),r=function(t){var n={version:3,sn:t.start,strategy:t.strategy,en:t.end,b:t.bound,newmap:1,qt:"nav",strategy:t.strategy,sc:t.sc,c:t.currentCity,et:0,ie:"utf-8"};return n},a=function(t,n){this.fetch(t,n)};return baidu.lang.inherits(a,baidu.lang.Class),T.object.extend(a.prototype,{fetch:function(t,a){var s=n.getNavSteps(t).then(function(t){return e.each(t.content.steps,function(t){t.src=t.pid?e.getImage3DUrl(a,t.pid,t.dir,10,196,100):""}),t}),o=r(t),i=n.getNavSearch(o).then(function(t){try{var n=t.content.routes[0].legs[0].steps,r=[];e.each(n,function(t){var n=e.parse2Geo(t.path),a=n.points.split(";");e.each(a,function(t){var n=t.split(","),e=new BMap.Point(n[0],n[1]);r.push(e)})}),t.points=r}catch(a){throw t.points=[],a}finally{return t}}),u=this;T.when(s,i).then(function(t,n){u._routeData=t.content,u._navInfo=n,u.fire("ready")})},getSteps:function(){return this._routeData?this._routeData.steps:void 0},getPoints:function(){return this._navInfo?this._navInfo.points:void 0},getStart:function(){var t=this._navInfo,n=T.isArray(t.result.start)?t.result.start[0]:t.result.start;return n},getEnd:function(){var t=this._navInfo,n=T.isArray(t.result.end)?t.result.end[0]:t.result.end;return n},getInfo:function(){return this._navInfo},getRouteData:function(){return this._routeData}}),a});