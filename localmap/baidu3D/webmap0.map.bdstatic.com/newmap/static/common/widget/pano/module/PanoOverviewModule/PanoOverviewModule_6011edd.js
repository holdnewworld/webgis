define("common:widget/pano/module/PanoOverviewModule/PanoOverviewModule.js",function(e,t,o){var a=e("common:widget/pano/module/PanoOverviewModule/PanoMapComponent/PanoMapComponent.js"),n=e("common:widget/pano/module/PanoOverviewModule/FloorComponent/FloorComponent.js"),i=e("common:widget/pano/module/PanoOverviewModule/CatalogComponent/CatalogComponent.js"),r=e("common:widget/pano/module/PanoOverviewModule/PanoIndoorPlanComponent/PanoIndoorPlanComponent.js"),s=e("common:widget/pano/base/ModuleClass.js"),p=e("common:widget/pano/module/PanoModule/FlashRender/FlashUtil.js"),d=(e("common:widget/pano/base/service.js"),e("common:widget/pano/base/util.js")),l=(e("common:widget/pano/model/IndoorData.js"),e("common:widget/ui/Animation/Animation.js")),h={none:0,overview:1,plan:2};e.loadCss({content:'#panoOvFramePinBg{position:absolute;right:0;top:0;width:20px;height:20px;overflow:hidden;background-color:#252525;-ms-filter:"alpha(Opacity=90)";filter:alpha(opacity=90);-moz-opacity:.9;-khtml-opacity:.9;opacity:.9;display:none}.panoOvFramePin{position:absolute;right:2px;top:2px;width:18px;height:18px;overflow:hidden;display:none;cursor:pointer}.panoOvFramePin_lock{background-image:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/pano_whole/map_fishbone2_da6749c.png);background-repeat:no-repeat;background-position:-49px -69px}.panoOvFramePin_lock:hover{background-position:-75px -69px}.panoOvFramePin_locked{background-image:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/pano_whole/map_fishbone2_da6749c.png);background-repeat:no-repeat;background-position:3px -69px}.panoOvFramePin_locked:hover{background-position:-23px -69px}#panoOvMarkerPosition{position:absolute;left:0;width:300px;height:106px;overflow:hidden}.overview-back-btn{height:20px;line-height:20px;width:300px;position:absolute;bottom:0;cursor:pointer;text-align:center;border-top:0;border-bottom:0;display:block;text-decoration:none;-webkit-transition:color 300ms,background-color 300ms;background-color:#252525;background-color:rgba(37,37,37,.5);filter:alpha(opacity=60);_filter:alpha(opacity=60);color:#ebf0f5}.panoOvFrameMask{position:absolute;left:0;bottom:20px;width:100%;height:100%}#scale-controll-area{display:none;position:absolute;right:2px;bottom:22px;z-index:100019;font-size:0;border-radius:2px;background-color:#252525;background-color:rgba(37,37,37,.5);filter:alpha(opacity=60);_filter:alpha(opacity=60)}#scale-controll-area:hover{background-color:#252525;background-color:rgba(37,37,37,.8);filter:alpha(opacity=80);_filter:alpha(opacity=80)}.fishbone_button{_background:#535458;width:18px;height:18px;display:inline-block;cursor:pointer;overflow:hidden;position:relative}.fishbone_button span{background-image:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/pano_whole/map_fishbone2_da6749c.png);background-repeat:no-repeat;width:18px;height:18px;display:inline-block;cursor:pointer;overflow:hidden;position:relative}#map-zoomout{border-radius:2px 2px 0 0}#map-zoomout.fishbone_button span{background-position:-36px 4px}#map-zoomout.fishbone_button.hover span{background-position:-16px 4px}#map-zoomout.fishbone_button:hover span{background-position:-16px 4px}#map-zoomout.fishbone_button.disabled span,#map-zoomout.fishbone_button.disabled:hover span{background-position:4px 4px}#map-zoom-line{background-color:rgba(37,37,37,.5);_background-color:#252525;filter:alpha(opacity=50);_filter:alpha(opacity=50)}#map-zoom-line div{height:1px;font-size:1px;line-height:1px;margin:0 auto;width:12px;background:#a8a8a8;_background-color:#a8a8a8}#map-zoomin{border-radius:0 0 2px 2px}#map-zoomin.fishbone_button span{background-position:-36px -15px}#map-zoomin.fishbone_button.hover span{background-position:-16px -15px}#map-zoomin.fishbone_button:hover span{background-position:-16px -15px}#map-zoomin.fishbone_button.disabled span,#map-zoomin.fishbone_button.disabled:hover span{background-position:4px -15px}.pano-fan{background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pano_whole/pano_fan_direction_1db0df5.png)!important;_background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pano_whole/pano_fan_direction_8_3d9034f.png)}#panoMapOuterWapper .overview-back-btn:hover{background-color:rgba(37,37,37,.8);filter:alpha(opacity=80);_filter:alpha(opacity=80);color:#3af}#panoMapOuterWapper:hover #scale-controll-area{display:block}'});var m=106,c=function(e,t){var o=e.x-4,a=e.y;return o>=t.minX&&o<=t.maxX&&a>=t.minY&&a<=t.maxY?!0:!1},u=function(e,t,o,a){var n=(t.maxX-t.minX)/o,i=(t.maxY-t.minY)/a;return{x:(e.x-t.minX)/n,y:a-(e.y-t.minY)/i}},v=function(e,t){var o={x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2},a=180*Math.atan(Math.abs((e.x-o.x)/(e.y-o.y)))/Math.PI;return e.x>=o.x&&e.y<=o.y&&(a=180-a),e.x<=o.x&&e.y<=o.y&&(a=180+a),e.x<=o.x&&e.y>=o.y&&(a=360-a),a},_=s.extend("PanoOverviewModule",{constructor:function(){this._map=null,this._opts=null,this._currentPanoType=null,this._mapType=h.none,this._mapCache={markers:null,points:null},this._state="enable",this._searchMarker={}},isAsync:function(){return!0},initialize:function(e){try{var t=this;this._opts=e;var o=t._opts.data;t.animationStart=!1,t.animation=new l.Animation,t.initOutFrame(),t.bindOutFrameEvent(),o&&t.create(o.panoType,t._opts)}catch(a){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoOverviewModule/exception.fire","catch",{msg:a.message||a.description,path:"common:widget/pano/module/PanoOverviewModule/PanoOverviewModule.js",ln:121})}},initOutFrame:function(){var e=this._opts,t=T.dom.create("div",{id:"panoOvFramePin","class":"panoOvFramePin",title:"固定",style:"z-index: "+e.zIndex+21}),o=T.dom.create("div",{id:"panoOvFramePinBg",style:"z-index: "+e.zIndex+20}),a=T.dom.create("div",{id:"panoOvMarkerPosition",style:"z-index: 0"}),n=T.dom.create("a",{id:"overviewBackBtn",className:"overview-back-btn",style:"z-index: 2"});n.href="javascript:void(0);",n.innerHTML="返回地图";var i=T.dom.create("div",{id:"panoMapOuterWapper",style:"position:absolute;height:100%;width:100%;z-index:"+e.zIndex+10}),r=T.dom.create("div",{id:"panoOverMapWapper",style:"position:absolute;height:100%;width:100%;z-index:1;"});i.appendChild(t),i.appendChild(o),r.appendChild(a),i.appendChild(n),i.appendChild(r),e.parent&&e.parent.appendChild(i),this.createPositionFlash(a)},drawLine:function(e,t){return this._map instanceof a?(this._mapCache.points=e,this._mapCache.drawLineOptions=t,this._map.drawLine(e,t)):!1},addMarkers:function(e){return this._map instanceof a?(this._mapCache.markers=e,this._map.addMarkers(e)):!1},addSearchMarker:function(e,t,o){return this._map instanceof a?(this._map.addSearchMarker(e,t,o),void(this._searchMarker={x:e,y:t,name:o})):!1},removeSearchMarker:function(){this._map instanceof a&&(this._map.removeSearchMarker(),this._searchMarker=null)},initTrafficLayer:function(){return this._map instanceof a?this._map.initPathLayer():!1},removeMapClickLayer:function(){return this._map instanceof a?this._map.removePoiClickLayer():!1},create:function(e,t){var o=this;o._currentPanoType=e||"inter";var n="street"==e,i=this._opts.indoorModel;if(this._floorComponent){var s=this._floorComponent.getData();i&&i.equal(s)||(this._floorComponent.destroy(),this._floorComponent=null)}if(this._catalogComponent){var s=this._catalogComponent.getData();i&&i.equal(s)||(this._catalogComponent.destroy(),this._catalogComponent=null)}var p=null,d=!1,l=baidu.g("panoOverMapWapper");if(n)p=new a(l,t),this._mapType=h.overview;else{var m=i.has2DMap(),c=i.hasPlanMap();if(c)this._mapType=h.plan,t.data=i.getCurrentFloorData(),p=new r(l,t);else if(m){this._mapType=h.overview;var u=(t.data.panoHeading,i.get2DMapData());u.currentPoint=t.data.currentPoint,u.panoHeading=t.data.currentPoint.heading,t.data=u,p=new a(l,t,i)}else d=!0;i&&this._createPolymerizationComponent(i,d)}if(p){if(this.dispatchEvent("layout_changed",{display:!0}),this._map=p,this.bindCommonEvent(),this._map.initialize(),n){this._mapCache.points&&this._map.drawLine(this._mapCache.points,this._mapCache.drawLineOptions),this._mapCache.markers&&this._map.addMarkers(this._mapCache.markers);var v=o._searchMarker;v.name&&o.addSearchMarker(v.x,v.y,v.name)}}else this.dispatchEvent("layout_changed",{display:!1}),setTimeout(function(){o.ready()},0)},destroyMap:function(){this._map&&(this.clearMapListener(),this._map.destroyAll(),this._map=void 0,this._mapType=h.none)},createPositionFlash:function(e){var t="../../../../swf/pano_whole/MarkerAnimation_299ef9e.swf"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/swf/pano_whole/MarkerAnimation_299ef9e.swf*/;p.create({id:"markerAnimation-0",width:"300",height:"300",allowscriptaccess:"always",wmode:"transparent",quality:"high",url:t,menu:"false",ver:"10",errorMessage:"您未安装Flash Player播放器或者版本过低"},e);var o=this;o.flashSize={width:300,height:m},setTimeout(function(){o.posFlash=p.getSwf("markerAnimation-0")},500)},_reset:function(){var e=this;e.locked=!1,e._isExpand=!1,e._opts.parent.style.visibility="hidden",e._opts.parent.style.height=m+"px";var t=baidu.g("panoOvFramePin"),o=baidu.g("panoOvFramePinBg"),a=baidu.g("panoOvMarkerPosition");t.style.display="none",o.style.display="none",baidu.dom.removeClass(t,"panoOvFramePin_lock"),baidu.dom.removeClass(t,"panoOvFramePin_locked"),t.setAttribute("title","锁定"),a.style.zIndex=0},bindCommonEvent:function(){var e=this,t=this._map;this.clearMapListener(),t.addEventListener("pov_changed",function(t){e.dispatchEvent("pov_changed",{data:t.data})}),t.addEventListener("pano_changed",function(t){e.dispatchEvent("pano_changed",{data:t.data})}),t.addEventListener("photo_tour_enter",function(t){e.dispatchEvent("photo_tour_enter",{data:{tourId:t.data}})}),t.addEventListener("layout_changed",function(t){e.dispatchEvent("layout_changed",{display:t.data.display})}),t.addEventListener("level_changed",function(t){e._opts.level=t.data.level}),t.addEventListener("tiles_loaded",function(){e._opts.parent.style.visibility="visible",e.ready()}),t.addEventListener("mouseenter",function(){e.dispatchEvent("map_mouseenter")}),t.addEventListener("mouseleave",function(){e.dispatchEvent("map_mouseleave")})},clearMapListener:function(){if(this._map){var e=this._map;e.removeEventListener("pov_changed"),e.removeEventListener("pano_changed"),e.removeEventListener("layout_changed"),e.removeEventListener("level_changed"),e.removeEventListener("tiles_loaded")}},fold:function(){if(this._map&&this._isExpand===!0){var e=this,t=e._opts.parent,o=baidu.g("panoOvFramePin"),a=baidu.g("panoOvFramePinBg");o.style.display="none",a.style.display="none",this.animationStart=!0;var n=300-m;this._isExpand=!1,this.flashSize={width:300,height:m},this.animation.build({fps:60,transition:l.Transitions.linear,duration:200,render:function(e){try{t.style.height=300-n*e+"px"}catch(o){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoOverviewModule/exception.fire","catch",{msg:o.message||o.description,path:"common:widget/pano/module/PanoOverviewModule/PanoOverviewModule.js",ln:483})}},finish:function(){e.animationStart=!1,e._map.setCenter()}}),this.setPolymerizationComponentPosition(void 0,!1)}},expand:function(){if(this._map&&this._isExpand===!1){var e=this,t=300-m;this.animationStart=!0;var o=e._opts.parent,a=baidu.g("panoOvFramePin"),n=baidu.g("panoOvFramePinBg");a.style.display="block",n.style.display="block",this.flashSize={width:300,height:300},this.animation.build({fps:60,transition:l.Transitions.linear,duration:200,render:function(e){try{o.style.height=m+t*e+"px"}catch(a){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoOverviewModule/exception.fire","catch",{msg:a.message||a.description,path:"common:widget/pano/module/PanoOverviewModule/PanoOverviewModule.js",ln:517})}},finish:function(){e.animationStart=!1,e._map.setCenter(),e._isExpand=!0}}),this.setPolymerizationComponentPosition(void 0,!0)}},bindOutFrameEvent:function(){function e(){o.setPolymerizationComponentPosition(void 0,!0),o.animationStart=!0,o.animation.build({fps:60,transition:l.Transitions.linear,duration:200,render:function(e){try{a.style.height=m+p*e+"px"}catch(t){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoOverviewModule/exception.fire","catch",{msg:t.message||t.description,path:"common:widget/pano/module/PanoOverviewModule/PanoOverviewModule.js",ln:552})}},finish:function(){o.animationStart=!1,o._map.setCenter(),o._isExpand=!0,"leave"==o.mousePosition&&(o.shrinkTimeout=setTimeout(function(){t()},200))}})}function t(){o.setPolymerizationComponentPosition(void 0,!1),o.animationStart=!0,o.animation.build({fps:60,transition:l.Transitions.linear,duration:200,render:function(e){try{a.style.height=300-p*e+"px"}catch(t){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoOverviewModule/exception.fire","catch",{msg:t.message||t.description,path:"common:widget/pano/module/PanoOverviewModule/PanoOverviewModule.js",ln:576})}},finish:function(){o.animationStart=!1,o._map.setCenter(),o._isExpand=!1,"enter"==o.mousePosition&&(o._isExpandTimeout=setTimeout(function(){e()},200))}})}var o=this,a=o._opts.parent,n=(baidu.g("panoIndoorMap"),baidu.g("panoOvFramePin")),i=baidu.g("panoOvFramePinBg"),r=baidu.g("overviewBackBtn"),s=(baidu.g("panoOverMapWapper"),baidu.g("panoMapOuterWapper")),p=300-m;baidu.on(s,"mouseenter",function(){window._pano_overviewmap_leaved=!1,o._leaveHandler&&clearTimeout(o._leaveHandler),o.mousePosition="enter",o.locked||(n.style.display="block",i.style.display="block",baidu.dom.addClass(n,"panoOvFramePin_lock")),clearTimeout(o.shrinkTimeout),o._isExpand||o.animationStart||(o._isExpandTimeout=setTimeout(function(){e()},300))}),baidu.on(s,"mouseleave",function(e){function a(){for(var a=e.relatedTarget;a;){if("floor-container"==a.className)return;if(a==document.body)break;a=a.parentNode}if(o.mousePosition="leave",!o.locked){n.style.display="none",i.style.display="none",baidu.dom.removeClass(n,"panoOvFramePin_lock");var r=baidu.g("panoOvMarkerPosition");r.style.height=m+"px",o.flashSize={width:300,height:m}}clearTimeout(o._isExpandTimeout),o.locked||o._isExpand&&!o.animationStart&&(o.shrinkTimeout=setTimeout(function(){t()},300))}window._pano_overviewmap_leaved=!0,o._map&&!o._map._isDrag&&("map"==window._mouseleave_trigger_source?(window._mouseleave_trigger_source=null,o._leaveHandler=setTimeout(function(){a()},2e3)):a())}),baidu.on(n,"click",function(){o.locked?o.unlock():o.lock()}),baidu.on(r,"click",function(){o.dispatchEvent("close_pano"),addStat(STAT_CODE.STAT_PANORAMA,{catalog:"overview-return-click"})})},lock:function(){if(!this.locked){var e=baidu.g("panoOvFramePin");this.locked=!0,baidu.dom.addClass(e,"panoOvFramePin_locked"),e.setAttribute("title","解锁");var t=baidu.g("panoOvMarkerPosition");t.style.height="300px",this.flashSize={width:300,height:300},addStat(STAT_CODE.STAT_PANORAMA,{catalog:"eagle-eye-stick"})}},unlock:function(){if(this.locked){this.locked=!1;var e=baidu.g("panoOvFramePin");baidu.dom.removeClass(e,"panoOvFramePin_locked"),e.setAttribute("title","锁定"),addStat(STAT_CODE.STAT_PANORAMA,{catalog:"eagle-eye-stick"})}},isLocked:function(){return this.locked},isExpand:function(){return this._isExpand},event_panoChanged:function(e){var t=this,o=t._map,a=t._opts,n=e.data.panoType||"inter";if(t._currentPanoType!=n)this.destroyMap(),t._reset(),a.data=e.data,t.create(n,a);else{if(!o)return;o.event_panoChanged&&o.event_panoChanged(e.data)}},setPolymerizationComponentPosition:function(e,t){void 0!==e&&(this._isToolBarVisibility=e),void 0!==t&&(this._isOverviewExpand=t);var o=this._floorComponent||this._catalogComponent;o&&(this._mapType===h.none||(this._isToolBarVisibility?this._isOverviewExpand?o.setPosition(-2,-20,!0):o.setPosition(-2,-39,!0):o.setPosition(-2,-20,!0)))},_createPolymerizationComponent:function(e,t){var o=e.getCatalogList();o.length>0?this._createCatalogComponent(e,t):this._createFloorComponent(e,t),this.setPolymerizationComponentPosition(void 0,!1)},_createCatalogComponent:function(e,t){if(!this._catalogComponent){var o;if(t){if(o=document.getElementById("pano-floor-wrapper"),!o){var a=this.floorWrapper=document.createElement("div");a.id="pano-floor-wrapper",T.g("pano-funcarea").appendChild(a),d.setOpacity(a,0),o=a}o.style.visibility="visible"}else o=document.getElementById("pano-overview-wrapper");var n=this._catalogComponent=new i(o,e),r=this;n.addEventListener("item_click",function(t,o){var a=e.getCatalogList(),n=a[o.index],i=n.points[0].pid;r.dispatchEvent("pano_changed",{data:{panoId:i,panoType:"inter"}}),addStat(STAT_CODE.STAT_PANORAMA,{item:Pano.PANO_TYPE_INDOOR,catalog:"catalog-switch"})}),n.addEventListener("fold_overview",function(){r.isLocked()||r.fold()});var s=e.getCurrentPointData(),p=s.pid;this.updateCatalog(p)}},_createFloorComponent:function(e,t){var o=e.getFloorInfo();if(!this._floorComponent&&o.length>1){var a;if(t){if(a=document.getElementById("pano-floor-wrapper"),!a){var i=this.floorWrapper=document.createElement("div");i.id="pano-floor-wrapper",T.g("pano-funcarea").appendChild(i),d.setOpacity(i,0),a=i}a.style.visibility="visible"}else a=document.getElementById("pano-overview-wrapper");var r=this._floorComponent=new n(a,e),s=this;r.addEventListener("item_click",function(e,t){var a=o[t.index],n=a.startid;s.dispatchEvent("pano_changed",{data:{panoId:n,panoType:"inter"}}),addStat(STAT_CODE.STAT_PANORAMA,{item:Pano.PANO_TYPE_INDOOR,catalog:"floor-switch"})}),r.addEventListener("fold_overview",function(){s.isLocked()||s.fold()}),r.setFloorIndex(e.getCurrentFloor())}},event_indoorEnter:function(e){var t=this,o=this._opts,a=this._opts.indoorModel=e.indoorModel,n=a.has2DMap();t._mapType===h.overview&&n?(t._map.event_panoChanged(e.data,a),t._map.setZoom(16),a&&this._createPolymerizationComponent(a)):(o.data=e.data,t.destroyMap(),t._reset(),t._opts.data=a.getCurrentFloorData(),t.create("inter",o))},event_floorChanged:function(e){var t=this._opts;if(t.indoorModel&&this._floorComponent&&this._floorComponent.setFloorIndex(e.data.floor-1),this._mapType===h.overview&&t.indoorModel){this._map.updateTopologyMarkers();var o=t.indoorModel.getCurrentPointData();return void this._map.event_panoChanged(o)}this.destroyMap(),t.data=e.data,this.create("inter",t)},event_showPosition:function(e,t){var o=this;if(this._mapType===h.overview){var a=this._map;o.posFlash&&o.posFlash.setSize&&o.posFlash.setSize(o.flashSize.width,o.flashSize.height);var n={x:e,y:t},i=a.getBounds();if(c(n,i)){var r=u(n,i,o.flashSize.width,o.flashSize.height);o.posFlash.showShiningCircle&&o.posFlash.showShiningCircle(r.x,r.y)}else{var s=v(n,i);o.posFlash.showShiningArrow&&o.posFlash.showShiningArrow(s)}var p=baidu.g("panoOvMarkerPosition");p.style.zIndex=o._opts.zIndex+9}},event_hidePosition:function(){var e=this;if(this._mapType===h.overview){e.posFlash&&e.posFlash.hide();var t=baidu.g("panoOvMarkerPosition");t.style.zIndex=0}},_adaptData:function(e){function t(e){for(var t=[],o=0,a=e.length;a>o;o++){var n=e[o],i={defaultAngle:0,id:n.PID,name:n.name,x:n.X/100,y:n.Y/100};t.push(i)}return t}var o=this._opts.data,a=e.floorsData,n={defZoom:o.defZoom,floor:e.floor,hasImage:o.hasImage,height:1024,width:1024,innerId:o.innerId,pid:o.pid,points:t(a.Points),poiuid:o.poiuid,uid:e.panoId,x:a.LTpoint.X/100,y:a.LTpoint.Y/100,zoomLevel:o.zoomLevel};return n},event_indoorIdChanged:function(e){if(this._map){var t=this._map;this._mapType===h.overview?t.event_panoChanged(e.data):t.event_indoorIdChanged(e)}},updateCatalog:function(e){var t=this._opts.indoorModel;if(t&&this._catalogComponent){var o=t.getCatalogList(),a=null;d.each(o,function(t,o){return null!==a?!0:void d.each(t.points,function(t){return e===t.pid?(a=o,!0):void 0})}),this._catalogComponent.setSelectIndex(a)}},event_exitIndoor:function(e){if(this._floorComponent&&this._floorComponent.destroy(),this._catalogComponent&&this._catalogComponent.destroy(),this._floorComponent=null,this._catalogComponent=null,this._map){var t=this._map;t.event_exitIndoor&&t.event_exitIndoor(e)}},event_povChanged:function(e){if(this._map){var t=this._map;t.event_povChanged&&t.event_povChanged(e.data.panoHeading,e.data.panoPitch)}},event_disable:function(){this._state="disable";var e=this._opts,t=T.dom.create("div",{id:"panoOvFrameMask","class":"panoOvFrameMask",style:"z-index: "+e.zIndex+20});T.g("panoMapOuterWapper").appendChild(t),this._map.hideScaleControl&&this._map.hideScaleControl()},event_enable:function(){this._state="enable";var e=T.g("panoOvFrameMask");e&&T.g("panoMapOuterWapper").removeChild(e),this._map.showScaleControl&&this._map.showScaleControl()},getLevel:function(){return this._map&&this._map.getLevel?this._map.getLevel():16},getInnerId:function(){var e=this._opts;return e.indoorModel&&e.indoorModel.hasIndoorData()?e.indoorModel.getIID():this._map&&this._map.getInnerId?this._map.getInnerId():"inter"==this._currentPanoType?this._opts.data.innerId:void 0},getPoint:function(){return this._map?this._map.getCenter?this._map.getCenter():null:void 0},getCurrentPointInfo:function(){return this._map?this._map.getCenterPointInfo?this._map.getCenterPointInfo():null:void 0},getCurrentCity:function(e){if(!this._map){var t=this._opts.data;return void d.getCurrentCityByArea(t.x-1,t.y-1,t.x+1,t.y+1,function(t){var o=t.current_city;e({cityId:o.code,cityName:o.name})})}return this._map.getCurrentCity?this._map.getCurrentCity(e):null},_move:function(e,t){var o=document.getElementById("pano-overview-wrapper"),a=t-e,n=new l.Animation,i={duration:400,fps:40,delay:l.Animation.INFINITE,transition:l.Transitions.easeOutQuad,finish:function(){},render:function(t){try{o.style.bottom=e+a*t+"px"}catch(n){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoOverviewModule/exception.fire","catch",{msg:n.message||n.description,path:"common:widget/pano/module/PanoOverviewModule/PanoOverviewModule.js",ln:1201})}}};n.build(i),n.start()},show:function(){var e=document.getElementById("pano-overview-wrapper"),t=parseInt(e.style.bottom),o=20;this._move(t,o)},hide:function(){var e=document.getElementById("pano-overview-wrapper"),t=20,o=-e.clientHeight-10;this._move(t,o)},dispose:function(){var e=this._opts.parent;e&&(e.innerHTML="",e.style.display="none"),this.clearMapListener()},getSupportEvents:function(){return["pov_changed","pano_changed","layout_changed","level_changed","close_pano","photo_tour_enter"]}});o.exports=_});