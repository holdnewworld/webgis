define("common:widget/pano/module/PanoMessageBox/PanoMessageBox.js",function(t,s,n){var o=t("common:widget/pano/base/ModuleClass.js"),e=o.extend("PanoMessageBox",{loaded:!1,msgBox:null,closeBtn:null,closeBtn_img:null,msgIcon:null,msgTxt:null,msgBtn:[],_data:null,_container:null,constructor:function(){},initialize:function(t){try{this.cinfo=t||{},this._data=this.cinfo.data||{},this._container=this.cinfo.container,this._container.style.display="block",this.initMsgBox(this._data)}catch(i){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoMessageBox/exception.fire","catch",{msg:i.message||i.description,path:"common:widget/pano/module/PanoMessageBox/PanoMessageBox.js",ln:33})}},getSupportEvents:function(){return["close_pano","dispose"]},initMsgBox:function(t){this._container.innerHTML="",this.loaded&&""!=this._container.innerHTML?this.resetMsgBox(t):(this.loaded=!0,this.createMsgBox(t)),this._container.style.display="block"},show:function(){this.msgBox.style.display="block"},hide:function(){this.msgBox.style.display="none"},resetMsgBox:function(t){var i=this.getMapPos();baidu.setStyles(this.msgBox,{top:i.top+(i.height-144)/2+"px",left:i.left+(i.width-322)/2+"px"}),this.msgTxt.innerHTML=t.info,this.setBtns(t.funtype),this.msgBox.style.display="block"},createMsgBox:function(t){var i=(this.getMapPos(),"url(http://webmap0.map.bdstatic.com/newmap/static/common/images/msg_icons_754cfc7.png)");this.msgBox=T.dom.create("div"),baidu.setStyles(this.msgBox,{width:"322px",height:"144px",border:"1px solid #A8A8A8",position:"absolute",top:"50%",left:"50%",backgroundColor:"#ffffff",marginLeft:"-161px",marginTop:"-77px"}),this.msgIcon=T.dom.create("div"),baidu.setStyles(this.msgIcon,{backgroundPosition:"0px 0px",backgroundImage:i,width:"75px",height:"87px",position:"absolute",left:"20px",top:"30px"}),this.msgTxt=T.dom.create("div"),baidu.setStyles(this.msgTxt,{width:"180px",height:"20px",fontSize:"14px",fontWeight:"bold",position:"absolute",left:"115px",top:"40px",textAlign:"center"}),this.msgTxt.innerHTML=t.info,this.msgBox.appendChild(this.msgIcon),this.msgBox.appendChild(this.msgTxt),this.setBtns(t.funtype),this._container.appendChild(this.msgBox)},createBtns:function(t){var s="url(http://webmap0.map.bdstatic.com/newmap/static/common/images/msg_icons_754cfc7.png)";for(i=0;t>i;i++)this.msgBtn[i]=T.dom.create("div"),baidu.setStyles(this.msgBtn[i],{backgroundPosition:"0px -102px",backgroundImage:s,width:"84px",height:"29px",position:"absolute",left:(1==t?160:115+95*i)+"px",top:"89px",lineHeight:"30px",textAlign:"center",fontSize:"12px",cursor:"pointer"}),baidu.on(this.msgBtn[i],"mouseover",function(){this.style.fontWeight="bold",this.style.backgroundPosition="0px -133px"}),baidu.on(this.msgBtn[i],"mousedown",function(){this.style.fontWeight="bold",this.style.backgroundPosition="0px -133px"}),baidu.on(this.msgBtn[i],"mouseup",function(){this.style.fontWeight="normal",this.style.backgroundPosition="0px -102px"}),baidu.on(this.msgBtn[i],"mouseout",function(){this.style.fontWeight="normal",this.style.backgroundPosition="0px -102px"}),this.msgBox.appendChild(this.msgBtn[i])},setBtns:function(t){var s=this;for(i=0;i<this.msgBtn.length;i++)this.msgBox.removeChild(this.msgBtn[i]);switch(this.msgBtn=[],t){case"alert":this.createBtns(1),this.msgBtn[0].innerHTML="确定",baidu.on(this.msgBtn[0],"click",function(t){baidu.event.stopPropagation(t),s.dispose()});break;case"error":this.createBtns(1),this.msgBtn[0].innerHTML="确定",baidu.on(this.msgBtn[0],"click",function(){s.dispatchEvent("close_pano"),s.dispose()});break;default:this.createBtns(2),this.msgBtn[0].innerHTML="退出全景",this.msgBtn[1].innerHTML="留在全景",baidu.on(this.msgBtn[0],"click",function(){s.dispatchEvent("close_pano"),s.dispose()}),baidu.on(this.msgBtn[1],"click",function(t){baidu.event.stopPropagation(t),s.dispose()})}},closeMsg:function(){this.msgBox.style.display="none"},getMapPos:function(){var t=baidu.g("MapHolder"),i=T.dom.getPosition(t),s=t.clientWidth,n=t.clientHeight;return{left:i.left,top:i.top,width:s,height:n}},dispose:function(){this.msgBox&&(this._container.removeChild(this.msgBox),this._container.style.display="none",this.msgBox=null,this.dispatchEvent("dispose"))}});n.exports=e});