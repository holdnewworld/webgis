define("common:widget/pano/module/PanoOverviewModule/FloorComponent/FloorComponent.js",function(e,o,t){var n=e("common:widget/ui/Animation/Animation.js"),i=e("common:widget/pano/component/TableView/TableView.js"),a=e("common:widget/pano/base/util.js");e.loadCss({content:".floor-container{position:absolute;height:20px;background-color:#252525;filter:alpha(opacity=90);background-color:rgba(37,37,37,.9)}#pano-floor-wrapper .floor-container{top:3px}.floor-container .tableview-wapper{left:20px}.floor-container .tableview-la,.floor-container .tableview-ra{position:absolute;width:30px;text-align:center}.floor-container .tableview-ra .tableview-bg,.floor-container .tableview-la .tableview-bg{background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pano_whole/floor_10cc722.png);background-repeat:no-repeat}.floor-container .tableview-ra .tableview-bg{background-position:-24px -1px}.floor-container .tableview-ra:hover .tableview-bg{background-position:-36px -1px}.floor-container .tableview-la .tableview-bg{background-position:-10px -1px}.floor-container .tableview-la:hover .tableview-bg{background-position:2px -1px}.floor-container .tableview-ra.tableview-ra-disabled,.floor-container .tableview-la.tableview-la-disabled{display:none}.floor-number{line-height:20px;color:#abb0b2;padding:0 12px;text-align:center;text-decoration:none;cursor:pointer;border-right:1px solid #3c3e42}.floor-container .selected-item .floor-number,.floor-number:hover{color:#3af}.floor-container .tableview-li{height:20px}.floor-number.first{border-left:0}.floor-number.last{border-right:0}.floor-container .tableview-selected-border{display:none}"});var r='<a i="{$i}"class="floor-number {$class}" href="javascript:void(0);">{$text}</a>',l=function(e,o){var t=o.getFloorInfo(),n=o.has2DMap(),l=o.hasPlanMap(),s=this.container=document.createElement("div");e.appendChild(s),s.className="floor-container",this._floorIndex=0,this._data=o,this._position={left:0,top:0};var c=this.tableView=new i(s,{viewWidth:304,viewHeight:20,isHorizontal:!0,isFullSize:n||l?!1:!0,margin:"0"});a.each(t,function(e,o){var n="";n=e.realFloor>0?r.replace("{$text}",e.realFloor+"F"):r.replace("{$text}",e.realFloor.toString().replace("-","B")),n=n.replace("{$i}",o).replace("{$class}",0==o?"first":o==t.length-1?"last":""),c.addItemContent(n)});var p=this;c.addEventListener("click",function(e){e.index!==p._floorIndex&&p.dispatchEvent("item_click",{index:e.index})}),c.resize(),baidu.event.on(s,"mouseleave",function(e){for(var o=e.relatedTarget;o;){if("pano-overview-wrapper"==o.id)return;if(o==document.body)break;o=o.parentNode}p.dispatchEvent("fold_overview")})};baidu.lang.inherits(l,baidu.lang.Class),T.object.extend(l.prototype,{setFloorIndex:function(e){this._floorIndex=e,this.tableView.setSelectIndex(this._floorIndex)},getFloorIndex:function(){return this._floorIndex},getData:function(){return this._data},destroy:function(){this._data=null,this._floorIndex=null,this.container.parentNode.removeChild(this.container),this.container=null,this.tableView.destroy()},setPosition:function(e,o,t){var i=this.container;if(t){var a=this._position.left,r=this._position.top,l=e-a,s=o-r,c=new n.Animation,p={duration:400,fps:40,delay:n.Animation.INFINITE,transition:n.Transitions.easeOutQuad,finish:function(){},render:function(e){try{i.style.left=a+l*e+"px",i.style.top=r+s*e+"px"}catch(o){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoOverviewModule/FloorComponent/exception.fire","catch",{msg:o.message||o.description,path:"common:widget/pano/module/PanoOverviewModule/FloorComponent/FloorComponent.js",ln:116})}}};c.build(p),c.start()}else i.style.left=e+"px",i.style.top=o+"px";this._position={left:e,top:o}}}),t.exports=l});