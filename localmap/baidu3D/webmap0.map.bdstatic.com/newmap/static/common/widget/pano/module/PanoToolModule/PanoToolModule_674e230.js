define("common:widget/pano/module/PanoToolModule/PanoToolModule.js",function(o,n,a){var t=o("common:widget/pano/base/ModuleClass.js"),e=4,i=1,s=null,l=t.extend("PanoToolModule",{constructor:function(){},initialize:function(o){try{this._container=o,this._events={},this._addFishboneTool(),this._addShareTool(),this._addUploadPano(),this._addClassifySearchTool()}catch(n){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoToolModule/exception.fire","catch",{msg:n.message||n.description,path:"common:widget/pano/module/PanoToolModule/PanoToolModule.js",ln:24})}},getSupportEvents:function(){return["zoom_changed","tool_share_pano","classify_search_panel_visible"]},setItemsEnable:function(o){for(var n=this._container.getElementsByTagName("li"),a=0,t=o.length;t>a;a++){var e=o[a];n[a]&&(e===!0?n[a].style.display="block":e===!1&&(n[a].style.display="none"))}},_addFishboneTool:function(){var o=T('<li id="pano-fishbone-btn"><a id="pano-zoomout-btn" title="放大一级" href="javascript:void(0)" class="pano_button"><span></span></a><div class="pano-zoom-line"><div></div></div><a id="pano-zoomin-btn" href="javascript:void(0)" title="缩小一级" class="pano_button pano_zoom_in_disabled"><span></span></a></li>');T.dom(this._container).prepend(o);var n=this,a=T.g("pano-zoomin-btn"),t=T.g("pano-zoomout-btn"),e=T.g("pano-upload-btn");n._events.tool_zoom_out=function(){T("#pano-zoomout-btn").hasClass("pano_zoom_out_disabled")||n.dispatchEvent("zoom_changed",{data:1})},n._events.tool_zoom_in=function(){T("#pano-zoomin-btn").hasClass("pano_zoom_in_disabled")||n.dispatchEvent("zoom_changed",{data:-1})},n._events.tool_upload_redirect=function(){addStat(STAT_CODE.STAT_PANORAMA,{item:"pano-ugc-entrance-click"})},T.on(t,"click",n._events.tool_zoom_out),T.on(a,"click",n._events.tool_zoom_in),T.on(e,"click",n._events.tool_upload_redirect)},_addClassifySearchTool:function(){s=T('<li id="pano-classify-search-btn"><a class="pano_button" title="分类周边检索" href="javascript:void(0);"><span></span></a><div class="pano-zoom-line"><div></div></div></li>')[0],T.dom(this._container).prepend(s);var o=this;this._events.tool_classify_search=function(){o.dispatchEvent("classify_search_panel_visible",{data:s}),T.un(s,"mouseenter",o._events.tool_classify_search)},T.on(s,"mouseenter",this._events.tool_classify_search)},setClassifySearchVisible:function(o){s&&(s.style.display=o?"block":"none")},updateFishBone:function(o){T("#pano-zoomout-btn").removeClass("pano_zoom_out_disabled"),T("#pano-zoomin-btn").removeClass("pano_zoom_in_disabled"),o===e?T("#pano-zoomout-btn").addClass("pano_zoom_out_disabled"):o===i&&T("#pano-zoomin-btn").addClass("pano_zoom_in_disabled")},_addShareTool:function(){var o=T('<li id="pano-share-btn"><a class="pano_button" title="点击分享全景" href="javascript:void(0);"><span></span></a></li>');T.dom(this._container).prepend(o);var n=this;n._events.tool_share_pano=function(o){o.preventDefault(),n.dispatchEvent("tool_share_pano",{data:""})},T.on(o,"click",n._events.tool_share_pano)},_addUploadPano:function(){var o=T('<li id="pano-upload-btn"><a id="tool-ugc-upload" class="pano_button" title="上传全景照片" href="http://pai.baidu.com/" target="_blank"><span></span></a><div class="pano-zoom-line"><div></div></div></li>');T.dom(this._container).prepend(o)},dispose:function(){T.un(T.g("pano-zoomout-btn"),"click",this._events.tool_zoom_out),T.un(T.g("pano-zoomin-btn"),"click",this._events.tool_zoom_in),T.un(T.g("pano-upload-btn"),"click",this._events.tool_upload_redirect),T.un(T.g("pano-share-btn"),"click",this._events.tool_share_pano),this._container.removeChild(T.g("pano-fishbone-btn")),this._container.removeChild(T.g("pano-share-btn"))}});a.exports=l});