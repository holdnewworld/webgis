define("common:widget/pano/module/PanoActivityModule/PanoActivityModule.js",function(t,i,o){var n=t("common:widget/pano/base/ModuleClass.js"),e=t("common:widget/pano/base/service.js"),a=n.extend("PanoActivityModule",{initialize:function(t){try{this._panoContext=t,this._createActivityIcon();var i=e.getActivityPano(),o=this;i.then(function(t){o._activityPanoList=t,o.updateActivityIcon()})}catch(n){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/widget/pano/module/PanoActivityModule/exception.fire","catch",{msg:n.message||n.description,path:"common:widget/pano/module/PanoActivityModule/PanoActivityModule.js",ln:21})}},_createActivityIcon:function(){var t=T.dom.create("div",{id:"panoActivityIcon","class":"panoActivityIcon"});T.g("pano-expand-wrapper").appendChild(t);var i=this;T.on(t,"click",function(){var t=i._panoContext.getPanoOptions(),o=t.panoId;i._showLottery(o)}),this._activityIcon=t},updateActivityIcon:function(){for(var t=this._panoContext,i=t.getPanoOptions(),o=i.panoId,n=this._activityPanoList.length-1;n>=0;n--)if(this._activityPanoList[n].panoId===o)return void this._show();this._hide()},_show:function(){this._activityIcon.style.display="block"},_hide:function(){this._activityIcon.style.display="none"},dispose:function(){this._panoContext=null,this._activityIcon.parentNode.removeChild(this._activityIcon),this._activityIcon=null,this._activityPanoList=null},_showLottery:function(t){var i=T.dom.create("iframe");i.id="panoActivity",i.setAttribute("allowTransparency","true"),i.className="pano_lottery",i.style.height=document.body.scrollHeight+"px",i.src="http://map.baidu.com/zt/qjyzn/pcLottery.html#"+t,document.body.appendChild(i)}});window.hideLottery=function(){var t=document.getElementById("panoActivity");document.body.removeChild(t)},o.exports=a});