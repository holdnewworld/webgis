define("common:widget/ui/sms/sms.js",function(t,e,n){function o(t,e){var n=t.getDom(),o=map.getSize(),i=T.dom.getPosition(map.getContainer());width=o.width,height=o.height,x=width<=e.width?0:parseInt(width/2)-parseInt(e.width/2),y=height<=e.height?0:parseInt(height/2)-parseInt(e.height/2),x+=i.left,y+=i.top,e&&"undefined"!=typeof e.right?n.style.right=e.right+"px":n.style.left=e&&"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/widget/ui/sms/!=typeof e.left?e.left+"px":x+"px",n.style.top=e&&"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/widget/ui/sms/!=typeof e.top?e.top+"px":e&&"undefined"!=typeof e.bottom?e.bottom+"px":y+"px"}function i(t,e,n,i,s,r){o(l.spop,d),t==u.target||(e?u.uid==e:0)||(u.target=t,u.uid=e?e:null,m(function(o){p.load("SMS",{dom:l.spop.content,cinfo:{infoWin:l.spop,tplUrl:o.tplUrl,oldUrl:o.oldUrl,curUrl:o.curUrl,target:t,uid:e||"",type:n||0,uidType:r}})},e,n,i))}var p=t("common:widget/com/componentManager.js"),s=t("common:widget/ui/constant/Constant.js"),r=(t("common:widget/ui/util/util.js"),t("common:widget/ui/mapShare/MapShare.js")),l={config:{DETAIL_URL:"../../../../../../../map.baidu.com/-newmap=1&.htm"/*tpa=http://map.baidu.com/?newmap=1&*/,NEWSEND_URL:"/ag/sms/sendnew/",READY_URL:"/ag/sms/readynew?url=",BMW_INFO:"http://"+location.host+"/?qt=inf&ie=utf-8",BMW_DATA_URL:"http://"+location.host+"/car/send"},spop:null},u={target:null,uid:null},d={isTitle:!1,content:"",extClass:"loginStyle",width:655,height:457,clickClose:!1,close:function(){u.target=null,u.uid=null,r.setSmSCode(0);var t=currentComponent;t&&t.cinfo.sms&&(t.cinfo.sms=null)},free:function(){delete l.spop}},c={POI:"s=inf%26uid%3D_UID_%26c%3D_CITY_%26newmap%3D1%26it%3D1",LINE:"s=bsl%26bsltp%3D0%26uid%3D_UID_%26c%3D_CITY_%26newmap%3D1"},a=function(t){switch(parseInt(t,10)){case s.POI_TYPE_NORMAL:return c.POI;case s.POI_TYPE_BUSSTOP:return c.POI;case s.POI_TYPE_BUSLINE:return c.LINE;case s.POI_TYPE_SUBSTOP:return c.POI;case s.POI_TYPE_SUBLINE:return c.LINE}},m=function(t,e,n,o){r.getLink(function(i){var p=encodeURIComponent(i),s={oldUrl:p};e&&"undefined"!=typeof n?(r.setSmSCode(e),s.curUrl="&current_url="+p):s.curUrl="",e&&"undefined"!=typeof n?s.tplUrl=encodeURIComponent(l.config.DETAIL_URL+a(n).replace("_UID_",e).replace("_CITY_",o)):(r.setSmSCode(e),s.tplUrl=p),t&&t(s)},!0,{sms:!0,uid:e})},f=function(e,n,o,p,s,r){if(l.spop){if(l.spop.visible)return;l.spop.render(),l.spop.show(),i(e,n,o,p,s,r)}else t.async("common:widget/ui/Popup/Popup.js",function(t){l.spop=new t(d),l.spop.addConnectDom(e),l.spop.render(),l.spop.hide(),i(e,n,o,p,s,r)});return!1};l.ready=f,n.exports=l});