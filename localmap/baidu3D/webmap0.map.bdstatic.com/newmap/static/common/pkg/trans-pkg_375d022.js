define("common:widget/ui/taxiMgr/TaxiMgr.js",function(t,e,o){var i={openTaxi:function(e,o,n){var a=this,d=null,s={title:"打车费用",content:"",width:458,height:170,close:function(){i.taxiPop=null}};o=o&&"object"==typeof o?T.extend({},o):{},this.taxiPop?this.taxiPop.close():t.async(["common:widget/ui/Popup/Popup.js","common:widget/com/TaxiPanel/TaxiPanel.js"],function(t,i){d=this.taxiPop=new t(s),d.addConnectDom(e),d.render(),d.hide(),a.taxiPanel=new i({dom:d.content,cinfo:{query:o.query,data:o.data,taxiPop:d}}),d.show(),d.setHeight(T.G("taxi").offsetHeight+53);var p,c,f=d.getDom(),l=T.dom.getPosition(e);c=T.g("undefined"==typeof n?"main_result_content":"cbtMiddle"),p=c.scrollTop;var x=(l.left-s.width+e.offsetWidth,l.top-d.config.height-p+3),h=l.top,u=(document.body.offsetWidth,document.body.offsetHeight);u-h>h?(f.style.left="15px",f.style.top=l.top+20+"px"):(f.style.left="15px",f.style.top=x+"px")})}};o.exports=i});
;define("common:widget/ui/transInfoWindow/transInfoWindow.js",function(n,t,i){function e(n,t,i){return n.replace(/[\u0100-\uffff]/g,"##").length>t?n=n.substring(0,parseInt(t/2)-1)+i:n}function o(n){if(n){var t=e(n,26,"..."),i=["<p class='iw_poi_title' title='"+n+"'>"+t];return i.push("<a id='trans_zoom_out' style='display:none' href='javascript:void(0)'>缩小</a>"),i.push("<a id='trans_zoom_in' href='javascript:void(0)'>放大</a></td>"),i.push("</p>"),i.join("")}}function a(n){var t=n.content,i=n.curIndex,o=n.total,a=n.nextInfo,s=["<div class='iw_poi_content'>"];if(t&&s.push("<div class='iw_trans_content'>"+t+"</div>"),s.push("<div id='trans_info_content'></div>"),s.push('<table width="99%" cols="2" class="iw_trans_nav"><tbody><tr>'),s.push('<td nowrap="nowrap" width="50%" align="left">'),s.push(0==i?'<span class="trans_disabled" >上一步</span>':'<a id="trans_prev" href="javascript:void(0)">上一步</a>'),s.push("</td>"),s.push('<td nowrap="nowrap" width="50%" align="right">'),i==o-1)s.push('<span class="trans_disabled" >下一步</span>');else{var d=e(a,25,"...");s.push('<a id="trans_next" href="javascript:void(0)">下一步</a>'),s.push('<span style="color:#6b6b6b" title="'+a+'">('+d+")</span>")}return s.push("</td></tr></tbody></table>"),s.join("")}function s(){var n=T.G("trans_zoom_in"),t=T.G("trans_zoom_out");n&&t&&(map.zoomLevel==BMap.MapType[map.mapType].zoomLevelMax?(n.style.display="none",t.style.display="inline"):(n.style.display="inline",t.style.display="none"))}function d(n,t){var i=t.curIndex,e=t.nextTransCbk,o=t.zoomTransCbk,a=t.obj;n.addEventListener("open",function(){n.removeEventListener("open",arguments.callee)}),n.addEventListener("open",function(){var n=T.G("trans_prev"),t=T.G("trans_next"),d=T.G("trans_zoom_in"),r=T.G("trans_zoom_out");n&&T.on(n,"click",function(){e&&"function"==typeof e&&e(i-1,a),addStat("schemeinfowin.blcheckbysteps.prestep")}),t&&T.on(t,"click",function(){e&&"function"==typeof e&&e(i+1,a),addStat("schemeinfowin.blcheckbysteps.nextstep")}),d&&r&&(T.on(d,"click",function(){o&&"function"==typeof o&&o(0,a),d.style.display="none",r.style.display="inline"}),T.on(r,"click",function(){o&&"function"==typeof o&&o(1,a),d.style.display="inline",d.style.display="none"})),s()}),map.addEventListener("zoomend",s),n.addEventListener("close",function(){map.removeEventListener("zoomend",s)})}function r(n,t,i){var e=T.g("lfsPanel");e.style.display=t?"block":"none",e.innerHTML=i?i:"",poiUidObj[iwuid].iw.redraw()}function l(n,t,i,e,o,a){var s,d,l,p=t.indexOf("_"),u=[];if(p>=0&&(s=t.split("_"),d=s[0],l=s[1]),poiUidObj[a].link){var f=poiUidObj[a].guid.split("_")[0];f!=d&&f!=l&&(T.rc(poiUidObj[a].link,"active"),T.ac(n,"active"),poiUidObj[a].link=n,poiUidObj[a].guid=t)}else T.ac(n,"active"),poiUidObj[a].link=n,poiUidObj[a].guid=t;var h="bsl&newmap=1&c="+o+"&uid="+(d?d:t)+"&ie=utf-8&t="+(new Date).getTime();c.fetch(h,function(n){var t=n.content[0];u.push("<dl tid='iwLineBox' class='lfs'><dt>"+t.name),p>=0&&u.push(" <a href='javascript:void(0)' onclick='getLFS(this, \""+l+"_"+d+'", "'+i+'", '+e+", "+o+', "'+a+"\");return false;'>返程</a>"),u.push('</dt><dd><table cellspacing="1" cellpadding="0" width="100%">'),t.startTime&&t.endTime?u.push("<tr><th>起点站首末班时间</th><td>"+t.startTime+" - "+t.endTime+"</td></tr>"):(t.startTime&&u.push("<tr><th>起点站首班时间</th><td>"+t.startTime+"</td></tr>"),t.endTime&&u.push("<tr><th>起点站末班时间</th><td>"+t.endTime+"</td></tr>")),t.maxPrice&&u.push("<tr><th>单程最高票价</th><td>"+(t.maxPrice/100).toFixed(2)+"元</td></tr>"),u.push("</table></dd></dl>"),r(i,!0,u.join(""))})}{var p=n("common:widget/ui/util/util.js"),c=n("common:widget/ui/searchData/searchData.js"),u=n("common:widget/ui/config/config.js"),f=u.modelConfig;u.mapConfig}window.getLFS=l,i.exports={poiUidObj:{},createTransInfoWnd:function(n){if(n.title){var t=n.title,i=(n.content,n.curIndex),e=n.total,s=(n.nextInfo,n.nextTransCbk,n.zoomTransCbk,n.obj,n.transUid),r=o(t),l=a(n),p=[0,-10];(0==i||i==e-1)&&(p[1]=-30);var c=new BMap.InfoWindow(l,{title:r,height:0,width:263,margin:[42,10,20,10]});return c._config.collisions=[[65,245],[233,39],[10,10],[10,10]],c._transUid=s,d(c,n),c}},transInfoWindow:function(n,t,i){var e={ccode:f.cityCode,showLine:!0},o=this,a=n.getPoint();if(i&&"object"==typeof i&&(e=T.extend(e,i)),t._transUid){var s=t._transUid;c.fetch("inf&uid="+s,function(i){if(i.content){var a=i.content.addr,d=i.content.tel,r=i.content.poiType,l=i.content.uid,p=i.content.blinfo;o.poiUidObj[s]={addr:a,tel:d,type:r,pid:l,blinfo:p,iw:t}}else o.poiUidObj[s]={addr:null,tel:null,type:null,pid:null,blinfo:null};o.setTransInfoWd(n,t,o.poiUidObj[s],e)})}else n.openInfoWindow(t);"BusTrans"==window.currentComponent._className&&(window.currentComponent.isOperated?p.isInBounds(a)||map.setCenter(a):map.centerAndZoom(a,17))},setTransInfoWd:function(n,t,i,e){var o=i.addr,a=i.tel,s=i.type,d=i.pid,r=i.blinfo,l=[];if(n.openInfoWindow(t),o&&""!=o)if(0==s)l.push("地址："+o+"<br/>");else if(e.showLine){l.push(1==s?"途经公交：":"途经地铁：");for(var c,u=p.formatBlinfo(r),f=0,h={},m=u.length;m>f;f++){var c=r[f].addr;h[c]||(l.push((0!=f?", ":"")+"<a class='stalink' href='javascript:void(0)' "),l.push("onclick='getLFS(this, \""+u[f].uid+'", "'+d+'", '+s+", "+e.ccode+', "'+t._transUid+"\")'>"),l.push(u[f].addr+"</a>"),h[c]=!0)}l.push('<span class="lfsPanel" id="lfsPanel"></span>')}a&&""!=a&&l.push("电话："+a+"<br/>"),l=l.join("");var v=T.g("trans_info_content");v&&(v.style.display="block",v.innerHTML=l,v.style.paddingBottom="5px"),t.redraw()}}});
;define("common:widget/ui/SchemeFaver/SchemeFaver.js",function(t,a,e){var i=t("common:widget/ui/SyncMgr/SyncMgr.js"),n=t("common:widget/ui/config/config.js"),s=n.modelConfig,d=(n.mapConfig,{isRepeat:function(t,a){t=t||{},t.data||(t.data=d.makeData.call(this,t));for(var e=(i.current_tab_index,i.favCloudData),n=0,s=e.length;s>n;n++){var o=e[n];if(d.isSameScheme(t.data,o.data))return t.dom.className="i hasafav",t.dom.title="取消收藏",a&&a({id:o.id,data:o.data,i:n}),!0}return t.dom&&(t.dom.className="i afav",t.dom.title="加入收藏夹"),!1},isSameScheme:function(t,a){if(!t||!a)return!1;{var e=t.sfavnode,i=t.efavnode,n=a.sfavnode,s=a.efavnode;T.json.stringify(t.wp),T.json.stringify(a.wp)}return t.plankind!=a.plankind||t.pathtype!=a.pathtype||t.busidx!=a.busidx?!1:e.name!=n.name||i.name!=s.name?!1:"number"!=typeof t.transkind&&"number"!=typeof a.transkind||t.transkind==a.transkind?"number"==typeof t.pagenumber&&"number"==typeof a.pagenumber&&t.pagenumber!=a.pagenumber?!1:!0:!1},makeData:function(t){var a,e,n=i.pk_dict,d=this.start,o=this.end,p=d.pt.split(","),r=o.pt.split(","),c=parseInt(s.cityCode,10),u=a=e=this.currentCity||c,m=d.bus_stop&&d.uid?0:1,h=o.bus_stop&&o.uid?0:1,f=this.strategy,y=this.dragPoints||"",l=parseInt(t.pathtype||0,10),g=parseInt(this.pagenum||0,10),v=n[t.pathtype].t+d.wd+"-"+o.wd,k=0,b="",x="",C="",I=this.trafType||0,y=[];if(this.dragPoints)for(var w=0;w<this.dragPoints.length;w++)y[w]={n:this.dragPoints[w].n,p:this.dragPoints[w].p};switch(t.pathtype){case 0:case 5:var S=n[t.pathtype];a=parseInt(this.sCity.code,10),e=parseInt(this.eCity.code,10),b=S[f].ck,C=S[f].txt;break;case 1:case 6:case 7:var D=n[t.pathtype];f=1==I?4:f,b=D[f].ck,C=D[f].txt,k=this.schemeIndex;break;case 2:a=parseInt(this.sCity.code,10),e=parseInt(this.eCity.code,10);break;case 9:var D=n[t.pathtype];b=D[this.csy].ck,C=D[this.csy].txt,x=parseInt(this.cty,10),a=parseInt(this.startCity.code,10),e=parseInt(this.endCity.code,10),l=1,k=this.curLineIndex}var T={sfavnode:{cityid:a,geoptx:parseFloat(p[0]),geopty:parseFloat(p[1]),uid:d.uid,name:d.wd,type:m},efavnode:{cityid:e,geoptx:parseFloat(r[0]),geopty:parseFloat(r[1]),uid:o.uid,name:o.wd,type:h},pathname:v+C,pathtype:l,plankind:b,transkind:x,pagenumber:g,wp:y,curcityid:u,busidx:k,type:1};return 1==t.pathtype&&(T.exptype=this.exptype||"dep",T.exptime=this.exptime||"",T.trafType=I),T},deleteRepeat:function(t,a){t&&(i.upload([{id:t.id,action:2,type:1,data:t.data}],function(){i.showTipInfo("已从收藏夹中删除"),a&&a()}),T.array.removeAt(i.favCloudData,t.i))},getIndexById:function(t){for(var a=0,e=i.favCloudData.length;e>a;a++)if(t==i.favCloudData[a].id)return a},toClound:function(t){t=t||{};var a=d.makeData.call(this,t),e={action:0,type:1,data:a},n=d.isRepeat({dom:t.dom,data:a},function(a){d.deleteRepeat(a,function(){t.dom.className="i afav",t.dom.title="添加到收藏夹"})});n||(addStat("http://webmap0.map.bdstatic.com/newmap/static/common/pkg/oldfav.line.add","click"),i.upload([e],function(a){i.showTipInfo("成功添加到收藏夹"),t.dom.className="i hasafav",t.dom.title="取消收藏";try{e.id=a.content.data[0].id,i.favCloudData.unshift(e)}catch(n){}}))}});e.exports=d});
;define("common:widget/ui/transUtil/transUtil.js",function(t,r,n){var a={getDistanceByPixel:function(t,r){return t&&r?Math.round(Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))):void 0},formatTime:function(t,r){if(!t||isNaN(t))return"";var n="",a=60,i=24*a,e=Math.ceil(t/a);if("bustime"==r){var o=e%10,s=parseInt(e/10);e=0!=o?o>5?10*++s:s?10*s:5:e}var u=parseInt(e/i);e%=i;var f=parseInt(e/a);if(e%=a,u>=1&&(n+=u+"天"),f>=1&&(n+=f+"小时"),e>=1){if(r&&"nav"==r&&u>=1)return n;n+=e+"分钟"}return n}};n.exports=a});
;define("common:widget/view/NavList/NavList.js",function(require,exports,module){function NavList(t){View.call(this),this.expandItemIndex=[],this.data=t}var View=require("common:widget/view/View.js"),mapUtil=require("common:widget/ui/mapUtil/mapUtil.js"),util=require("common:widget/ui/util/util.js"),Share=require("common:widget/ui/mapShare/MapShare.js"),PanoUtil=require("common:widget/ui/PanoUtil/PanoUtil.js"),PanoEntranceUtil=require("common:widget/ui/PanoEntranceUtil/PanoEntranceUtil.js");T.inherits(NavList,View,"NavList"),T.object.extend(NavList.prototype,{render:function(){try{var template=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';if(eval(_template_varName),_template_fun_array.push('<div id="main_result_content" class="navlist-view">    <div class="special">        <p id="drv_km" class="km">            '),1==data.routes.length&&(_template_fun_array.push("                "),data.hidePrint||_template_fun_array.push('                <span class="i2 printMouseOut" tid="drivePrintBtn" id="drivePrintBtnID" onclick=""><a href="javascript:void(0)" title="打印" target="Print"><img src="',"/newmap/static/common/images/transparent.gif",'" alt="打印" /></a></span>                <b class="sp">|</b>                '),_template_fun_array.push("                "),data.hideFav||_template_fun_array.push('                <span id="driveFavBtn" tid="driveFavBtn" class="i2 favMouseOut" title="加入收藏夹"><img src="',"/newmap/static/common/images/transparent.gif",'" alt="加入收藏夹" /></span>                '),_template_fun_array.push("                "),data.hideSms||_template_fun_array.push('                <b class="sp">|</b>                <span class="sendMoileMouseOut i2" id="driveSmSBtnID" tid="driveSmSBtn" title="发送到手机"><img src="',"/newmap/static/common/images/transparent.gif",'" alt="发送到手机" /></span>                '),_template_fun_array.push("            ")),_template_fun_array.push('            <span id="navDis" class="navDisResultZ">',"undefined"==typeof data.extInfo?"":baidu.template._encodeHTML(data.extInfo),"</span>        </p>        "),data.wpList&&data.wpList.length){_template_fun_array.push('        <div class="via">            <table>                ');for(var i=0;i<data.wpList.length;i++)_template_fun_array.push('                    <tr valign="top">                        '),0===i&&_template_fun_array.push('                        <td rowspan="',"undefined"==typeof(data.wpList.length+1)?"":data.wpList.length+1,'">经过</td>                        '),_template_fun_array.push("                        <td>","undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof data.wpList[i].name?"":baidu.template._encodeHTML(data.wpList[i].name),'</td>                        <td><a class="del-via" href="javascript:void(0)" data-tpindex="',"undefined"==typeof(data.wpList[i].tpIndex+1)?"":baidu.template._encodeHTML(data.wpList[i].tpIndex+1),'">删除</a></td>                    </tr>                ');_template_fun_array.push("            </table>        </div>        ")}_template_fun_array.push("        ");var h4Index=0;_template_fun_array.push("        ");var itemIndex=0;_template_fun_array.push('        <div class="info">            <h3 class="no1 arr" data-index="0">                <a data-name="',"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof data.start.name?"":baidu.template._encodeHTML(data.start.name),'" data-uid="',"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof data.start.uid?"":baidu.template._encodeHTML(data.start.uid),'" data-point="',"undefined"==typeof data.start.points?"":data.start.points,'" data-poitype="',"undefined"==typeof data.start.poiType?"":baidu.template._encodeHTML(data.start.poiType),'" data-direction="',"undefined"==typeof data.start.direction?"":baidu.template._encodeHTML(data.start.direction),'" href="javascript:void(0);" class="list_street_view_poi" style="visibility:hidden; _position:static"><img src="',"/newmap/static/common/images/transparent.gif",'" ></a>                '),data.routes[0].hasSubList&&_template_fun_array.push('                <span data-index="',"undefined"==typeof h4Index?"":h4Index,'" class="drv_show_all blue">显示全部详情</span>                '),_template_fun_array.push('                <span class="drv_title" title="',"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof data.start.name?"":baidu.template._encodeHTML(data.start.name),'"><strong>',"undefined"==typeof baidu.string(data.start.name).subByte(20,"...")?"":baidu.template._encodeHTML(baidu.string(data.start.name).subByte(20,"...")),"</strong></span>                "),h4Index++,_template_fun_array.push("            </h3>            ");var mainIndex=0;_template_fun_array.push("            ");for(var i=0;i<data.routes.length;i++){_template_fun_array.push("                ");var mainList=data.routes[i];_template_fun_array.push('                <div id="table_info',"undefined"==typeof mainIndex?"":mainIndex,'" class="table_info" data-index="',"undefined"==typeof mainIndex?"":mainIndex,'">                    ');for(var k=0;k<mainList.length;k++){_template_fun_array.push("                        ");var subList=mainList[k].subList;if(_template_fun_array.push("                        "),mainList[k].title&&(_template_fun_array.push('                            <h4 data-itemIndex="',"undefined"==typeof itemIndex?"":itemIndex,'" data-index="',"undefined"==typeof mainIndex?"":mainIndex,'" class="main-roude-title ',"undefined"==typeof(subList&&subList.length?"has-sub":"")?"":baidu.template._encodeHTML(subList&&subList.length?"has-sub":""),'">                                <a data-point="',"undefined"==typeof mainList[k].points?"":mainList[k].points,'" data-poitype="" data-direction="',"undefined"==typeof mainList[k].direction?"":baidu.template._encodeHTML(mainList[k].direction),'" href="javascript:void(0);" class="list_street_view_poi" style="visibility:hidden; _position:static"><img src="',"/newmap/static/common/images/transparent.gif",'" ></a>                                '),subList&&subList.length&&_template_fun_array.push('                                <span class="main-roude-title-bt blueA">展开</span>                                '),_template_fun_array.push("                                "),mainIndex++,_template_fun_array.push('                                <span class="main-roude-index">',"undefined"==typeof mainIndex?"":mainIndex,'.</span>                                <p class="main-roude-title-content">',"undefined"==typeof mainList[k].title?"":mainList[k].title,"</p>                            </h4>                        ")),_template_fun_array.push("                        "),subList&&subList.length){_template_fun_array.push('                        <ul class="main-roude-content" ',"undefined"==typeof(mainList[k].title?'style="display:none;"':"")?"":mainList[k].title?'style="display:none;"':"",">                            ");for(var j=0;j<subList.length;j++)_template_fun_array.push('                               <li data-index="',"undefined"==typeof itemIndex?"":itemIndex,'">                                   <a data-point="',"undefined"==typeof subList[j].points?"":subList[j].points,'" data-poitype="" data-direction="',"undefined"==typeof subList[j].direction?"":baidu.template._encodeHTML(subList[j].direction),'" href="javascript:void(0);" class="list_street_view_poi" style="visibility:hidden; _position:static"><img src="',"/newmap/static/common/images/transparent.gif",'" ></a>                                   ',"undefined"==typeof(j+1)?"":j+1,"","undefined"==typeof(mainList[k].title?")":".")?"":mainList[k].title?")":"."," ","undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof subList[j].desc?"":subList[j].desc,"                               </li>                               "),itemIndex++,_template_fun_array.push("                            ");_template_fun_array.push("                        </ul>                        ")}_template_fun_array.push("                    ")}_template_fun_array.push("                </div>                "),i<data.routes.length-1&&(_template_fun_array.push('                <h3 class="no3 arr" data-index="',"undefined"==typeof(i+1)?"":i+1,'">                    <a data-name="',"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof data.tpList[i].name?"":baidu.template._encodeHTML(data.tpList[i].name),'" data-point="',"undefined"==typeof data.tpList[i].points?"":data.tpList[i].points,'" data-poitype="" data-direction="',"undefined"==typeof data.tpList[i].direction?"":baidu.template._encodeHTML(data.tpList[i].direction),'" href="javascript:void(0);" class="list_street_view_poi" style="visibility:hidden; _position:static"><img src="',"/newmap/static/common/images/transparent.gif",'" ></a>                    '),data.routes[i].hasSubList&&_template_fun_array.push('                    <span data-index="',"undefined"==typeof h4Index?"":h4Index,'" class="drv_show_all blue">显示全部详情</span>                    '),_template_fun_array.push('                    <span class="drv_title" title="',"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof data.tpList[i].name?"":baidu.template._encodeHTML(data.tpList[i].name),'"><strong>',"undefined"==typeof baidu.string(data.tpList[i].name).subByte(18,"...")?"":baidu.template._encodeHTML(baidu.string(data.tpList[i].name).subByte(18,"...")),"</strong></span>                    "),h4Index++,_template_fun_array.push("                </h3>                ")),_template_fun_array.push("            ")}_template_fun_array.push('            <h3 class="no2" data-index="',"undefined"==typeof i?"":i,'">                <a data-name="',"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof data.end.name?"":baidu.template._encodeHTML(data.end.name),'" data-uid="',"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof data.end.uid?"":baidu.template._encodeHTML(data.end.uid),'" data-point="',"undefined"==typeof data.end.points?"":data.end.points,'" data-poitype="',"undefined"==typeof data.end.poiType?"":baidu.template._encodeHTML(data.end.poiType),'" data-direction="',"undefined"==typeof data.end.direction?"":baidu.template._encodeHTML(data.end.direction),'" href="javascript:void(0);" class="list_street_view_poi" style="visibility:hidden; _position:static"><img src="',"/newmap/static/common/images/transparent.gif",'" ></a>                <span class="drv_title" title="',"undefined"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==typeof data.end.name?"":baidu.template._encodeHTML(data.end.name),'"><strong>',"undefined"==typeof baidu.string(data.end.name).subByte(20,"...")?"":baidu.template._encodeHTML(baidu.string(data.end.name).subByte(20,"...")),'</strong></span>            </h3>        </div>    </div>    <a href="javascript:void(0)" id="routVideoEntrance"></a>    '),data.cmsAds&&_template_fun_array.push('    <div id="pctomoNavId" class="pctomo_bus">        ',"undefined"==typeof data.cmsAds?"":data.cmsAds,"</div>    "),_template_fun_array.push("</div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],style=".navlist-view .special{padding-right:18px;margin-bottom:10px}.navlist-view .km{height:28px;line-height:28px;text-align:left;padding-left:5px;padding-right:5px;margin-bottom:5px;background-color:#E4EBF8;cursor:pointer}.navlist-view .navDisResultZ{font-size:12px;color:gray}.navlist-view .via{padding:3px 2px 3px 0}.navlist-view .info{border-top:1px solid #E6E6E6;color:#000}.navlist-view .info li{cursor:pointer;padding:5px 6px 5px 25px;border-bottom:1px solid #E6E6E6;line-height:20px;overflow:hidden}.navlist-view .info li span{font-weight:700}.navlist-view .info li span.b{color:#3d6dcc}.navlist-view .info .focus li{background:#EAEDF5}.navlist-view .info h3{height:24px;font-size:12px;color:#fff;padding:5px 6px 0 25px;border-bottom:1px solid #E6E6E6;overflow:hidden}.navlist-view .info h3 .drv_show_all{float:right;padding:7px 3px 7px 15px;margin-top:-5px;*line-height:18px;font-weight:100;cursor:pointer;background:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/new_map_nav_c10446f.gif) no-repeat 0 -195px}.navlist-view .info h3 .drv_show_all_focus{background-position:0 -230px}.navlist-view .info h3 .drv_title{display:block;float:left;background:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/bgs_6dbfd12.gif) no-repeat right -160px;margin-left:2px}.navlist-view .info h3 strong{display:block;line-height:19px;padding:0 0 5px 8px;margin-right:8px;background:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/bgs_6dbfd12.gif) no-repeat 0 -160px}.navlist-view .info h3.no1{background:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/trans_icons_45ed3d3.png) no-repeat 2px 4px;cursor:pointer}.navlist-view .info h3.no2{background:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/trans_icons_45ed3d3.png) no-repeat 2px -22px;cursor:pointer}.navlist-view .info h3.no3{background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/tpicon_ea18b98.png) no-repeat -473px -2px;cursor:pointer}.navlist-view .info li.sel{background:#F2F2F2}.navlist-view .info li.sel2{background:#F2F2F2;cursor:default}.navlist-view .info .main-roude-title{cursor:pointer;font-size:12px;font-weight:100;border-bottom:#e6e6e6 solid 1px;line-height:20px;padding:5px 6px 5px 0}.navlist-view .info .main-roude-title .main-roude-title-content{overflow:hidden}.navlist-view .info .main-roude-title .main-roude-title-content span{font-weight:700}.navlist-view .info .main-roude-title .main-roude-index{float:left;width:25px;text-align:center}.navlist-view .info .main-roude-title .main-roude-title-bt{float:right;margin-right:8px}.navlist-view .info .main-roude-title_focus{background-color:#f8f8f8}.navlist-view .nav_ads a{color:#4673c6;display:inline-block;line-height:25px}.navlist-view .km .i{height:15px;line-height:15px;overflow:hidden;float:right;margin:6px 0 0;float:right;zoom:1;cursor:pointer}.navlist-view .km .i2{height:22px;line-height:22px;overflow:hidden;float:right;margin:6px 0 0;float:right;zoom:1;margin-top:3px;cursor:pointer}.navlist-view .km .sp{float:right;color:#c5d2ec;margin:0 4px;font-weight:400}.navlist-view .sendMoileMouseOut{width:77px;height:14px;float:left;background:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/tools_img_39c80b4.png) no-repeat 0 -226px;cursor:pointer}.navlist-view .sendMoileMouseOver{width:77px;height:14px;float:left;background:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/tools_img_39c80b4.png) no-repeat 0 -250px;cursor:pointer}.navlist-view .favMouseOut{width:14px;height:14px;float:left;background:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/tools_img_39c80b4.png) no-repeat -28px -203px;cursor:pointer}.navlist-view .favMouseOver{width:14px;height:14px;float:left;background:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/tools_img_39c80b4.png) no-repeat -44px -203px;cursor:pointer}.navlist-view .printMouseOut{width:14px;height:14px;float:left;background:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/tools_img_39c80b4.png) no-repeat -58px -202px;cursor:pointer}.navlist-view .printMouseOver{width:14px;height:14px;float:left;background:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/tools_img_39c80b4.png) no-repeat -74px -202px;cursor:pointer}.navlist-view #drv_km #drivePrintBtnID a{display:block;width:14px;height:14px}#routVideoEntrance{display:none;height:24px;width:119px;margin-top:10px;margin-bottom:20px;margin-left:190px;background:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/pano_whole/video-play-button-8_c23fd86.png) 0 0 no-repeat;_background:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/pano_whole/video-play-button-8_c23fd86.png) 0 0 no-repeat}#routVideoEntrance:hover{background-position:-119px 0}";return require.loadCss({content:style,name:"NavList"}),this.$el=T(template({data:this.data})),this.$el}catch(e){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/pkg/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/view/NavList/NavList.js",ln:53})}},initialize:function(){try{var t=this;this.bindEvents(),this.data.showScrollPanel&&(this.scrollPanel=new baidu.ui.ScrollPanel({container:"main_result_content",overflow:"overflow-y",autoUpdate:!1})),this.resizeNavContent&&T.un(window,"onresize",this.resizeNavContent),this.resizeNavContent(),T.on(window,"onresize",this.resizeNavContent),this.scrollPanel&&this.scrollPanel.render("main_result_content"),T.on(window,"onresize",function(){t.scrollPanel&&t.scrollPanel.update()}),t.scrollPanel&&t.scrollPanel.update(),require.async("common:widget/pano/base/util.js",function(e){e.hasRouteVideo().then(function(e){t.setPanoEntrances(e)})})}catch(e){"undefined"!=typeof alog&&alog("http://webmap0.map.bdstatic.com/newmap/static/common/pkg/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/view/NavList/NavList.js",ln:92})}},unload:function(){this.scrollPanel=null,T.un(window,"onresize",this.resizeNavContent)},bindEvents:function(){var t=this;this.$el.find(".km").click(function(){t.dispatchEvent("kmclick")}),this.$el.find(".main-roude-title").click(function(){if(!T(this).hasClass("expand")){var e=this.getAttribute("data-index"),a=this.getAttribute("data-itemIndex");t.dispatchEvent("mainlistclick",{groupIndex:parseInt(e),itemIndex:parseInt(a)})}}),this.$el.find(".main-roude-title").mouseover(function(){var e=this.getAttribute("data-index"),a=this.getAttribute("data-itemIndex");t.dispatchEvent("mainlistmouseover",{groupIndex:parseInt(e),itemIndex:parseInt(a)});var i=T(this);i.addClass("main-roude-title_focus")}),this.$el.find(".main-roude-title").mouseout(function(){var e=this.getAttribute("data-index"),a=this.getAttribute("data-itemIndex");t.dispatchEvent("mainlistmouseout",{groupIndex:parseInt(e),itemIndex:parseInt(a)});var i=T(this);i.hasClass("expand")||i.removeClass("main-roude-title_focus")}),this.$el.find(".main-roude-content li").click(function(){var e=this.getAttribute("data-index");t.dispatchEvent("sublistclick",{itemIndex:parseInt(e)})}),this.$el.find(".main-roude-content li").mouseover(function(){var e=this.getAttribute("data-index");t.dispatchEvent("sublistmouseover",{itemIndex:parseInt(e)});var a=T(this);a.addClass("tr sel")}),this.$el.find(".main-roude-content li").mouseout(function(){var e=this.getAttribute("data-index");t.dispatchEvent("sublistmouseout",{itemIndex:parseInt(e)});var a=T(this);a.removeClass("tr sel")}),this.$el.find(".has-sub").click(function(){var e=T(this),a=e.attr("data-index");e.hasClass("expand")?(addStat("navscheme.navscheme.shrinkitem"),t.shrinkItem(a)):(addStat("navscheme.navscheme.expanditem"),t.expandItem(a))}),this.$el.find("h3").click(function(){var e=this.getAttribute("data-index");t.dispatchEvent("h3click",e)}),this.$el.find(".drv_show_all").click(function(e){util.stopBubble(e);var a=this.getAttribute("data-index");t.showAllDes(a)}),this.$el.find(".del-via").click(function(){var e=this.getAttribute("data-tpindex");t.dispatchEvent("delviaclick",e)}),this.$el.find("#driveFavBtn, #drivePrintBtnID, #driveSmSBtnID").mouseover(function(e){t.driveFavBtnMouseOver(this,e)}),this.$el.find("#driveFavBtn, #drivePrintBtnID, #driveSmSBtnID").mouseout(function(e){t.driveFavBtnMouseOut(this,e)})},setPanoEntrances:function(t){var e=this.$el.find("#routVideoEntrance");if("nav"===this.data.type&&(this.data.distanceValue>=2e5||this.data.distanceValue<=300))return void e.hide();for(var a=this.$el.find(".list_street_view_poi"),i=[],n=this,s=0;s<a.length;s++)i.push({uid:a[s].getAttribute("data-uid"),mercatorLnglat:a[s].getAttribute("data-point"),poiType:a[s].getAttribute("data-poitype"),name:a[s].getAttribute("data-name"),direction:360*a[s].getAttribute("data-direction")/12});PanoEntranceUtil.insertPanoInfoInSearch(i,n.data.type,function(i){if(n.panoData=i,PanoEntranceUtil.walkThroughPanoEntrances(a,i,n.data.type,null,t),n.dispatchEvent("panodataready",i),t){for(var s=null,d=0,o=a.length;o>d;d++)if(a[d].getAttribute("data-pid")){s=d;break}null!==s?(e.css("display","block"),e.on("click",function(e){return PanoEntranceUtil.showStreetViewPreview(null,a[s],n.panoData,t),addStat(STAT_CODE.STAT_PANORAMA,{item:"pano-route-video-entrance",from:"map-search"}),e.preventDefault(),!1})):e.hide()}else e.hide()})},setNavCmsAdStrFlag:function(t){this.navCmsAdStrFlag=t,this.resizeNavContent()},resizeNavContent:function(){var t=T.G("route_top"),e=T.G("drive_bottom");if(t){var a=T.G("main_result_content"),i=T.G("navAdContainer"),n=t.parentNode,s=(T.dom.getPosition(n),util.getClientSize()),d=t.offsetHeight,o=e?e.offsetHeight:0,r=i?i.offsetHeight:0,p=142,l=s.height-p-d-o-r-7;this.navCmsAdStrFlag&&(l-=35),n.scrollTop=0,a.style.height=(0>l?0:l)+"px"}},expandItem:function(t,e){var a=T(".main-roude-title")[t],i=T(a),n=i.find(".main-roude-title-bt");i.addClass("expand main-roude-title_focus"),i.next().show(),n.html("收起"),e||(this.expandItemIndex[t]=!0),this.scrollPanel&&this.scrollPanel.update(),Share.listIndex=t+"-"+this.getShareGindex()},shrinkItem:function(t,e){var a=T(".main-roude-title")[t],i=T(a),n=i.find(".main-roude-title-bt");i.removeClass("expand main-roude-title_focus"),i.next().hide(),n.html("展开"),e||(this.expandItemIndex[t]=!1),this.scrollPanel&&this.scrollPanel.update()},hightLightTitle:function(t){this.$el.find(".main-roude-title").each(function(){var e=T(this);e.attr("data-index")==t?e.addClass("main-roude-title_focus"):e.removeClass("main-roude-title_focus")})},hightLightItem:function(t){this.$el.find("li").each(function(){var e=T(this);e.attr("data-index")==t?e.addClass("tr sel"):e.removeClass("tr sel")})},showAllDes:function(t){var e=void 0!==t;t=t||0;var a=T(".drv_show_all")[t],i=T(a),n=T(".table_info")[t];n=T(n);var s=n.find("h4");if(i.hasClass("drv_show_all_focus")){e&&addStat("navscheme.navscheme.showallcancel"),i.removeClass("drv_show_all_focus");for(var d=0;d<s.length;d++){var o=s.get(d).getAttribute("data-index");this.expandItemIndex[o]||this.shrinkItem(o,!0)}}else{e&&addStat("navscheme.navscheme.showall"),i.addClass("drv_show_all_focus");for(var d=0;d<s.length;d++){var o=s.get(d).getAttribute("data-index");this.expandItemIndex[o]||this.expandItem(o,!0)}}},getShareGindex:function(){for(var t=this.$el.find(".main-roude-title"),e="",a=0;a<t.length;a++)T(t[a]).hasClass("expand")&&(e+=a+",");return e=e.replace(/,$/,"")},addToFav:function(t,e){var a=this;util.stopBubble(window.event||e),SyncMgr.checkFav(function(){SchemeFaver.toClound.call(a,{pathtype:0,dom:t})},this)},driveFavBtnMouseOver:function(t,e){util.stopBubble(window.event||e),"undefined"!=typeof t&&("driveSmSBtnID"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==t.id?t.className="sendMoileMouseOver i2":"driveFavBtn"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==t.id?"i hasafav"!=t.className&&(t.className="favMouseOver i2"):"drivePrintBtnID"==t.id&&(t.className="printMouseOver i2"))},driveFavBtnMouseOut:function(t,e){util.stopBubble(window.event||e),"undefined"!=typeof t&&("driveSmSBtnID"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==t.id?t.className="sendMoileMouseOut i2":"driveFavBtn"http://webmap0.map.bdstatic.com/newmap/static/common/pkg/==t.id?"i hasafav"!=t.className&&(t.className="favMouseOut i2"):"drivePrintBtnID"==t.id&&(t.className="printMouseOut i2"))}}),module.exports=NavList});