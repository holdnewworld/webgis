define("common:widget/ui/setDefCity/SetDefCity.js",function(i,t,e){var n=i("common:widget/ui/config/config.js"),o=i("common:widget/ui/util/util.js"),s=(i("common:widget/ui/constant/Constant.js"),i("common:widget/ui/areaCfg/areaCfg.js")),d=n.modelConfig,a=(n.mapConfig,{showCityTip:function(i,t){var e=T.cookie.get("MCITY");if(!(parseFloat(e)>0&&t==d.defalutCityCode)){if(!T.g("defCityTip")){var n='<div id="defCityTip" class="GR_Tip def_city_tip"></div>';o.beforeEndHTML(document.body,n)}if(T.g("defCityTip").innerHTML='<div class="tip_cont">已切换至<span>'+i+'</span>，您可将其<a class="cur_city" href="javascript:void(0);" >设置为默认城市</a></div><button class="close_btn" ></button>',addStat("indexcityex.tipsforchanging.tipsforchanging","show"),T.g("defCityTip2"))T.g("defCityTip2").style.display="none";else{var s='<div id="defCityTip2" class="GR_Tip def_city_tip c_tip">已设置成功！<button class="tip_close_btn"></button></div>';o.beforeEndHTML(document.body,s)}this.setTipPos(T.g("defCityTip"));var a=this;baidu("a.cur_city").on("click",function(t){a.setDefCityByTip(i,this,1),t.preventDefault(),addStat("indexcityex.tipsforchanging.tipsforchanging")}),baidu("button.close_btn").on("click",function(){a.removeTip(T.g("defCityTip"))}),baidu("button.tip_close_btn").on("click",function(){a.removeTip(T.g("defCityTip2"))})}},setDefCityByTip:function(i,t,e){var n=this,o=i,e=e||0;this.getDefCity(o,e,function(i){n.setDefCityByTipCb(i)})},getDefCity:function(i,t,e){var n=map.getBounds(),d=map.getZoom(),a={newmap:1,qt:"def",deftp:t,wd:encodeURIComponent(i),tn:map.mapType,b:"("+n.minX+","+n.minY+";"+n.maxX+","+n.maxY+")",l:d,c:s[i],ie:"utf-8",t:(new Date).getTime()};baidu.ajax("?"+o.jsonToQuery(a),{dataType:"json",success:function(i){i&&i.content&&e&&e(i)},error:function(){}})},setDefCityByTipCb:function(i){1==i.content.error&&(T.G("defCityTip").style.display="none",this.setTipPos(T.G("defCityTip2")),d.defalutCityName=i.def_area_name,d.defalutCityCode=i.def_area_id)},setTipPos:function(i){this.defSetTimeFunc&&clearTimeout(this.defSetTimeFunc),i.style.display="block";var t=T.g("MapInfoCon").clientWidth,e=o.getClientSize().width,n=i.clientWidth,s=e/2-n/2;map.fullScreenMode?i.style.top="38px":(i.style.top="146px",s+=t/2),i.style.left=s+"px",this.defSetTimeFunc=setTimeout(function(){i.style.position="absolute",i.style.display="none"},4500)},removeTip:function(i){i&&(i.style.display="none")},hideCityTip:function(){var i=T.G("defCityTip"),t=T.G("defCityTip2");i&&(i.style.display="none"),t&&(t.style.display="none")},delDefCity:function(){T.cookie.get("MCITY")&&T.cookie.set("MCITY","",{domain:"http://webmap2.map.bdstatic.com/newmap/static/common/widget/ui/setDefCity/baidu.com"}),this.defCname=d.defalutCityName="",this.defCode=d.defalutCityCode="",T.g("SetDefCity").style.display="",T.g("DefCityInfo").style.display="none"}});e.exports=a});