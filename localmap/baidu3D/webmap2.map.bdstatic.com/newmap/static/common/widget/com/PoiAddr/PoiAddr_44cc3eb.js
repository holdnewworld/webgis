define("common:widget/com/PoiAddr/PoiAddr.js",function(require,exports,module){function PoiAddr(t){MapComponent.call(this,t),this.addrMarkers=[],this.contMarkers=[],this.viewBounds=[],this.curSelIndex=-1,this.curType=0,this.preAddrIndex=-1,this.preAddrPoiIndex=-1,this.preEvaAddrIndex=-1,this.preRefAddrIndex=-1}var MapComponent=require("common:widget/com/MapComponent.js"),stat=require("common:widget/ui/stat/CodeStat.js"),util=require("common:widget/ui/util/util.js"),constant=require("common:widget/ui/constant/Constant.js"),mapUtil=require("common:widget/ui/mapUtil/mapUtil.js"),searchBox=require("common:widget/ui/searchBox/searchBox.js"),Share=require("common:widget/ui/mapShare/MapShare.js"),BoxContainer=require("common:widget/ui/BoxContainer/BoxContainer.js"),comMgr=require("common:widget/com/componentManager.js"),config=require("common:widget/ui/config/config.js"),modelConfig=config.modelConfig,MapConfig=config.mapConfig,setComplaintCenterURL=require("common:widget/ui/SetComplaintCenter/SetComplaintCenter.js"),ClearBase=require("common:widget/ui/ClearBase/ClearBase.js"),PanoUtil=require("common:widget/ui/PanoUtil/PanoUtil.js");T.lang.inherits(PoiAddr,MapComponent,"PoiAddr"),T.object.extend(PoiAddr.prototype,{render:function(){try{var template=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="mapinfo_con">    <div id="addrs">    ',"undefined"==typeof addrs?"":addrs,'    </div>    <div id="contents">    ',"undefined"==typeof contents?"":contents,'    </div>    <div id="refer" style="padding-left:30px">    ',"undefined"==typeof refer?"":refer,'    </div>    <div id="tips">    ',"undefined"==typeof tips?"":tips,'    </div>    <div id="user_feedback" class="blueC">百度提醒您：结果有错误？请到<a id="mapComplaintCenter" href="http://tousu.baidu.com/map/add?place=',"undefined"==typeof keyword?"":keyword,'" target="_blank">百度地图投诉中心</a>反馈。</div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],templateObj={},json=this.json;json.current_city?(this.sCityCode=json.current_city.code,this.sCityName=json.current_city.name,this.ctype=json.current_city.type):(this.sCityCode=modelConfig.cityCode,this.sCityName=modelConfig.cityName),this.result=json.result,this.curKw=this.result.return_query||this.result.wd,this.sugKw=this.result.wd2||"",this.addrs=json.addrs,this.contents=json.content,this.sugQuery=json.suggestion_query,this.requery=this.result.requery;var sHtml=[],dHtml=[],rHtml=[],count=this.result.count,cn=this.sCityName;this.cinfo._index&&(this.state=this.cinfo._index.split(","));var displayCount=this.addrs&&this.addrs.length;if(!displayCount){sHtml=["<p>在<strong>"+cn+"</strong>"],0!=this.ctype&&sHtml.push("及<strong>全国</strong>范围"),sHtml.push("内未找到相关地点，抱歉。</p>");var href="http://www.baidu.com/s?ie=utf-8&wd="+encodeURIComponent(this.curKw)+"&cl=3";return sHtml.push("<div class='nr_suggest'>百度建议您：","<ul><li>看看输入的文字是否有误</li>","<li>尝试更换输入文字：去掉过于冗长的部分，并用空格键将多个关键词分开</li>",'<li>在百度网页中查找“<a href="'+href+'">'+this.curKw+"</a>”</li>","</ul></div>"),void(T.G("txtPanel").innerHTML=sHtml.join(""))}templateObj.keyword=encodeURIComponent(this.curKw),this.requery&&sHtml.push('<p style="margin-bottom:10px">未找到您所描述的精确信息，为您提供<b>'+this.requery+"</b>的相关结果供参考。</p>");var p=this.addrs[0].precise;if(p){sHtml.push('<table id="tblPreciseAddr" cellspacing="0" cellpadding="0" class="result black">'),sHtml.push("<tbody>");for(var i=0;1>i;i++){var poi=this.addrs[i];sHtml.push('<tr style="cursor:pointer" onmouseover=\'Instance("'+this.guid+'")._highLight(this, '+i+")' onmouseout='Instance(\""+this.guid+'")._unHighLight(this, '+i+")' onclick='Instance(\""+this.guid+'")._selectAddr('+i+")'>"),sHtml.push("<th>"),sHtml.push("<div title='在图上显示该点' style='cursor:pointer;width:19px;height:29px;background:url(http://webmap0.map.bdstatic.com/newmap/static/common/images/geoAddress_c32ee3a.png) no-repeat scroll -1px -5px  transparent;'>"),sHtml.push("</div>"),sHtml.push("</th>"),sHtml.push("<td>"),sHtml.push("<a style='word-wrap:break-word' href='javascript:void(0)' id='addr"+i+"_0_"+this.guid+"'>"+poi.name+"</a>"),sHtml.push("<p>地址："+poi.addr+"</p>"),sHtml.push("</td>"),sHtml.push("</tr>");var me=this;!function(){var t=i,e={offset:constant.A_J_MARKER_OFFSET,imageOffset:new BMap.Size(0,-116),infoWindowOffset:constant.A_J_MARKER_INFOWND_OFFSET},s=new BMap.Icon(constant.A_J_MARKER_IMG,constant.A_J_MARKER_RED_SIZE,e),n={icon:s,baseZIndex:25e5},r=util.parseGeo(poi.geo),d=util.getPointByStr(r.points);me.viewBounds.push(d),marker=new BMap.Marker(d,n),marker.setTitle(me.addrs[t].name),marker.addEventListener("click",function(){me._selectAddr(t)}),marker._stCode=constant.OVERLAY_STYLE.ADDR_MKR_ACC,marker.addEventListener("mouseover",function(){var e=T.g("tblPreciseAddr"),i=e.rows[t];i&&me._highLight(i,t)}),marker.addEventListener("mouseout",function(){var e=T.g("tblPreciseAddr"),i=e.rows[t];i&&me._unHighLight(i,t)}),me.addrMarkers.push(marker),map.addOverlay(marker)}()}sHtml.push("</tbody>"),sHtml.push("</table>");var addrlen=this.addrs.length;addrlen>1&&sHtml.push('<div style="padding-left:30px;margin-bottom:20px;"><table style=\'width:100%\' cellspacing="0" cellpadding="0" ><tr><td style=\'padding:13px 0px 0px 1px;height:1px;color:#4673CC;\'><strong>以下地点可能帮助您参考：</strong></td></tr></table>'),sHtml.push('<table id="tblRefAddr" cellspacing="0" cellpadding="0" >'),sHtml.push("<tbody>");for(var i=1;i<this.addrs.length;i++){var poi=this.addrs[i];sHtml.push("<tr onclick=' Instance(\""+this.guid+'")._selectRefAddr('+i+")'>"),sHtml.push("<th style='padding:6px 0px 0px 1px;'>"),sHtml.push("<div title='在图上显示该点' style='cursor:pointer;width:16px;height:21px;background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/addrs_5158b68.png) no-repeat scroll -67px "+25*(1-i)+"px  transparent;'>"),sHtml.push("</div>"),sHtml.push("</th>"),sHtml.push("<td style='padding:1px 0px 0px 8px;width:100%'>"),sHtml.push("<a style='word-wrap:break-word' href='javascript:void(0)' id='addr"+i+"_0_"+this.guid+"'>"+poi.name+"</a>"),sHtml.push("</td>"),sHtml.push("</tr>");var me=this;!function(){var t=i,e={offset:constant.A_J_ADDR_OFFSET,imageOffset:new BMap.Size(-83,25*(1-i)),infoWindowOffset:constant.A_J_MARKER_INFOWND_OFFSET},s=new BMap.Icon("../../../images/addrs_5158b68.png"/*tpa=http://webmap2.map.bdstatic.com/newmap/static/common/images/addrs_5158b68.png*/,new BMap.Size(20,25),e),n={icon:s,baseZIndex:25e5},r=util.parseGeo(poi.geo),d=util.getPointByStr(r.points);me.viewBounds.push(d),marker=new BMap.Marker(d,n),marker.addEventListener("click",function(){var e=0;1==me.curType&&-1!=me.curSelIndex&&(t=me.curSelIndex,e=me.curType),me.select(t,e,{statCode:STAT_CODE.STAT_PANEL_SELECT})}),marker._stCode=constant.OVERLAY_STYLE.ADDR_MKR_NUM[t-1],marker.addEventListener("mouseover",function(){me._setTop(t,!0,!0)}),marker.addEventListener("mouseout",function(){map.temp.infoWin&&1==map.temp.infoWin.isOpen()&&map.temp.infoWin.overlay===this||me._setTop(t,!1)}),marker.precise=1,me.addrMarkers.push(marker),map.addOverlay(marker)}()}sHtml.push("</tbody>"),sHtml.push("</table></div>"),templateObj.addrs=sHtml.join("");var conlen=this.contents?this.contents.length:0;if(conlen>0){dHtml.push("<table style='width:100%' cellspacing=\"0\" cellpadding=\"0\" ><tr><td style='padding:0px 0px 0px 34px;height:1px;color:#7A96CC'><strong>此地址上有：</strong><hr size='1' color='#BFBFBF'/></td></tr></table>"),dHtml.push('<table id="tblPreciseAddrPoi" cellspacing="0" cellpadding="0" class="result black">'),dHtml.push("<tbody>");for(var i=0;conlen>i;i++){var poi=this.contents[i],poiName=poi.name;poiName.replace(/[\u0100-\uffff]/g,"##").length>36&&(poiName=poiName.substring(0,16)+"..."),dHtml.push("<tr><th></th>"),dHtml.push("<td style='padding:0px 0px 3px 3px;'>"),dHtml.push("<a style='word-wrap:break-word' onclick='return Instance(\""+this.guid+'")._selectAddrPoi('+i+")' href='javascript:void(0)' id='cont"+i+"_1_"+this.guid+"' title='"+poi.name+"'>"+poiName+"</a>"),dHtml.push("</td>"),dHtml.push("</tr>")}this.result.total>10&&(dHtml.push("<tr><th></th>"),dHtml.push("<td style='padding:0px 10px 0px 25px;height:1px;'><span onclick='return Instance(\""+this.guid+"\").viewMore()' style='cursor:pointer;color:#7A96CC;float:right'>查看更多结果>></span></td>"),dHtml.push("</tr>")),dHtml.push("</tbody>"),dHtml.push("</table>")}templateObj.contents=dHtml.join("")}else{sHtml.push('<table id="tblEveAddr" cellspacing="0" cellpadding="0" class="result black">'),sHtml.push("<tbody>");for(var i=0;i<this.addrs.length;i++)if(0==i){var poi=this.addrs[i];sHtml.push('<tr style="cursor:pointer" onclick=\'Instance("'+this.guid+'")._selectEvaAddr('+i+")' onmouseover='Instance(\""+this.guid+'")._highLightEve(this, '+i+")' onmouseout='Instance(\""+this.guid+'")._unHighLightEve(this, '+i+")'>"),sHtml.push("<th>"),sHtml.push("<div title='在图上显示该点' style='width:19px;height:20px;background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/addrs_5158b68.png) no-repeat scroll 0px -250px  transparent;'>"),sHtml.push("</div>"),sHtml.push("</th>"),sHtml.push("<td style='padding-bottom:8px'>"),sHtml.push("<a style='word-wrap:break-word' onmouseover='return Instance(\""+this.guid+'")._setTop('+i+", true, true)' onmouseout='return Instance(\""+this.guid+'")._setTop('+i+", false)' onclick='return Instance(\""+this.guid+'").select('+i+",0, {statCode:STAT_CODE.STAT_PANEL_SELECT})' href='javascript:void(0)' id='addr"+i+"_0_"+this.guid+"'>"+poi.name+"</a>"),sHtml.push("<p>地址："+poi.addr+"</p>"),sHtml.push("</td>"),sHtml.push("</tr>");var me=this;!function(){var t=i,e={offset:constant.A_J_MARKER_OFFSET,imageOffset:new BMap.Size(-34,-116),infoWindowOffset:constant.A_J_MARKER_INFOWND_OFFSET},s=new BMap.Icon(constant.A_J_MARKER_IMG,constant.A_J_MARKER_RED_SIZE,e),n={icon:s,baseZIndex:25e5},r=util.parseGeo(poi.geo),d=util.getPointByStr(r.points);me.viewBounds.push(d),marker=new BMap.Marker(d,n),marker.addEventListener("click",function(){me._selectEvaAddr(t)}),marker._stCode=constant.OVERLAY_STYLE.ADDR_MKR_EST,marker.addEventListener("mouseover",function(){var e=T.g("tblEveAddr"),i=e.rows[t];i&&me._highLightEve(i,t)}),marker.addEventListener("mouseout",function(){var e=T.g("tblEveAddr"),i=e.rows[t];i&&me._unHighLightEve(i,t)}),marker.precise=0,me.addrMarkers.push(marker),map.addOverlay(marker)}();break}sHtml.push("</tbody>"),sHtml.push("</table>"),templateObj.addrs=sHtml.join("");var addrlen=this.addrs.length;addrlen>1&&rHtml.push("<table style='width:100%' cellspacing=\"0\" cellpadding=\"0\" ><tr><td style='padding:13px 0px 0px 1px;height:1px;color:#4673CC;'><strong>以下地点可能帮助您参考：</strong></td></tr></table>"),rHtml.push('<table id="tblRefAddr" cellspacing="0" cellpadding="0" >'),rHtml.push("<tbody>");for(var i=1;i<this.addrs.length;i++){var poi=this.addrs[i];rHtml.push("<tr onclick=' Instance(\""+this.guid+'")._selectRefAddr('+i+")'>"),rHtml.push("<th style='padding:6px 0px 0px 1px;'>"),rHtml.push("<div title='在图上显示该点' style='cursor:pointer;width:16px;height:21px;background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/addrs_5158b68.png) no-repeat scroll -67px "+25*(1-i)+"px  transparent;'>"),rHtml.push("</div>"),rHtml.push("</th>"),rHtml.push("<td style='padding:1px 0px 0px 8px;width:100%'>"),rHtml.push("<a style='word-wrap:break-word' href='javascript:void(0)' id='addr"+i+"_0_"+this.guid+"'>"+poi.name+"</a>"),rHtml.push("</td>"),rHtml.push("</tr>");var me=this;!function(){var t=i,e={offset:constant.A_J_ADDR_OFFSET,imageOffset:new BMap.Size(-83,25*(1-i)),infoWindowOffset:constant.A_J_MARKER_INFOWND_OFFSET},s=new BMap.Icon("../../../images/addrs_5158b68.png"/*tpa=http://webmap2.map.bdstatic.com/newmap/static/common/images/addrs_5158b68.png*/,new BMap.Size(20,25),e),n={icon:s,baseZIndex:25e5},r=util.parseGeo(poi.geo),d=util.getPointByStr(r.points);me.viewBounds.push(d),marker=new BMap.Marker(d,n),marker.addEventListener("click",function(){var e=0;1==me.curType&&-1!=me.curSelIndex&&(t=me.curSelIndex,e=me.curType),me.select(t,e,{statCode:STAT_CODE.STAT_PANEL_SELECT})}),marker._stCode=constant.OVERLAY_STYLE.ADDR_MKR_NUM[t-1],marker.addEventListener("mouseover",function(){me._setTop(t,!0,!0)}),marker.addEventListener("mouseout",function(){map.temp.infoWin&&1==map.temp.infoWin.isOpen()&&map.temp.infoWin.overlay===this||me._setTop(t,!1)}),marker.precise=1,me.addrMarkers.push(marker),map.addOverlay(marker)}()}rHtml.push("</tbody>"),rHtml.push("</table>"),templateObj.refer=rHtml.join("");var conlen=this.contents?this.contents.length:0;if(conlen>0){dHtml.push("<table style='width:100%' cellspacing=\"0\" cellpadding=\"0\" ><tr><td style='padding:0px 0px 0px 25px;height:1px;'><strong>此处有：</strong></td></tr></table>"),dHtml.push('<table cellspacing="0" cellpadding="0" class="result black">'),dHtml.push("<tbody>");for(var i=0;conlen>i;i++){var poi=this.contents[i],poiName=poi.name;poiName.replace(/[\u0100-\uffff]/g,"##").length>36&&(poiName=poiName.substring(0,16)+"..."),dHtml.push("<tr><th>"),dHtml.push("<td style='padding:0px 0px 3px 3px;'>"),dHtml.push("<a onclick='return Instance(\""+this.guid+'").select('+i+",1, {statCode:STAT_CODE.STAT_PANEL_SELECT})' href='javascript:void(0)' id='cont"+i+"_1_"+this.guid+"' title='"+poi.name+"'>"+poiName+"</a>"),dHtml.push("</td>"),dHtml.push("</tr>")}this.result.total>10&&(dHtml.push("<tr><th></th>"),dHtml.push("<td style='padding:0px 10px 0px 25px;height:1px;'><span onclick='return Instance(\""+this.guid+"\").viewMore()' style='cursor:pointer;color:#7A96CC;float:right'>查看更多结果>></span></td>"),dHtml.push("</tr>")),dHtml.push("</tbody>"),dHtml.push("</table>")}templateObj.contents=dHtml.join("");var tipsHtml=[];tipsHtml.push('<table style="width:100%" cellspacing="0" cellpadding="0">'),tipsHtml.push("<tbody>"),tipsHtml.push("<tr>"),tipsHtml.push("<td colspan='2' style='padding:10px 0px 0px 25px;height:1px;color:#7A96CC'>"),tipsHtml.push("<hr size='1' color='#BFBFBF'>"),tipsHtml.push("</td>"),tipsHtml.push("</tr>"),tipsHtml.push("<tr>"),tipsHtml.push("<td style='padding-right:7px'>"),tipsHtml.push("<div style='float:right;width:70px;height:20px;background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/addrs_5158b68.png) no-repeat scroll 0px -284px  transparent;'></div>"),tipsHtml.push("</td>"),tipsHtml.push("<td style='padding-left:7px'>"),tipsHtml.push("<div style='width:66px;height:21px;background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/addrs_5158b68.png) no-repeat scroll 0px -308px  transparent;'></div>"),tipsHtml.push("</td>"),tipsHtml.push("</tr>"),tipsHtml.push("</tbody>"),tipsHtml.push("</table>"),templateObj.tips=tipsHtml.join("")}return mapUtil.setViewport(this.viewBounds),template(templateObj)}catch(e){"undefined"!=typeof alog&&alog("http://webmap2.map.bdstatic.com/newmap/static/common/widget/com/PoiAddr/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/com/PoiAddr/PoiAddr.js",ln:485})}},initialize:function(){try{if(this.state&&this.select(this.state[0],this.state[1],{statCode:STAT_CODE.STAT_PANEL_SELECT}),this.json&&this.json.result){var t=this.json.result.wd||this.json.result.return_query;searchBox.setSwitchTab(1,t)}PanoUtil.isPanoStatus()&&PanoUtil.closePano(),BoxContainer&&BoxContainer.resetStatus(),window.isPrint||ClearBase.clearInit(),setComplaintCenterURL(map,this)}catch(e){"undefined"!=typeof alog&&alog("http://webmap2.map.bdstatic.com/newmap/static/common/widget/com/PoiAddr/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/com/PoiAddr/PoiAddr.js",ln:515})}},select:function(t,e,i){var s=this;util.loadSearchInfo(function(n){s._setSelect(t,e,i,n)})},_setSelect:function(t,e,i,s){if(-1!=t&&(-1==this.curSelIndex||this.curSelIndex!=t||this.curType!=e)){map.closeInfoWindow();var n=e>0?this.contents[t]:this.addrs[t];this.curMarker=e>0?this.addrMarkers[0]:this.addrMarkers[t];var r=util.parseGeo(n.geo),d=util.getPointByStr(r.points);if(n){var o=s.createSearchInfoWnd({title:n.name,addr:n.addr,tel:n.tel,uid:n.uid,poiType:n.poiType},{cityCode:this.sCityCode,x:d.lng,y:d.lat}),a=this;this.curSelIndex=t,this.curType=e,this.curElement&&(this.curElement.parentNode.parentNode.style.backgroundColor="#FAFAFA");var l=T.G(e>0?"cont"+t+"_"+e+"_"+a.guid:"addr"+t+"_"+e+"_"+a.guid);l.parentNode.parentNode.style.backgroundColor="#F0F0F0",this.curElement=l,this.sendMob&&(this.sendMob.style.visibility="hidden");var p=T.G("mob"+t+"_"+e+"_"+a.guid);p&&(p.style.visibility="visible",this.sendMob=p),s.openSearchInfoWnd(o,this.curMarker),Share.listIndex=t+","+e,o.addEventListener("close",function(){a.curElement&&(a.curElement.parentNode.parentNode.style.backgroundColor="#FAFAFA"),a.sendMob&&(a.sendMob.style.visibility="hidden"),a._setTop(a.curSelIndex,!1),a.curSelIndex=-1,Share.listIndex=a.curSelIndex+","+a.curType});var c=function(){!map.temp.infoWin||map.temp.infoWin&&0==map.temp.infoWin.isOpen()||(setTimeout(function(){map.zoomLevel<15&&map.zoomTo(15)},50),map.removeEventListener("moveend",arguments.callee))};map.addEventListener("moveend",c)}}},viewMore:function(){comMgr.go("s&wd="+encodeURIComponent(this.curKw)+"&c="+this.sCityCode+"&src=0&wd2="+encodeURIComponent(this.sugKw)+"&addr=0")},_setTop:function(){},_highLight:function(t,e){var i=this;if(!t.selected){t.style.background="#f4f4f4";var s=t.childNodes[0].childNodes[0];if(s&&(s.style.backgroundPosition="-1px -55px"),-1==i.preAddrPoiIndex){var n=i.addrMarkers[e];n&&i._setBlueIcon(n)}}},_unHighLight:function(t,e){var i=this;if(!t.selected){t.style.background="#FAFAFA";var s=t.childNodes[0].childNodes[0];if(s&&(s.style.backgroundPosition="-1px -5px"),-1==i.preAddrPoiIndex){var n=i.addrMarkers[e];n&&i._setRedIcon(n)}}},_setBlueIcon:function(t){var e={offset:constant.A_J_MARKER_BLUE_OFFSET,imageOffset:new BMap.Size(0,-156),infoWindowOffset:constant.A_J_MARKER_INFOWND_OFFSET},i=new BMap.Icon(constant.A_J_MARKER_IMG,constant.A_J_MARKER_BLUE_SIZE,e);t.setIcon(i)},_setRedIcon:function(t){var e={offset:constant.A_J_MARKER_OFFSET,imageOffset:new BMap.Size(0,-116),infoWindowOffset:constant.A_J_MARKER_INFOWND_OFFSET},i=new BMap.Icon(constant.A_J_MARKER_IMG,constant.A_J_MARKER_RED_SIZE,e);t.setIcon(i)},_selectAddr:function(t){var e=this;util.loadSearchInfo(function(i){e._setSelectAddrInfo(t,i)})},_setSelectAddrInfo:function(t,e){var i=this,s=0;map.closeInfoWindow();var n=this.addrs[t],r=this.addrMarkers[t],d=util.parseGeo(n.geo),o=util.getPointByStr(d.points);if(n){var a=e.createSearchInfoWnd({title:n.name,addr:n.addr,tel:n.tel,uid:n.uid,poiType:n.poiType},{cityCode:this.sCityCode,x:o.lng,y:o.lat});this.sendMob&&(this.sendMob.style.visibility="hidden");var l=T.G("mob"+t+"_"+s+"_"+i.guid);l&&(l.style.visibility="visible",this.sendMob=l),e.openSearchInfoWnd(a,r),Share.listIndex=t+","+s,a.addEventListener("close",function(){if(-1!=i.preAddrIndex){var t=T.g("tblPreciseAddr"),e=t.rows[i.preAddrIndex];e.selected=!1,i._unHighLight(e,i.preAddrIndex),i.preAddrIndex=-1}i.sendMob&&(i.sendMob.style.visibility="hidden"),Share.listIndex="-1,"+s}),this.preAddrIndex=t;var p=T.g("tblPreciseAddr");p.rows[t].selected=!0,r&&i._setBlueIcon(r)}},_selectAddrPoi:function(t){var e=this;util.loadSearchInfo(function(i){e._setPoiInfoWnd(t,i)})},_setPoiInfoWnd:function(t,e){var i=this,s=1;map.closeInfoWindow();var n=this.contents[t],r=this.addrMarkers[0],d=util.parseGeo(n.geo),o=util.getPointByStr(d.points);if(n){var a=e.createSearchInfoWnd({title:n.name,addr:n.addr,tel:n.tel,uid:n.uid,poiType:n.poiType},{cityCode:this.sCityCode,x:o.lng,y:o.lat});this.sendMob&&(this.sendMob.style.visibility="hidden");var l=T.G("mob"+t+"_"+s+"_"+i.guid);l&&(l.style.visibility="visible",this.sendMob=l),e.openSearchInfoWnd(a,r),Share.listIndex=t+","+s,a.addEventListener("close",function(){if(-1!=i.preAddrPoiIndex){var t=T.g("tblPreciseAddrPoi"),e=t.rows[i.preAddrPoiIndex];if(e){var n=e.childNodes[1];n.style.background="#FAFAFA"}i.preAddrPoiIndex=-1}r&&i._setRedIcon(r),i.sendMob&&(i.sendMob.style.visibility="hidden"),Share.listIndex="-1,"+s}),r&&i._setBlueIcon(r);var p=T.G("tblPreciseAddrPoi"),c=p.rows[t];if(c){var h=c.childNodes[1];h.style.background="#f4f4f4"}this.preAddrPoiIndex=t}},_selectEvaAddr:function(t){var e=this;util.loadSearchInfo(function(i){e._setEvaAddrInfoWnd(t,i)})},_setEvaAddrInfoWnd:function(t,e){var i=this,s=0;map.closeInfoWindow();var n=this.addrs[t],r=this.addrMarkers[t],d=util.parseGeo(n.geo),o=util.getPointByStr(d.points);if(n){var a=e.createSearchInfoWnd({title:n.name,addr:n.addr,tel:n.tel,uid:n.uid,poiType:n.poiType},{cityCode:this.sCityCode,x:o.lng,y:o.lat});this.sendMob&&(this.sendMob.style.visibility="hidden");var l=T.G("mob"+t+"_"+s+"_"+i.guid);l&&(l.style.visibility="visible",this.sendMob=l),e.openSearchInfoWnd(a,r),Share.listIndex=t+","+s,a.addEventListener("close",function(){if(-1!=i.preEvaAddrIndex){var t=T.g("tblEveAddr"),e=t.rows[i.preEvaAddrIndex];e.selected=!1,i._unHighLightEve(e,i.preEvaAddrIndex),i.preEvaAddrIndex=-1}i.sendMob&&(i.sendMob.style.visibility="hidden"),Share.listIndex="-1,"+s}),this.preEvaAddrIndex=t;var p=T.g("tblEveAddr");p.rows[t].selected=!0,r&&i._setEveBlueIcon(r)}},_selectRefAddr:function(t){var e=this;util.loadSearchInfo(function(i){e._setAddrInfoWindow(t,i)})},_setAddrInfoWindow:function(t,e){var i=this,s=0;map.closeInfoWindow();var n=this.addrs[t],r=this.addrMarkers[t],d=util.parseGeo(n.geo),o=util.getPointByStr(d.points);if(n){var a=e.createSearchInfoWnd({title:n.name,addr:n.addr,tel:n.tel,uid:n.uid,poiType:n.poiType},{cityCode:this.sCityCode,x:o.lng,y:o.lat});this.sendMob&&(this.sendMob.style.visibility="hidden");var l=T.G("mob"+t+"_"+s+"_"+i.guid);l&&(l.style.visibility="visible",this.sendMob=l),e.openSearchInfoWnd(a,r),Share.listIndex=t+","+s,a.addEventListener("close",function(){if(-1!=i.preRefAddrIndex){var t=T.g("tblRefAddr"),e=t.rows[i.preRefAddrIndex-1];e&&(e.style.background="#FAFAFA"),i.preRefAddrIndex=-1}i.sendMob&&(i.sendMob.style.visibility="hidden"),Share.listIndex="-1,"+s});var p=T.G("tblRefAddr"),c=p.rows[t-1];c&&(c.style.background="#f4f4f4"),this.preRefAddrIndex=t}},_setEveBlueIcon:function(t){var e={offset:constant.A_J_MARKER_BLUE_OFFSET,imageOffset:new BMap.Size(-34,-156),infoWindowOffset:constant.A_J_MARKER_INFOWND_OFFSET},i=new BMap.Icon(constant.A_J_MARKER_IMG,constant.A_J_MARKER_BLUE_SIZE,e);t.setIcon(i)},_setEveRedIcon:function(t){var e={offset:constant.A_J_MARKER_OFFSET,imageOffset:new BMap.Size(-34,-116),infoWindowOffset:constant.A_J_MARKER_INFOWND_OFFSET},i=new BMap.Icon(constant.A_J_MARKER_IMG,constant.A_J_MARKER_RED_SIZE,e);t.setIcon(i)},_highLightEve:function(t,e){var i=this;if(!t.selected){t.style.background="#f4f4f4";var s=i.addrMarkers[e];s&&i._setEveBlueIcon(s)}},_unHighLightEve:function(t,e){var i=this;if(!t.selected){t.style.background="#FAFAFA";var s=i.addrMarkers[e];s&&i._setEveRedIcon(s)}}}),module.exports=PoiAddr});