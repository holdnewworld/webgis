define("common:widget/ui/BoxContainer/BoxContainer.js",function(n,e,o){var t=n("common:widget/ui/areaCfg/areaCfg.js"),i=n("common:widget/ui/Special/Special.js"),a=n("common:widget/com/componentManager.js"),l=(n("common:widget/ui/mapInfo/mapInfo.js"),n("common:widget/ui/tools/tools.js")),r=n("common:widget/ui/config/config.js"),c=r.modelConfig,s=(r.mapConfig,{scrollBar:null,container:T.g("ToolsCon"),titleDom:T.g("ToolsTitle"),contentDom:T.g("toolsContent"),closeBtn:T.g("ToolsCloseBtn"),_opened:!1,curSpecial:null,curCity:null,modelList:{PoiSearch:1,BusTrans:1,LinesQuery:1,BusLines:1,NavTrans:1,CBusTrans:1,Detail:1,SearchInView:1},init:function(){var n=this;return n.bindEvent(),this},initScrollBar:function(){var n=this;n.scrollBar=new baidu.ui.ScrollPanel({container:n.contentDom,overflow:"overflow-y",margin:[0,0,0,5]}),n.scrollBar.render(n.contentDom)},show:function(n){n=n||{};var e=this,o=n.title||"",t=n.content||"";e.setTitle(o),e.setContent(t),e.bindCloseEvent(),e.container.style.display="block",e.scrollBar?e.scrollBar.update():e.initScrollBar()},hidden:function(){var n=this;n.container&&(n.container.style.display="none"),n._opened=!1},resetStatus:function(){var n=baidu.g("btn_home"),e=baidu.g("btn_return");n&&(n.style.display="block"),e&&(e.style.display="none")},setTitle:function(n){var e=this;e.titleDom.innerHTML=n},setContent:function(n){var e=this;e.contentDom.innerHTML=n,e.scrollBar&&e.scrollBar.update()},bindCloseEvent:function(){var n=this;n.closeBtn.onclick=function(){n.exit()}},exit:function(){var n=this;n.hidden()},bindEvent:function(){var e=this,o=(T.g("subWayBtn"),T.g("btn_home")),t=T.g("favBtn"),i=function(n){return e._opened?void e.exit():(e._opened=!0,s.show(),l.closeOtherOps(),addStat("indextool.toolbar.favourites"),window.FavInst?window.FavInst.render():T.browser.ie<7?setTimeout(function(){a.load("Fav",{dom:"passive_com_box"})},0):a.load("Fav",{dom:"passive_com_box"}),void n.preventDefault())};T.on(t,"click",i),T.on(o,"click",function(o){var t=n("common:widget/ui/toolShare/ToolShare.js"),i="other",l=window.currentComponent._className,r=t.getMInfo(),s=e.modelList;e._opened?i="fav":s[l]&&r.className==l&&(i=r.text?l:"nores"),("SearchInView"==i||"LinesQuery"==i||"BusLines"==i)&&(i="PoiSearch"),"CBusTrans"==i&&(i="BusTrans"),window.place&&place.resetArea&&place.resetArea(),a.go("cur&wd="+encodeURIComponent(c.cityName),{cinfo:{from:"home_btn"}}),addStat("indextool.toolbar.homebtn"),o.preventDefault()})},showSpecial:function(n){n=n||{};var e=this,o=T.g("specialBtn"),a=T.g("specInner"),l=c.cityName,r=[c.cityName],s=n.type||"",u=n.sCity||"",d=n.eCity||"",m=0;if(l=l.replace(/市$/,""),s?e.curCity=null:m=1,e.curCity&&(l=e.curCity),u&&d){r=[u,d];for(var p=0;p<r.length;p++){var f=r[p].replace(/市$/,"");if(i.data[s][f]){l=f,e.curCity=f;break}}}if(s=s||e.curSpecial,!s||!i.data[s][l])return void(m?e.hiddenSpecial({noClear:!0}):e.hiddenSpecial());var v=i.data[s];a.innerHTML=v.spTitle.replace(/#cityName#/g,l),o.className=o.className+" toolBtn--img--"+s,o.style.display="block",o.onclick="subway"!=s?function(){i.searchWord(v.spTitle,{type:s,codeStr:"SPEC"})}:function(){var n=t[l]||131;window.open(v.url+v[l]+"&ccode="+n)},e.curSpecial=s},hiddenSpecial:function(n){n=n||{};var e=this,o=T.g("specialBtn"),t=T.g("specInner");t.innerHTML="",o.className="toolBtn toolBtn--link toolBtn--img",o.style.display="none",o.onclick=null,n.noClear||(e.curSpecial=null),e.curCity=null}});o.exports=s.init()});