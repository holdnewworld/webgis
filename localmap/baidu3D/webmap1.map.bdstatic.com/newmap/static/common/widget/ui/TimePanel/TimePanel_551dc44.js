define("common:widget/ui/TimePanel/TimePanel.js",function(i,t,e){function n(i){T.lang.Class.call(this),this._setConfig(i),this.initialize()}var o,s=i("common:widget/ui/util/util.js"),l=function(){};T.lang.inherits(n,T.lang.Class,"SelectTime"),T.object.extend(n.prototype,{_setConfig:function(i){this.dom=T('<div class="timePanel"></div>')[0],this.anchor=T.g(i.anchor)||null,this.position=T.g(i.position),this.onShow=i.onShow||l,this.onHide=i.onHide||l,this.onTimeSelected=i.onTimeSelected||l,this.onChange=i.onChange||l},initialize:function(){try{if(baidu.dom(".st_time")&&baidu.dom(".st_time").length>0){var t=baidu.dom(".st_time").parent()[0];baidu.dom(t).remove(),t=null}var e=".timePanel{position:absolute;z-index:1000;width:110px;height:265px;background:#fff;overflow-y:scroll;border:1px solid #d8d8d8}.timePanel li{list-style:none;line-height:20px;color:#999;text-align:center;cursor:pointer;border-bottom:1px solid #e6e6e6}.timePanel li.minute{height:20px;background:#fff}.timePanel li:hover{background:#fbfbfc;color:#333}.timePanel li.selected{color:#3d6dcc;font-weight:bolder}.timePanel li.hour{background:#f4f4f4}";i.loadCss({content:e,name:"TimePanel"}),this.initHtml();var n=this;T(".hour",this.dom).click(function(i){T(i.target).find("ul").toggle()}),T(".minute",this.dom).click(function(i){n.onTimeSelected(i.target.innerHTML),n.hide()})}catch(o){"undefined"!=typeof alog&&alog("http://webmap1.map.bdstatic.com/newmap/static/common/widget/ui/TimePanel/exception.fire","catch",{msg:o.message||o.description,path:"common:widget/ui/TimePanel/TimePanel.js",ln:65})}},show:function(i){var t=parseInt(i.substring(0,i.indexOf(":")),10);this.setPosition();for(var e=this.dom.firstChild;parseInt(T(e.firstChild).attr("data-h"),10)<t;)e.appendChild(e.firstChild);T("http://webmap1.map.bdstatic.com/newmap/static/common/widget/ui/TimePanel/ul.minu",this.dom).hide();var n=T("http://webmap1.map.bdstatic.com/newmap/static/common/widget/ui/TimePanel/ul.minu",T(".hour",this.dom)[0]);n.show(),n=n.find("li");for(var s=0;s<n.length;s++)n[s].innerHTML==i&&(n[s].className+=" selected");this.dom.style.display="block";var l=this;o=function(i){T(i.target).closest(".timePanel").length||l.hide()},baidu.on(document.body,"click",o)},hide:function(){this.dom.style.display="none",this.onHide.call(this),this.visible=!1,baidu.un(document.body,"click",o)},initHtml:function(){var i,t,e=["<ul>"];for(i=0;24>i;i++){for(e.push('<li class="hour" data-h="'+i+'">'+i+'<span class="bs_tm"></span>'),e.push('<ul class="minu" style="display:none">'),t=0;60>t;t+=10)e.push('<li class="minute">'+s.fixed(i,2)+":"+s.fixed(t,2)+"</li>");e.push("</ul></li>")}e.push("</ul>"),this.dom.innerHTML=e.join("")},setPosition:function(){if(this.anchor){var i=this.anchor,t=T.dom.offset(i);this.dom.style.left=t.left+1+"px",this.dom.style.top=t.top+i.clientHeight+"px"}}}),e.exports=n});