define("common:widget/com/MobileDownload/MobileDownload.js",function(require,exports,module){function MobileDownload(o){o=o||{},T.lang.Class.call(this,o),this.cinfo=o.cinfo||{},this.dom=o.dom||{},this.loadRes(),this.render(),this.initialize()}T.lang.inherits(MobileDownload,T.lang.Class,"MobileDownload"),T.object.extend(MobileDownload.prototype,{VCODE_URL:"/v",SEND_URL:"/ag/sms/send_sms/",vcode:"",loadRes:function(){var o='.moContainer{width:660px;height:400px;position:relative}.moLeft{padding:5px 5px 0;float:left}.dimensionalCode{position:absolute;width:130px;height:130px;right:70px;bottom:90px}.dimensionalCodeTip{position:absolute;font-family:"宋体";font-size:12px;color:#666;right:70px;bottom:70px;line-height:20px}.moCenterTipImg{position:absolute;left:101px;top:98px;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:0 -86px;width:23px;height:23px}.moSmsMethod{float:left;padding:0 22px 0 40px;width:158px}.moCodeMethod{float:left;padding:0 30px;width:158px;border-right:#f2f2f2 1px solid;border-left:#f2f2f2 1px solid}.moWebMethod{float:left;padding:0 40px 0 22px;width:158px}.moSmsNo{padding:18px 0 0}.moSmsInput{vertical-align:middle;width:153px;height:24px;border:#e6e6e6 2px solid;font-family:"微软雅黑";font-size:12px;color:#666;line-height:24px}.moSmsBtnContainer{padding:10px 0 0}.moSmsBtn{display:block;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-35px -69px;width:68px;height:33px}.moSmsBtn:hover{display:block;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-104px -69px;width:68px;height:33px}.moMethodImg{padding:13px 0 0;text-align:center}.moBackBtn{position:absolute;right:152px;bottom:24px;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-18px -69px;width:16px;height:16px}.moBtnCur{display:inline-block;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-2px -109px;width:6px;height:6px}.moBtnUnCur{display:inline-block;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-14px -109px;width:6px;height:6px}.moPptBtnContainer{float:right;padding:0 15px 0 0}.moverifycode{width:94px;vertical-align:middle;border:#e6e6e6 2px solid;height:24px;font-family:"微软雅黑";font-size:12px;color:#666;line-height:24px}.moSmsBtnContainer img{vertical-align:middle;width:43px;height:28px;margin-left:5px}.errorTip{color:#e60012}.moImgContainer{padding:38px 0 0 10px;width:143px;overflow:hidden}.moRight{float:left;padding:50px 0 0}.moTitle{font-family:"微软雅黑";font-size:30px;color:#333}.moSlogan{padding:10px 0 5px 5px}.moRecContentList{font-family:"微软雅黑";font-size:13px;color:#666;list-style:disc;line-height:20px;padding:0 0 0 22px}.andriodDownload{padding:16px 0 0;position:relative;width:127px}.andriodVersion{position:absolute;top:14px;right:-1px;width:25px;height:26px;z-index:20}.andriodDownloadBtn{display:block;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-1px -1px;width:127px;height:33px}.andriodDownloadBtn:hover{display:block;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-129px -1px;width:127px;height:33px}.moTextTip{font-family:"宋体";font-size:12px;color:#999;line-height:24px}.moTextTip a{text-decoration:none}.moTextTip a:hover{text-decoration:underline}.iphoneDownload{padding:15px 0 0;position:relative;width:127px}.iphoneVersion{position:absolute;top:13px;right:-1px;width:25px;height:26px;z-index:20}.iphoneDownloadBtn{display:block;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-1px -35px;width:127px;height:33px}.iphoneDownloadBtn:hover{display:block;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-129px -35px;width:127px;height:33px}.dimensionalCode{position:absolute;width:130px;height:130px;right:70px;bottom:90px}.dimensionalCodeTip{position:absolute;font-family:"宋体";font-size:12px;color:#666;right:70px;bottom:70px;line-height:20px}.moGoBtn{position:absolute;right:24px;bottom:24px;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-1px -69px;width:16px;height:16px}.moGoBtnTip{position:absolute;right:52px;bottom:24px;font-family:"宋体";font-size:12px;color:#e6e6e6}.moGoBtnTip a{text-decoration:none;color:#3d6dcc}.moGoBtnTip a:hover{text-decoration:underline;color:#3d6dcc}.moCenter{font-family:"微软雅黑";font-size:30px;color:#333;text-align:center;padding:45px 0 0}.moCenterTip{padding:11px 0 38px 131px;font-family:"微软雅黑";font-size:13px;color:#999}.moCenterTip a{text-decoration:none}.moCenterTip a:hover{text-decoration:underline}.moCenterTipImg{position:absolute;left:101px;top:98px;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:0 -86px;width:23px;height:23px}.moSmsMethod{float:left;padding:0 22px 0 40px;_padding:0 22px 0 40px;width:158px}.moCodeMethod{float:left;padding:0 30px;_padding:0 28px;width:158px;border-right:#f2f2f2 1px solid;border-left:#f2f2f2 1px solid}.moWebMethod{float:left;padding:0 40px 0 22px;_padding:0 40px 0 22px;width:158px}.moMethodFirstLine{font-family:"微软雅黑";font-size:13px;color:#666;line-height:20px}.moMethodFirstLine .moMethodSpan{color:#74a2f2}.moMethodFirstLine .moMethodTip{color:#999}.moSmsNo{padding:18px 0 0}.moSmsInput{vertical-align:middle;width:153px;height:24px;border:#e6e6e6 2px solid;font-family:"微软雅黑";font-size:12px;color:#666;line-height:24px}.moSmsBtnContainer{padding:10px 0 0}.moMethodImg{padding:13px 0 0;text-align:center}.moBackBtn{position:absolute;right:152px;bottom:24px;background-image:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/pcmoindex_d9f6cab.png);background-position:-18px -69px;width:16px;height:16px}.moPptContainer{width:2000px}.moPptContainer li{float:left}.moverifycode{width:94px;vertical-align:middle;border:#e6e6e6 2px solid;height:24px;font-family:"微软雅黑";font-size:12px;color:#666;line-height:24px}.errorTip{color:#e60012}.map_popup button.mo-close{position:absolute;z-index:50;top:-1px;right:-1px;width:37px;height:37px;background:url(http://webmap2.map.bdstatic.com/newmap/static/common/images/newMoClose_074f7aa.jpg) no-repeat;background-position:center;border:#f2f2f2 1px solid;cursor:pointer}.map_popup button.mo-close:hover{position:absolute;z-index:50;top:-1px;right:-1px;width:37px;height:37px;background:url(http://webmap1.map.bdstatic.com/newmap/static/common/images/newMoCloseHover_0eaa6b2.jpg) no-repeat;background-position:center;border:#f2f2f2 1px solid;cursor:pointer;background-color:#5098da}.starBg{padding-right:5px;width:250px;height:395px};';require.loadCss({content:o,name:"MobileDownload"})},render:function(){try{var cmsMoData=baidu.json.parse(window._OLR.index)||{},mdata=cmsMoData.mo.data,html="";if("IMG"==this.cinfo.from){var template=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div id="moContainerId" class="moContainer"><div class="moLeft"><div class="starBg" style="background-image:url(',"undefined"==typeof background_png?"":background_png,");_background-image:url(","undefined"==typeof iebackground?"":iebackground,')"></div></div><div class="moRight"><div class="moTitle">',"undefined"==typeof title?"":title,'</div><div class="moSlogan"><img src=',"undefined"==typeof pc_Slogan?"":pc_Slogan,' alt="出门就靠百度地图！"/></div><ul class="moRecContentList"><li>',"undefined"==typeof subTitle1?"":subTitle1,"</li><li>","undefined"==typeof subTitle2?"":subTitle2,"</li>"),subTitle3&&_template_fun_array.push("    <li>","undefined"==typeof subTitle3?"":subTitle3,"</li>"),_template_fun_array.push(""),subTitle4&&_template_fun_array.push("    <li>","undefined"==typeof subTitle4?"":subTitle4,"</li>"),_template_fun_array.push('</ul><div class="andriodDownload"><a class="andriodDownloadBtn" onclick="PcToMobile.open(&#39;BTN_D&#39;, &#39;下载页安卓按钮&#39;, {qudao: &#39;1009177o&#39;, pref:&#39;',"undefined"==typeof pref?"":pref,'&#39;});"  href="http://www.baidu.com/search/error.html" target="andriodApk" title="点击将安装包下载到电脑，通过数据线安装到手机"></a><img class="andriodVersion" src="',"undefined"==typeof version_img_andriod?"":version_img_andriod,'" width="25" height="26" /></div><div class="iphoneDownload"><a class="iphoneDownloadBtn" onclick="PcToMobile.open(&#39;BTN_D&#39;, &#39;下载页ios按钮&#39;, {pref:&#39;',"undefined"==typeof pref?"":pref,'&#39;});" href="http://itunes.apple.com/cn/app/id452186370?ls=1&mt=8" title="点击前往苹果官方商店下载" target="_blank"></a><img class="iphoneVersion" src="',"undefined"==typeof version_img_iphone?"":version_img_iphone,'" width="25" height="26" /></div><div class="moTextTip">在AppStore搜索“百度地图”</div><div class="dimensionalCode"><img src=',"undefined"==typeof code?"":code,' alt="二维码" width="130" height="130"/></div><div class="dimensionalCodeTip">扫描二维码轻松下载。</div></div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];html=template({title:"下载百度手机地图",subTitle1:mdata.popup_title1,subTitle2:mdata.popup_title2,subTitle3:mdata.popup_title3,subTitle4:mdata.popup_title4,version_img_andriod:mdata.popup_version_andriod,version_img_iphone:mdata.popup_version_iphone,pref:this.cinfo.realfrom,pc_Slogan:mdata.pc_Slogon,background_png:mdata.background_png,iebackground:mdata.iebackground,code:mdata.code})}else{data={hideReturn:1},"BTN_D"==this.cinfo.from&&(data={hideReturn:0});var template=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div id="moContainerId" class="moContainer"><div class="moCenter">感谢您使用百度手机地图</div><div class="moCenterTip">下载会在几秒内自动开始，如浏览器长时间没有响应，请点击<a href="http://www.baidu.com/search/error.html" target="andriodApk" title="点击将安装包下载到电脑，通过数据线安装到手机">重新下载</a></div><div class="moCenterTipImg"></div><div class="moDownloadMethod"><div class="moSmsMethod"><div class="moMethodFirstLine"><span class="moMethodSpan">方式一：</span>发送免费短信下载</div><div class="moSmsNo"><input name="moNo" maxlength="11" id="moNoId" type="input" class="moSmsInput" value="请输入手机号"/></div><div class="moSmsBtnContainer"><input name="moVerifycode" id="moVerifycodeId" class="moverifycode" maxlength="4" value="请输入验证码"/><img id="moVerifyImgId" class="verify" alt="点击刷新" title="点击刷新"></div><div class="moSmsBtnContainer"><a id="sendToMobileId" class="moSmsBtn" href="#"></a></div><div class="moSmsBtnContainer errorTip" id="sendToMobileTipId"></div></div><div class="moCodeMethod"><div class="moMethodFirstLine"><span>方式二：</span>扫描二维码下载<br /><span class="moMethodTip">推荐使用微信“扫一扫”扫描即可下载</span></div><div class="moMethodImg"><img src=',"../../../../../../../webmap0.map.bdstatic.com/newmap/static/common/images/code_2afacbb.jpg"/*tpa=http://webmap0.map.bdstatic.com/newmap/static/common/images/code_2afacbb.jpg*/,' alt="二维码" width="130" height="130"/></div></div><div class="moWebMethod"><div class="moMethodFirstLine"><span>方式三：</span>手机输入网址下载<br /><span class="moMethodTip">在手机浏览器上输入 mo.baidu.com/map下载</span></div><div class="moMethodImg"><img src=',"../../../images/moWebsite_09e1280.png"/*tpa=http://webmap1.map.bdstatic.com/newmap/static/common/images/moWebsite_09e1280.png*/,' alt="移动官网" width="156" height="68"/></div></div><div class="moGoBtn"></div><div class="moGoBtnTip"><a href="javascript:void(0);" onclick="addStat(&#39;downloadapp.infowin.backbtn&#39;);PcToMobile.open(&#39;IMG&#39;, &#39;后退&#39;);" style="',"undefined"==typeof(hideReturn?"display:none":"")?"":hideReturn?"display:none":"",'" >返回</a></div><div class="moBackBtn" style="',"undefined"==typeof(hideReturn?"display:none":"")?"":hideReturn?"display:none":"",'"></div></div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];html=template(data)}this.dom.innerHTML=html}catch(e){"undefined"!=typeof alog&&alog("http://webmap1.map.bdstatic.com/newmap/static/common/widget/com/MobileDownload/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/com/MobileDownload/MobileDownload.js",ln:92})}},initialize:function(){try{if("IMG"==this.cinfo.from);else{var o={from:this.cinfo.realfrom};this.cinfo.qudao&&(o.qudao=this.cinfo.qudao),this.cinfo.pref&&(o.pref=this.cinfo.pref),this.sendToMobile()}}catch(e){"undefined"!=typeof alog&&alog("http://webmap1.map.bdstatic.com/newmap/static/common/widget/com/MobileDownload/exception.fire","catch",{msg:e.message||e.description,path:"common:widget/com/MobileDownload/MobileDownload.js",ln:115})}},bind:function(){},initMoPpt:function(){},sendToMobile:function(){var o=this,e="gw10011";this.sendToMobileBtnEl=T.g("sendToMobileId"),this.tipMsgEl=T.g("sendToMobileTipId"),this.phoneEl=T.g("moNoId"),this.vcodeEl=T.g("moVerifycodeId"),this.verImg=T.G("moVerifyImgId"),T.on(this.verImg,"click",function(){o.getCode()}),T.on(this.sendToMobileBtnEl,"click",function(){if(o.validateMoData()===!0){var i=[],t=o.phoneEl.value,a=o.vcodeEl.value;i.push("phone[0]="+t),i.push("vcode="+o.vcode),i.push("code_input="+a),i.push("tn=map"),i.push("channel="+e),o.sendMessage(o.SEND_URL,i.join("&"))}ccStat("PC发链接到手机",{from:o.cinfo.realfrom},"PCMAP_P2M")}),T.on("moContainerId","click",function(e){baidu.event.getTarget(e).id!=o.sendToMobileBtnEl.id&&o.hideTipMsg()}),T.on(this.phoneEl,"focus",function(){inputValue=baidu.dom.getAttr(o.phoneEl,"value"),"请输入手机号"==inputValue&&baidu.dom.setAttr(o.phoneEl,"value","")}),T.on(this.vcodeEl,"focus",function(){inputValue=baidu.dom.getAttr(o.vcodeEl,"value"),"请输入验证码"==inputValue&&baidu.dom.setAttr(o.vcodeEl,"value","")}),o.getCode()},getCode:function(){var o=this,e=T.G("moVerifyImgId");baidu.ajax(this.VCODE_URL+"&t="+(new Date).getTime(),{dataType:"json",success:function(i){o.vcode=i.captcha_vcode_str,e.src=o.VCODE_URL+"/genimg/"+o.vcode+"&t="+(new Date).getTime()},error:function(){}})},sendMessage:function(o,e){var i=this;i.showTipMsg("短信正在发送中，请稍候！"),baidu.ajax(o,{method:"post",data:e,dataType:"json",success:function(o){i.sendMessageCallBack(o)},error:function(){i.showTipMsg("发送失败"),i.getCode()}})},sendMessageCallBack:function(o){var e=this,i=[];switch(o.type){case"PHONE_NUM_INVALID":i.push({msg:"手机号错误",el:this.phoneEl});break;case"VCODE_VERITY_FAIL":i.push({msg:"验证码错误",el:this.vcodeEl});break;case"SMS_SEND_FAIL":i.push({msg:"信息发送失败"});break;case"SMS_SEND_SUCCESS":i.push({msg:"发送成功"});break;default:i.push({msg:"抱歉，未知错误，请稍候重试"})}e.getCode(),this.showTipMsg(i)},validateMoData:function(){var o="请输入手机号"==this.phoneEl.value?"":this.phoneEl.value,e="请输入验证码"==this.vcodeEl.value?"":this.vcodeEl.value,i=[];return this.hideTipMsg(),this.isEmpty(o)&&i.push({msg:"请输入手机号码",el:this.phoneEl}),this.isMobilePhone(o)||i.push({msg:"手机号错误",el:this.phoneEl}),this.isEmpty(e)&&i.push({msg:"请输入验证码",el:this.vcodeEl}),i.length>0?(this.showTipMsg(i),!1):!0},isMobilePhone:function(o){return/^\d{11}/.test(o)},isEmpty:function(o){return!/./.test(o)},isVCode:function(o){return/^[a-zA-Z0-9]{4}$/.test(o)},showTipMsg:function(o){T.isString(o)&&(o={msg:o}),o=[].concat(o),msg=o[0].msg;for(var e=0;e<o.length;e++){var i=o[e],t=i.el;t&&(t.style.borderColor="#e60012")}this.tipMsgEl.innerHTML=msg,this.tipMsgEl.style.display="block"},hideTipMsg:function(){this.phoneEl.style.borderColor="#e6e6e6",this.vcodeEl.style.borderColor="#e6e6e6",this.tipMsgEl.innerHTML="",this.tipMsgEl.style.display="none"}}),module.exports=MobileDownload});